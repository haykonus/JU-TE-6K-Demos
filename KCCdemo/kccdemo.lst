 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 1 - 11/21/2024 11:26:38


       1/       0 :                     ;------------------------------------------------------------------------------
       2/       0 :                     ; Title:                KCcompact Demo fÃ¼r JuTe 6K
       3/       0 :                     ;
       4/       0 :                     ; Erstellt:             10.10.2024
       5/       0 :                     ; Letzte Ã„nderung:      15.11.2024
       6/       0 :                     ;------------------------------------------------------------------------------ 
       7/       0 :                     
       8/       0 :                                     cpu     z8601
       9/       0 :                                     assume RP:0C0h                  ; Keine Register-Optimierung
      10/       0 :                                     
      11/       0 : =>DEFINED                    ifndef  BASE
      12/       0 :                                     BASE:   set     8000H   
      13/       0 : [11]                         endif   
      14/    8000 :                                     org     BASE
      15/    8000 :                                     
      16/    8000 : =>UNDEFINED                  ifndef  ES40_INC                
      17/    8000 :                                     include ../ES4.0/es40_inc.asm
(1)    1/    8000 :                     ;-----------------------------------------------------------------------------
(1)    2/    8000 :                     ; JU+TE TINY  ES4.0
(1)    3/    8000 :                     ; Include-Datei mit Systemfunktionen, V. Pohlers 12/2022
(1)    4/    8000 :                     ;------------------------------------------------------------------------------
(1)    5/    8000 :                     
(1)    6/    8000 :                     ES40_INC                                ; Flag für include-Anweisungen
(1)    7/    8000 :                     
(1)    8/    8000 :                     ; Prozeduren aus ES40
(1)    9/    8000 :                     
(1)   10/    8000 :                     ; In all diesen Routinen wird vorausgesetzt, daß der Registerpointer auf %10 steht
(1)   11/    8000 : =0AF7H               PMON            equ     0AF7h           ; druckt "Mon" und einen Returncode aus. Wenn ein Befehl nach erfolgreicher Ausführung "Mon" melden soll, dann ist er statt mit RET mit JP %0AF7 zu beenden.
(1)   12/    8000 : =0C69H               HTA16           equ     0C69h           ; druckt die 16 Bit aus %18/19 als 4-Ziffer-Hexzahl aus, %18/19 zerstört
(1)   13/    8000 : =0C72H               HTA8            equ     0C72h           ; druckt die 8 Bit aus %19 als 2-Ziffer-Hexzahl aus, %19 zerstört
(1)   14/    8000 : =0C7BH               HTA4            equ     0C7Bh           ; druckt die niederen 4 Bit aus %19 als Hexziffer aus, %19 zerstört
(1)   15/    8000 : =0C8DH               PRRET           equ     0C8Dh           ; druckt einen Return-Kode aus (%0D)
(1)   16/    8000 : =0C91H               RWCONT          equ     0C91h           ; druckt einen Return-Kode aus und wartet dann auf Tastendruck, wenn die Leertaste gedrückt wurde ist das Z-Flag gesetzt
(1)   17/    8000 : =0C9BH               PCAS            equ     0C9Bh           ; druckt das Zeichen aus %15 aus, dann die 16 Bit aus %1A/1B (%18/19 zerstört) als Hexzahl und noch ein Leerzeichen 
(1)   18/    8000 : =0CA9H               ADRE            equ     0CA9h           ; wandelt die 4 Ziffern ab Adresse (%1E/1F) nach %1C/1D und %lA/1B, bei Wandlungsfehler wird POP POP RET ausgeführt, sonst Rückkehr mit um fünf erhöhtem %1F
(1)   19/    8000 : =0CB8H               ATH4            equ     0CB8h           ; wandelt die Ziffer von (%1E/1F) in niedere 4 Bit von %1D, %1F um eins erhöht
(1)   20/    8000 : =0CD5H               ATH16           equ     0CD5h           ; wandelt 4 Ziffern ab (%1E/1F) nach %1C/1D, %12 zerstört, %1F um vier erhöht
(1)   21/    8000 : =0CDCH               ATH8            equ     0CDCh           ; wandelt 2 Ziffern ab (%1E/1F) nach %1D, %12 zerstört, %1F um zwei erhöht
(1)   22/    8000 : =0A52H               DAXTH16         equ     0A52h           ; wandelt eine 1 bis 5 Ziffern lange Dezimalzahl (0 bis 65535) ab (%1E/1F) nach %14/15, %12/13 und %1C/1D zerstört, %1F um Anzahl der gewandelten Ziffern erhöht
(1)   23/    8000 :                     
(1)   24/    8000 :                     ; RP-unabhängig
(1)   25/    8000 : =812H                KOMMAND         equ     0812h           ; Einsprung nach RESET, Returnadr. f. externe Programme
(1)   26/    8000 : =815H                CHARIN          equ     0815h           ; CHARIN liefert in %13 nacheinander die Zeichen einer vom FSE editierten Zeile, als letztes noch %0D (returncode)
(1)   27/    8000 : =818H                CHAROUT         equ     0818h           ; CHAROUT führt das Zeichen aus %15 auf dem Bildschirm aus und gibt es evt. noch auf den Drucker (siehe Register %55) aus.
(1)   28/    8000 : =81BH                KEY             equ     081Bh           ; KEY liefert den ASCII-Kode der momentan gedrückten Taste in %6D, wenn keine gedrückt, dann %00
(1)   29/    8000 : =81EH                WKEY            equ     081Eh           ; WKEY wartet mit Kursordarstellung auf einen Tastendruck und liefert den ASCII-Kode dann in %13
(1)   30/    8000 : =821H                SAVE            equ     0821h           ; SAVE speichert den Speicherbereich auf Kassette, dessen Anfangsadresse in %20/21 steht mit der in %22/23 angegebenen Anzahl von Bytes ab
(1)   31/    8000 : =824H                LOAD            equ     0824h           ; LOAD lädt ab der in %20/21 stehenden Adresse die Daten von Kassette in den Speicher und gibt in %22/23 die Anzahl der fehlerfrei geladenen Byte zurück
(1)   32/    8000 : =827H                SCRFUN          equ     0827h           ; Spezialfunktionen für den Textbildschirm
(1)   33/    8000 :                                                             ; Z=0 -> liefert in X (Spalte) und in Y (Zeile) die Position des Textkursors.
(1)   34/    8000 :                                                             ; Z=1 -> setzt den Textkursor auf X (Spalte) und in Y (Zeile)
(1)   35/    8000 :                                                             ; Z=2 -> liefert in Z den ASCII-Kode des Zeichens an Position X (Spalte) und Y (Zeile).
(1)   36/    8000 : =82AH                MONITOR         equ     082Ah           ; ruft den Maschinenmonitor MON auf
(1)   37/    8000 : =82DH                PRISTRI         equ     082Dh           ; druckt eine Zeichenkette über CHAROUT aus, die nach dem CALL-Aufruf beginnt und mit einem %00-Kode endet.
(1)   38/    8000 : =830H                SHOWPLAYER      equ     0830h           ; zeichnet Sprite X,Y-Postion, V-Video(Farbe), W-Adr. Sprite (48 Byte), Z-Adr. BG-Buffer (48 Byte)
(1)   39/    8000 : =833H                HIDEPLAYER      equ     0833h           ; löscht Sprite
(1)   40/    8000 : =836H                RND             equ     0836h           ; liefert nach jedem Aufruf in %74/75 eine 16-Bit-Zufallszahl
(1)   41/    8000 :                     
(1)   42/    8000 :                     ; Grafik. Die Farbe wird immer in Z übergeben
(1)   43/    8000 : =17F7H               DRAW            equ     17F7h           ; DRAW verbindet die Punkte (V,W) und (X,Y) durch eine Gerade der Farbe Z
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 2 - 11/21/2024 11:26:38


(1)   44/    8000 : =17FAH               PTEST           equ     17FAh           ; PTEST liefert die Farbe des Punktes (X,Y) in Z
(1)   45/    8000 : =17FDH               PLOT            equ     17FDh           ; PLOT setzt den Punkt (X,Y) mit der Farbe aus Z
(1)   46/    8000 :                     
(1)   47/    8000 :                     ; Systemzellen
(1)   48/    8000 : =5BH                 cupos           equ     5Bh             ; 2 Byte Position (X = 0..39,Y = 0..23)
(1)   49/    8000 :                     ; %56/57        Sprungvektor für IRQ
(1)   50/    8000 :                     ; %58           OSD (Zeilenlänge)   
(1)   51/    8000 :                     ; %67           H-Byte Startadresse Zeichensatz
(1)   52/    8000 :                     ; %6C           Tastaturfu nktionen
(1)   53/    8000 :                     
(1)   54/    8000 :                     ; Speicher
(1)   55/    8000 :                     ; %4000-5FFF    Video-RAM-Bänke
(1)   56/    8000 :                     ; %6000-63FF    Steuerregister für Videorambankauswahl
(1)   57/    8000 :                     ; %E000-F4FF    Std.RAM, frei zur Nutzung
(1)   58/    8000 :                     ; %F500-F511    IRQ-Sprünge
(1)   59/    8000 :                     ; %F600-F6FF    Stack
(1)   60/    8000 :                     ; %F700-F74F    Zeilenspeicher bei Rückkehr aus Routine CHARIN
(1)   61/    8000 :                     ; (%F800-FBFF   zweiter ASCII-Textspeicher)
(1)   62/    8000 :                     ; (%FC00-FFBF   ASCII-Textspeicher)
(1)   63/    8000 :                     ; %FFC0-FFFF    I/O-Vektortabelle
(1)   64/    8000 :                     
(1)   65/    8000 :                     ;------------------------------------------------------------------------------
(1)   66/    8000 :                     ; Speicher 
(1)   67/    8000 :                     ;------------------------------------------------------------------------------
(1)   68/    8000 :                     
(1)   69/    8000 :                     ; Register %67          Zeichensatz (hi-Byte)
(1)   70/    8000 :                     ; 
(1)   71/    8000 :                     ; in Klammern: nach Möglichkeit keine direkten Zugriffe
(1)   72/    8000 :                     ; OS: vom ES4.0 in einigen Routinen genutzt
(1)   73/    8000 :                     ; OSD: vom ES4.0 ständig genutzt
(1)   74/    8000 :                     ; %0000-07FF interner ROM des U883
(1)   75/    8000 :                     ; %0800-1FFF Betriebssystem ES4.0 auf EPROM 2764
(1)   76/    8000 :                     ; %2000-3FFF frei
(1)   77/    8000 :                     ; %4000-5FFF Video-RAM-bänke
(1)   78/    8000 :                     ; %6000-63FF Steuerregister für Videorambankauswahl
(1)   79/    8000 :                     ; %6400-7BFF frei (für IO-Geräte, Ramdisk, ...)
(1)   80/    8000 :                     ; %7000-7FFF Tastaturabfrage
(1)   81/    8000 :                     ; %8000- RAM-Beginn bei 32 KByte Vollausbau
(1)   82/    8000 :                     ; %C000- RAM-Beginn bei 16 KByte
(1)   83/    8000 :                     ; %E000- RAM-Beginn bei 8 KByte
(1)   84/    8000 :                     ; bis F4FF RAM, frei zur Nutzung
(1)   85/    8000 :                     ; %F500-F511 IRQ-Sprünge
(1)   86/    8000 :                     ; %F512-F579 RAM für Druckroutine, siehe 8.
(1)   87/    8000 :                     ; (%F57B-F5FF Kassettenpuffer)
(1)   88/    8000 :                     ; %F600-F6FF Stack
(1)   89/    8000 :                     ; %F700-F74F Zeilenspeicher bei Rückkehr aus Routine CHARIN
(1)   90/    8000 :                     ; (%F750-F76F RAM für Gleitkommaroutinen)
(1)   91/    8000 :                     ; %F770-F77F noch frei
(1)   92/    8000 :                     ; (%F780-F78F Registerspeicher des MON)
(1)   93/    8000 :                     ; %F790-F79F noch frei
(1)   94/    8000 :                     ; %F7A0 Bitmaske für Textzeichen, siehe 11.
(1)   95/    8000 :                     ; %F7A1 Bitmaske für Kursor, siehe 11.
(1)   96/    8000 :                     ; (%F7A2-F7AB OSD)
(1)   97/    8000 :                     ; (%F7AC-F7DF evtl. später OSD)
(1)   98/    8000 :                     ; %F7E0-F7FF Funktionstastenprogramme
(1)   99/    8000 :                     ; (%F800-FBFF zweiter ASCII-Textspeicher)
(1)  100/    8000 :                     ; (%FC00-FFBF ASCII-Textspeicher)
(1)  101/    8000 :                     ; %FFC0-FFFF IO-Vektortabelle, siehe 16
(1)  102/    8000 :                     ; 
(1)  103/    8000 :                     ; %F512 Drucker-Routine
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 3 - 11/21/2024 11:26:38


(1)  104/    8000 :                     ; 
(1)  105/    8000 :                     ; Aufzeichnungsverfahren
(1)  106/    8000 :                     ; Fileaufbau: 5s Vorton, Blöcke mit Pause von 40 ms
(1)  107/    8000 :                     ; Blocksendung: Vorimpuls (eine Phase mit 0.5 ms), %85 Bytes
(1)  108/    8000 :                     ; Blockaufbau: (Adresse im Kassettenpuffer als erste Zahl)
(1)  109/    8000 :                     ; %F57B Blocknummer %00 bis %FF, evt. wieder von vorn
(1)  110/    8000 :                     ; %F57C Kopie von %F57B
(1)  111/    8000 :                     ; %F57D Prüfsumme über Formatbyte und Datenbytes (Byte-Summe mit dazuaddierten Carrys)
(1)  112/    8000 :                     ; %F57E Kopie von %F57D
(1)  113/    8000 :                     ; %F57F Formatbyte: %FA: weniger als 128 Datenbyte. Anzahl der gültigen Datenbyte auf %F5FF
(1)  114/    8000 :                     ;       %FC: 128 Datenbyte
(1)  115/    8000 :                     ;       %FE: End of File Block, ohne sinnvolle Datenbytes
(1)  116/    8000 :                     ; %F580-F5FF Datenbytes
(1)  117/    8000 :                     
(1)  118/    8000 :                     
(1)  119/    8000 :                     ; Control-Codes, Steuerkodes
(1)  120/    8000 :                     ; C_00:         EQU     00h             ; nicht belegt
(1)  121/    8000 : =1H                  C_LEFT:         EQU     01h             ; Kursor links
(1)  122/    8000 : =2H                  C_RIGHT:        EQU     02h             ; Kursor rechts
(1)  123/    8000 : =3H                  C_UP:           EQU     03h             ; Kursor hoch
(1)  124/    8000 : =4H                  C_DOWN:         EQU     04h             ; Kursor runter
(1)  125/    8000 : =5H                  C_HOME:         EQU     05h             ; HOM (home)
(1)  126/    8000 : =6H                  C_SOL:          EQU     06h             ; SOL (start of line)
(1)  127/    8000 : =7H                  C_DEL:          EQU     07h             ; DEL (delete)
(1)  128/    8000 : =8H                  C_BS:           EQU     08h             ; DBS (delete back space)
(1)  129/    8000 : =9H                  C_INS:          EQU     09h             ; INS (insert)
(1)  130/    8000 : =0AH                 C_LDEL:         EQU     0Ah             ; LDE (line delete)
(1)  131/    8000 : =0BH                 C_LINS:         EQU     0Bh             ; LIN (line insert)
(1)  132/    8000 : =0CH                 C_CLS:          EQU     0Ch             ; CLS (clear screen)
(1)  133/    8000 : =0DH                 C_ENTER:        EQU     0Dh             ; RET (return)
(1)  134/    8000 : =0EH                 C_ESC:          EQU     0Eh             ; ESC (return)
(1)  135/    8000 :                     ; C_0F:         EQU     0Fh             ; nicht belegt
(1)  136/    8000 :                     
(1)  137/    8000 :                     
(1)  138/    8000 :                     ;------------------------------------------------------------------------------
(1)  139/    8000 :                     
(1)  140/    8000 :                     ; BASIC-Variablen
(1)  141/    8000 :                     
(1)  142/    8000 : =20H                 var_A_hi        equ     20h
(1)  143/    8000 : =21H                 var_A_lo        equ     21h
(1)  144/    8000 : =22H                 var_B_hi        equ     22h
(1)  145/    8000 : =23H                 var_B_lo        equ     23h
(1)  146/    8000 : =24H                 var_C_hi        equ     24h
(1)  147/    8000 : =25H                 var_C_lo        equ     25h
(1)  148/    8000 : =26H                 var_D_hi        equ     26h
(1)  149/    8000 : =27H                 var_D_lo        equ     27h
(1)  150/    8000 : =28H                 var_E_hi        equ     28h
(1)  151/    8000 : =29H                 var_E_lo        equ     29h
(1)  152/    8000 : =2AH                 var_F_hi        equ     2Ah
(1)  153/    8000 : =2BH                 var_F_lo        equ     2Bh
(1)  154/    8000 : =2CH                 var_G_hi        equ     2Ch
(1)  155/    8000 : =2DH                 var_G_lo        equ     2Dh
(1)  156/    8000 : =2EH                 var_H_hi        equ     2Eh
(1)  157/    8000 : =2FH                 var_H_lo        equ     2Fh
(1)  158/    8000 : =30H                 var_I_hi        equ     30h
(1)  159/    8000 : =31H                 var_I_lo        equ     31h
(1)  160/    8000 : =32H                 var_J_hi        equ     32h
(1)  161/    8000 : =33H                 var_J_lo        equ     33h
(1)  162/    8000 : =34H                 var_K_hi        equ     34h
(1)  163/    8000 : =35H                 var_K_lo        equ     35h
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 4 - 11/21/2024 11:26:38


(1)  164/    8000 : =36H                 var_L_hi        equ     36h
(1)  165/    8000 : =37H                 var_L_lo        equ     37h
(1)  166/    8000 : =38H                 var_M_hi        equ     38h
(1)  167/    8000 : =39H                 var_M_lo        equ     39h
(1)  168/    8000 : =3AH                 var_N_hi        equ     3Ah
(1)  169/    8000 : =3BH                 var_N_lo        equ     3Bh
(1)  170/    8000 : =3CH                 var_O_hi        equ     3Ch
(1)  171/    8000 : =3DH                 var_O_lo        equ     3Dh
(1)  172/    8000 : =3EH                 var_P_hi        equ     3Eh
(1)  173/    8000 : =3FH                 var_P_lo        equ     3Fh
(1)  174/    8000 : =40H                 var_Q_hi        equ     40h
(1)  175/    8000 : =41H                 var_Q_lo        equ     41h
(1)  176/    8000 : =42H                 var_R_hi        equ     42h
(1)  177/    8000 : =43H                 var_R_lo        equ     43h
(1)  178/    8000 : =44H                 var_S_hi        equ     44h
(1)  179/    8000 : =45H                 var_S_lo        equ     45h
(1)  180/    8000 : =46H                 var_T_hi        equ     46h
(1)  181/    8000 : =47H                 var_T_lo        equ     47h
(1)  182/    8000 : =48H                 var_U_hi        equ     48h
(1)  183/    8000 : =49H                 var_U_lo        equ     49h
(1)  184/    8000 : =4AH                 var_V_hi        equ     4Ah
(1)  185/    8000 : =4BH                 var_V_lo        equ     4Bh
(1)  186/    8000 : =4CH                 var_W_hi        equ     4Ch
(1)  187/    8000 : =4DH                 var_W_lo        equ     4Dh
(1)  188/    8000 : =4EH                 var_X_hi        equ     4Eh
(1)  189/    8000 : =4FH                 var_X_lo        equ     4Fh
(1)  190/    8000 : =50H                 var_Y_hi        equ     50h
(1)  191/    8000 : =51H                 var_Y_lo        equ     51h
(1)  192/    8000 : =52H                 var_Z_hi        equ     52h
(1)  193/    8000 : =53H                 var_Z_lo        equ     53h
(1)  194/    8000 :                     
(1)  195/    8000 :                     ;------------------------------------------------------------------------------
(1)  196/    8000 :                     ; Z8-Register
(1)  197/    8000 :                     
(1)  198/    8000 : =0H                  P0              EQU     00H             ; Port 0
(1)  199/    8000 : =1H                  P1              EQU     01H             ; Port 1
(1)  200/    8000 : =2H                  P2              EQU     02H             ; Port 2
(1)  201/    8000 : =3H                  P3              EQU     03H             ; Port 3
(1)  202/    8000 : =0F0H                SIO             EQU     0F0H            ; serielles Ein-Ausgaberegister
(1)  203/    8000 : =0FCH                FLAGS           EQU     0FCH            ; Flagregister
(1)  204/    8000 : =0FEH                SPH             EQU     0FEH            ; Stackpointer, Highteil
(1)  205/    8000 : =0FFH                SPL             EQU     0FFH            ; Stackpointer, Lowteil
(1)  206/    8000 : =0F1H                TMR             EQU     0F1H            ; Zähler/Zeitgeberbetriebsart
(1)  207/    8000 : =0F4H                T0              EQU     0F4H            ; Zähler/Zeitgeberregister Kanal 0
(1)  208/    8000 : =0F2H                T1              EQU     0F2H            ; Zähler/Zeitgeberregister Kanal 1
(1)  209/    8000 : =0F5H                PRE0            EQU     0F5H            ; T0-Vorteilerregister
(1)  210/    8000 : =0F3H                PRE1            EQU     0F3H            ; T1-Vorteilerregister
(1)  211/    8000 : =0F8H                P01M            EQU     0F8H            ; Tor 0, Tor 1 Betriebsart
(1)  212/    8000 : =0F6H                P2M             EQU     0F6H            ; Tor 2 Betriebsart
(1)  213/    8000 : =0F7H                P3M             EQU     0F7H            ; Tor 3 Betriebsart
(1)  214/    8000 : =0FBH                IMR             EQU     0FBH            ; Interrupt-Maskierungsregister
(1)  215/    8000 : =0F9H                IPR             EQU     0F9H            ; Interrupt-Prioritätsregister
(1)  216/    8000 : =0FAH                IRQ             EQU     0FAH            ; Interrupt-Anmelderegister
(1)  217/    8000 : =0FDH                RP              EQU     0FDH            ; Registerpointer
(1)  218/    8000 :                     
(1)  219/    8000 :                     ;------------------------------------------------------------------------------
(1)  220/    8000 :                     ; AS-Funktionen
(1)  221/    8000 :                     hi      function x,(x>>8)&255
(1)  222/    8000 :                     lo      function x, x&255
(1)  223/    8000 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 5 - 11/21/2024 11:26:38


(1)  224/    8000 :                     
(1)  225/    8000 :                     
(1)  226/    8000 :                     
      18/    8000 : [16]                         endif
      19/    8000 :                             
      20/    8000 : =>UNDEFINED                  ifndef  MACROS_INC
      21/    8000 :                                     include ../FGL/macros.asm
(1)    1/    8000 :                     ;------------------------------------------------------------------------------
(1)    2/    8000 :                     ; ASM-Macros
(1)    3/    8000 :                     ;------------------------------------------------------------------------------
(1)    4/    8000 :                     
(1)    5/    8000 :                     MACROS_INC                                ; Flag fÃ¼r include-Anweisungen
(1)    6/    8000 :                     
(1)    7/    8000 :                     ;------------------------------------------------------------------------------
(1)    8/    8000 :                     ; Macro zum Laden von Doppelregistern in Z8 Assembler
(1)    9/    8000 :                     ; 
(1)   10/    8000 :                     ; ldrr <Register>, <Wert>
(1)   11/    8000 :                     ;
(1)   12/    8000 :                     ; Register [rr0,2,4,6,8,10,12,14 | var_A-Z]
(1)   13/    8000 :                     ; Wert	   #[0-65535]
(1)   14/    8000 :                     ;
(1)   15/    8000 :                     ; Bsp.:    ldrr	rr0, #5555h
(1)   16/    8000 :                     ;	   ldrr var_A, #65535
(1)   17/    8000 :                     ;						
(1)   18/    8000 :                     ;------------------------------------------------------------------------------
(1)   19/    8000 :                     
(1)   20/    8000 :                     
(1)   21/    8000 :                     ldrr    MACRO    RRX, VALUE, {NOEXPIF}, {NOEXPAND}
(1)   22/    8000 :                     
(1)   23/    8000 :                     numval	set	val(substr(upstring("VALUE"), 1, 0))
(1)   24/    8000 :                     
(1)   25/    8000 :                     	if substr(upstring("RRX"),0,2) == "RR"
(1)   26/    8000 :                     
(1)   27/    8000 :                     		;message "Zielregister = RRX:  \{substr( upstring("RRX"), 1, 0)}"
(1)   28/    8000 :                     		if upstring("rrx") == "RR0"
(1)   29/    8000 :                     			ld	r0, #hi(numval)
(1)   30/    8000 :                     			ld	r1, #lo(numval)
(1)   31/    8000 :                     
(1)   32/    8000 :                     		elseif upstring("rrx") == "RR2"
(1)   33/    8000 :                     			ld	r2, #hi(numval)
(1)   34/    8000 :                     			ld	r3, #lo(numval)
(1)   35/    8000 :                     
(1)   36/    8000 :                     		elseif upstring("rrx") == "RR4"
(1)   37/    8000 :                     			ld	r4, #hi(numval)
(1)   38/    8000 :                     			ld	r5, #lo(numval)
(1)   39/    8000 :                     
(1)   40/    8000 :                     		elseif upstring("rrx") == "RR6"
(1)   41/    8000 :                     			ld	r6, #hi(numval)
(1)   42/    8000 :                     			ld	r7, #lo(numval)
(1)   43/    8000 :                     
(1)   44/    8000 :                     		elseif upstring("rrx") == "RR8"
(1)   45/    8000 :                     			ld	r8, #hi(numval)
(1)   46/    8000 :                     			ld	r9, #lo(numval)
(1)   47/    8000 :                     
(1)   48/    8000 :                     		elseif upstring("rrx") == "RR10"
(1)   49/    8000 :                     			ld	r10, #hi(numval)
(1)   50/    8000 :                     			ld	r11, #lo(numval)
(1)   51/    8000 :                     
(1)   52/    8000 :                     		elseif upstring("rrx") == "RR12"
(1)   53/    8000 :                     			ld	r12, #hi(numval)
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/macros.asm) - Page 6 - 11/21/2024 11:26:38


(1)   54/    8000 :                     			ld	r13, #lo(numval)
(1)   55/    8000 :                     
(1)   56/    8000 :                     		elseif upstring("rrx") == "RR14"
(1)   57/    8000 :                     			ld	r14, #hi(numval)
(1)   58/    8000 :                     			ld	r15, #lo(numval)
(1)   59/    8000 :                     		endif
(1)   60/    8000 :                     
(1)   61/    8000 :                     	elseif substr(upstring("RRX"), 0, 4) == "VAR_"
(1)   62/    8000 :                     
(1)   63/    8000 :                     		;message "Zielregister = RRX: RRX_HI"
(1)   64/    8000 :                     		ld	RRX_HI,   #hi(numval)
(1)   65/    8000 :                     		ld	RRX_HI+1, #lo(numval)
(1)   66/    8000 :                     
(1)   67/    8000 :                     	endif
(1)   68/    8000 :                     
(1)   69/    8000 :                      	ENDM
(1)   70/    8000 :                     
      22/    8000 : [20]                         endif                   
      23/    8000 :                     
      24/    8000 :                     ;------------------------------------------------------------------------------
      25/    8000 :                     ; main
      26/    8000 :                     ;------------------------------------------------------------------------------
      27/    8000 :                     
      28/    8000 : 31 70               start:          srp     #70h
      29/    8002 : D6 A7 F2                            call    FGL_INIT                 ; FGL initialisieren
      30/    8005 :                     
      31/    8005 :                                     ; Banner vorbereiten
      32/    8005 :                     
      33/    8005 : D6 82 C4                            call    prepareBanner
      34/    8008 : (MACRO)                              ldrr    var_B, #banner_buffer
      35/    800E : (MACRO)                              ldrr    var_L, #banner_len - nChars
      36/    8014 :                     
      37/    8014 :                                     ; Bildschirm lÃ¶schen
      38/    8014 :                     
      39/    8014 : E6 53 00                    sta1:   ld      var_Z_lo, #00000000b    ; alle FarbbÃ¤nke (RGBHxxxx) an
      40/    8017 : E6 52 00                            ld      var_Z_hi, #000h         ; alle Pixel 0 = schwarz
      41/    801A : D6 A8 39                            call    FGL_CLS
      42/    801D :                     
      43/    801D :                                     ; Texte und Logos
      44/    801D :                     
      45/    801D : (MACRO)                              ldrr    var_T, #zg_KCC          ; Zeichensatz (KCcompact) fÃ¼r FGL_PRISTRI 
      46/    8023 :                                     
      47/    8023 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      48/    8029 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      49/    802F : E6 4D F0                            ld      var_W_lo, #0F0h         ; Farbe ws/sw
      50/    8032 : E6 4F 00                            ld      var_X_lo, #0            ; x-Byte-Pos
      51/    8035 : E6 51 00                            ld      var_Y_lo, #0            ; y-Pos
      52/    8038 : E6 52 01                            ld      var_Z_hi, #1            ; Zoom-Faktor
      53/    803B : D6 A7 48                            call    FGL_PRISTRI             ; normal
      54/    803E : 4B 43 63 6F 6D 70                   db      'KCcompact',0
             8044 : 61 63 74 00       
      55/    8048 :                     
      56/    8048 : (MACRO)                              ldrr    rr12, #KC_LOGO          ; KC-Logo
      57/    804C : D6 A7 10                            call    FGL_BMP_TO_VRAM
      58/    804F :                                     
      59/    804F : (MACRO)                              ldrr    rr12, #MH_LOGO          ; MÃ¼hlhausen-Logo
      60/    8053 : D6 A7 10                            call    FGL_BMP_TO_VRAM
      61/    8056 :                                     
      62/    8056 : (MACRO)                              ldrr    var_U, #5               ; warten Zeile
      63/    805C : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 7 - 11/21/2024 11:26:38


      64/    8062 : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
      65/    8065 : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
      66/    8068 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
      67/    806B : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
      68/    806E : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
      69/    8071 : 4B 43 63 6F 6D 70                   db      'KCcompact',0
             8077 : 61 63 74 00       
      70/    807B :                                     
      71/    807B : (MACRO)                              ldrr    var_V, #2000            ; 2s
      72/    8081 : D6 A8 60                            call    FGL_TIMER
      73/    8084 :                                     
      74/    8084 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      75/    808A : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      76/    8090 : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
      77/    8093 : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
      78/    8096 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
      79/    8099 : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
      80/    809C : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
      81/    809F : 20 20 20 3F 3F 3F                   db      '   ???   ',0
             80A5 : 20 20 20 00       
      82/    80A9 :                     
      83/    80A9 : (MACRO)                              ldrr    var_V, #2000            ; 2s
      84/    80AF : D6 A8 60                            call    FGL_TIMER
      85/    80B2 :                     
      86/    80B2 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      87/    80B8 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      88/    80BE : E6 4D F0                            ld      var_W_lo, #0F0h         ; Farbe ws/sw
      89/    80C1 : E6 4F 00                            ld      var_X_lo, #0            ; x-Byte-Pos
      90/    80C4 : E6 51 00                            ld      var_Y_lo, #0            ; y-Pos
      91/    80C7 : E6 52 01                            ld      var_Z_hi, #1            ; Zoom-Faktor
      92/    80CA : D6 A7 48                            call    FGL_PRISTRI             ; normal
      93/    80CD : 4A 54 6B 6F 6D 70                   db      'JTkompakt',0           
             80D3 : 61 6B 74 00       
      94/    80D7 :                     
      95/    80D7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
      96/    80DD : D6 A8 60                            call    FGL_TIMER               
      97/    80E0 :                                     
      98/    80E0 : (MACRO)                              ldrr    rr12, #TINY_LOGO        ; TINY-Logo
      99/    80E4 : D6 A7 10                            call    FGL_BMP_TO_VRAM
     100/    80E7 :                     
     101/    80E7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
     102/    80ED : D6 A8 60                            call    FGL_TIMER
     103/    80F0 :                     
     104/    80F0 : (MACRO)                              ldrr    rr12, #JU_TE_LOGO       ; JuTe-Logo
     105/    80F4 : D6 A7 10                            call    FGL_BMP_TO_VRAM         
     106/    80F7 :                     
     107/    80F7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
     108/    80FD : D6 A8 60                            call    FGL_TIMER
     109/    8100 :                                     
     110/    8100 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
     111/    8106 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
     112/    810C : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
     113/    810F : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
     114/    8112 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
     115/    8115 : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
     116/    8118 : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
     117/    811B : 4A 54 6B 6F 6D 70                   db      'JTkompakt',0
             8121 : 61 6B 74 00       
     118/    8125 :                     
     119/    8125 : (MACRO)                              ldrr    var_V, #500             ; 0,5s
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 8 - 11/21/2024 11:26:38


     120/    812B : D6 A8 60                            call    FGL_TIMER
     121/    812E :                                     
     122/    812E : E6 4F 01                            ld      var_X_lo, #40/2-18-1;-1
     123/    8131 : E6 4E 26                            ld      var_X_hi, #3*10+6+2;+2
     124/    8134 : E6 51 5A                            ld      var_Y_lo, #96-5+1-2      
     125/    8137 : E6 50 25                            ld      var_Y_hi, #4*8+4+1
     126/    813A : D6 81 77                            call    invertRect              ; rote, 4-fach-vergrÃ¶sserte Schrift invertieren 
     127/    813D :                                                                     ; (fÃ¼llen von unten)
     128/    813D :                                                                     
     129/    813D : (MACRO)                              ldrr    var_V, #1000            ; 1s
     130/    8143 : D6 A8 60                            call    FGL_TIMER
     131/    8146 :                                     
     132/    8146 : D6 83 0C                    ma4:    call    moveScreen              ; 9 Zeilen nach oben schieben
     133/    8149 :                     
     134/    8149 : (MACRO)                      ma3:    ldrr    var_V, #500             ; 0,5s
     135/    814F : D6 A8 60                            call    FGL_TIMER
     136/    8152 :                     
     137/    8152 : D6 83 43                            call    switchColors            ; Farben umschalten
     138/    8155 : D6 90 63                    ma2:    call    makeMaskMap             ; VRAM-Maske erstellen
     139/    8158 :                     
     140/    8158 :                     ;------------------------------------------------------------------------------
     141/    8158 :                     
     142/    8158 :                                     ; Start Animation
     143/    8158 :                     
     144/    8158 : (MACRO)                              ldrr    rr0, #Y_POS_RING_BUFFER
     145/    815C :                     
     146/    815C : D6 83 8B                    ma1:    call    drawLines               ; Linien in VRAM schreiben
     147/    815F : 1E                                  inc     r1                      ; next Y pos
     148/    8160 : 56 E1 3F                            and     r1, #cmask              ; 
     149/    8163 : 8B F7                               jr      ma1                     ; fÃ¼r immer ...
     150/    8165 :                     
     151/    8165 :                     
     152/    8165 :                     ;------------------------------------------------------------------------------
     153/    8165 :                     ; Auf ESC-Taste prÃ¼fen.
     154/    8165 :                     ;------------------------------------------------------------------------------
     155/    8165 : D6 08 1B            checkKey:       call    KEY
     156/    8168 : A6 6D 0E                            cp      6Dh, #0Eh               ; ESC ?
     157/    816B : 6B 01                               jr      z, chexit
     158/    816D : AF                                  ret
     159/    816E :                                     
     160/    816E : E6 15 0C            chexit:         ld      15h, #12                ; CLS
     161/    8171 : D6 08 18                            call    CHAROUT
     162/    8174 : 8D 08 12                            JP      KOMMAND                 ; Bye ...
     163/    8177 :                     
     164/    8177 :                     ;------------------------------------------------------------------------------
     165/    8177 :                     ; Rechteckigen Bereich (sw/rot) invertieren (fÃ¼llen von unten).
     166/    8177 :                     ;
     167/    8177 :                     ; in:           var_X_lo        = X-Byte-Pos    (0-39)
     168/    8177 :                     ;               var_X_hi        = X-LÃ¤nge
     169/    8177 :                     ;               var_Y_lo        = Y-Zeilen-Pos  (0-191)
     170/    8177 :                     ;               var_Y_hi        = Y-LÃ¤nge
     171/    8177 :                     ;
     172/    8177 :                     ; out:          FlÃ¤che invertiert (rot/sw)
     173/    8177 :                     ;------------------------------------------------------------------------------
     174/    8177 :                     
     175/    8177 : 70 51               invertRect:     push    var_Y_lo
     176/    8179 : 18 50                               ld      r1, var_Y_hi                    ; Y-ZÃ¤hler
     177/    817B :                     
     178/    817B : C8 4E                               fi1:    ld      r12, var_X_hi           ; X-ZÃ¤hler
     179/    817D :                                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 9 - 11/21/2024 11:26:38


     180/    817D :                                             ; r0,r2,r3,r4,r5,r6,r7
     181/    817D : D6 A9 13                                    call    XBY_to_vram             ; rr6 -> VRAM
     182/    8180 :                     
     183/    8180 : FC FF                                       fi2:    ld      r15, #0FFh
     184/    8182 :                                             
     185/    8182 :                                                     ; r5,r8,r9,r10,r11
     186/    8182 :                     
     187/    8182 : EC 60                                               ld      r14, #60h
     188/    8184 : FC 7F                                               ld      r15, #01111111b         ;Farb-BÃ¤nke = RGBHxxxx
     189/    8186 :                     
     190/    8186 : 92 FE                                               lde     @rr14, r15              ;R-Bank einschalten
     191/    8188 : 82 56                                               lde     r5, @rr6
     192/    818A : 60 E5                                               com     r5
     193/    818C : 92 56                                               lde     @rr6, r5
     194/    818E :                     
     195/    818E : 7E                                                  inc     r7
     196/    818F : CA EF                                       djnz    r12, fi2
     197/    8191 : 00 51                                       dec     var_Y_lo
     198/    8193 :                     
     199/    8193 : (MACRO)                                      ldrr    var_V, #20                      ; 20 ms warten
     200/    8199 : D6 A8 60                                    call    FGL_TIMER
     201/    819C :                     
     202/    819C : 1A DD                               djnz    r1, fi1
     203/    819E :                     
     204/    819E : 50 51                               pop     var_Y_lo
     205/    81A0 : AF                                  ret
     206/    81A1 :                     
     207/    81A1 :                     ;------------------------------------------------------------------------------
     208/    81A1 :                     ; Schiebt Banner um 1 Zeichen nach links auf dem Bildschirm.
     209/    81A1 :                     ;
     210/    81A1 :                     ; in:           var_L   -> Banner-LÃ¤nge
     211/    81A1 :                     ;               var_B   -> Zeiger auf Banner-Puffer
     212/    81A1 :                     ;
     213/    81A1 :                     ;------------------------------------------------------------------------------
     214/    81A1 :                     
     215/    81A1 : 80 36               moveOneChar:    decw    var_L_hi
     216/    81A3 : 80 36               		decw    var_L_hi
     217/    81A5 : EB 0C                               jr      nz, oc1
     218/    81A7 :                     
     219/    81A7 : (MACRO)                              ldrr    var_B, #banner_buffer
     220/    81AD : (MACRO)                              ldrr    var_L, #banner_len-nChars
     221/    81B3 :                             oc1:
     222/    81B3 : 88 22                               ld      r8, var_B_hi
     223/    81B5 : 98 23                               ld      r9, var_B_lo
     224/    81B7 : D6 81 BF                            call    bannerToVRAM
     225/    81BA :                     
     226/    81BA : A0 22                               incw    var_B_hi
     227/    81BC : A0 22               		incw    var_B_hi
     228/    81BE :                     		
     229/    81BE : AF                                  ret
     230/    81BF :                     
     231/    81BF :                     ;------------------------------------------------------------------------------
     232/    81BF :                     ; Stellt eine komplette Banner-Zeile auf dem Bildschirm dar.
     233/    81BF :                     ;
     234/    81BF :                     ; in:           rr8     -> Zeiger auf Banner-Puffer-Position
     235/    81BF :                     ;
     236/    81BF :                     ; out:          Banner auf Bildschirm
     237/    81BF :                     ;------------------------------------------------------------------------------
     238/    81BF :                     
     239/    81BF :                     bannerToVRAM:
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 10 - 11/21/2024 11:26:38


     240/    81BF : EC 60                               ld      r14, #60h
     241/    81C1 : FC 20                               ld      r15, #00100000b
     242/    81C3 : 92 FE                               lde     @rr14, r15
     243/    81C5 :                     
     244/    81C5 : (MACRO)                              ldrr    rr6, #5EA8h                     ; VRAM-Pos
     245/    81C9 : 1C 08                               ld      r1, #8                          ; 8 ASCII-Zeilen
     246/    81CB :                     
     247/    81CB :                                     ctv2:
     248/    81CB : 0C 28                                       ld      r0, #nChars             ; Banner = 40 ASCII-Zeichen
     249/    81CD :                     
     250/    81CD : 82 38                                       ctv1:   lde     r3, @rr8        ; banner_buffer
     251/    81CF : 92 36                                               lde     @rr6, r3        ; VRAM
     252/    81D1 : A0 E8                                               incw    rr8
     253/    81D3 : 7E                                                  inc     r7
     254/    81D4 : 0A F7                                       djnz    r0, ctv1
     255/    81D6 :                     
     256/    81D6 : 26 E7 28                                    sub     r7, #lo(nChars)
     257/    81D9 : 36 E6 00                                    sbc     r6, #hi(nChars)
     258/    81DC :                     
     259/    81DC : 06 E9 B4                                    add     r9, #lo(banner_len-nChars)
     260/    81DF : 16 E8 00                                    adc     r8, #hi(banner_len-nChars)
     261/    81E2 :                     
     262/    81E2 : D6 A9 24                                    call    vram_inc_y_es40
     263/    81E5 :                     
     264/    81E5 : 1A E4                               djnz    r1, ctv2        ; 8 Zeilen
     265/    81E7 :                     
     266/    81E7 : AF                                  ret
     267/    81E8 :                     
     268/    81E8 :                     ;------------------------------------------------------------------------------
     269/    81E8 :                     ; Erzeugt aus einem String mit dem Bannertext eine Datenstruktur, aus der sehr
     270/    81E8 :                     ; schnell, zeilenweise der gesamte Text in den VRAM kopiert werden kann.
     271/    81E8 :                     ;
     272/    81E8 :                     ; in:           banner_start    -> Zeiger auf ASCII_Banner-Text
     273/    81E8 :                     ;               banner_len      -> Banner-LÃ¤nge (ASCII)
     274/    81E8 :                     ;
     275/    81E8 :                     ; out:          banner_buffer   -> Zeiger auf Banner-Puffer zur Ausgabe in VRAM
     276/    81E8 :                     ;
     277/    81E8 :                     ;------------------------------------------------------------------------------
     278/    81E8 :                     
     279/    81E8 : =28H                 nChars          equ     40
     280/    81E8 :                     
     281/    81E8 : =81E8H               banner_start            equ     $
     282/    81E8 :                     
     283/    81E8 :                                             REPT    nChars
     284/    81E8 :                                             db      ' '
     285/    81E8 :                                             ENDM
     284/    81E8 : 20                                          db      ' '
     284/    81E9 : 20                                          db      ' '
     284/    81EA : 20                                          db      ' '
     284/    81EB : 20                                          db      ' '
     284/    81EC : 20                                          db      ' '
     284/    81ED : 20                                          db      ' '
     284/    81EE : 20                                          db      ' '
     284/    81EF : 20                                          db      ' '
     284/    81F0 : 20                                          db      ' '
     284/    81F1 : 20                                          db      ' '
     284/    81F2 : 20                                          db      ' '
     284/    81F3 : 20                                          db      ' '
     284/    81F4 : 20                                          db      ' '
     284/    81F5 : 20                                          db      ' '
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 11 - 11/21/2024 11:26:38


     284/    81F6 : 20                                          db      ' '
     284/    81F7 : 20                                          db      ' '
     284/    81F8 : 20                                          db      ' '
     284/    81F9 : 20                                          db      ' '
     284/    81FA : 20                                          db      ' '
     284/    81FB : 20                                          db      ' '
     284/    81FC : 20                                          db      ' '
     284/    81FD : 20                                          db      ' '
     284/    81FE : 20                                          db      ' '
     284/    81FF : 20                                          db      ' '
     284/    8200 : 20                                          db      ' '
     284/    8201 : 20                                          db      ' '
     284/    8202 : 20                                          db      ' '
     284/    8203 : 20                                          db      ' '
     284/    8204 : 20                                          db      ' '
     284/    8205 : 20                                          db      ' '
     284/    8206 : 20                                          db      ' '
     284/    8207 : 20                                          db      ' '
     284/    8208 : 20                                          db      ' '
     284/    8209 : 20                                          db      ' '
     284/    820A : 20                                          db      ' '
     284/    820B : 20                                          db      ' '
     284/    820C : 20                                          db      ' '
     284/    820D : 20                                          db      ' '
     284/    820E : 20                                          db      ' '
     284/    820F : 20                                          db      ' '
     286/    8210 :                     
     287/    8210 : 2A 2A 2A 2A 2A 2A                           db      '******    JUGEND + TECHNIK Computer 6K System ES 4.0,    '
             8216 : 20 20 20 20 4A 55 
             821C : 47 45 4E 44 20 2B 
             8222 : 20 54 45 43 48 4E 
             8228 : 49 4B 20 43 6F 6D 
             822E : 70 75 74 65 72 20 
             8234 : 36 4B 20 53 79 73 
             823A : 74 65 6D 20 45 53 
             8240 : 20 34 2E 30 2C 20 
             8246 : 20 20 20          
     288/    8249 : 44 72 2E 20 48 65                           db      'Dr. Helmut Hoyer, Harun Scheutzow,    '
             824F : 6C 6D 75 74 20 48 
             8255 : 6F 79 65 72 2C 20 
             825B : 48 61 72 75 6E 20 
             8261 : 53 63 68 65 75 74 
             8267 : 7A 6F 77 2C 20 20 
             826D : 20 20             
     289/    826F : 56 65 72 6C 61 67                           db      'Verlag Junge Welt, PF 43 Berlin 1026   ******'
             8275 : 20 4A 75 6E 67 65 
             827B : 20 57 65 6C 74 2C 
             8281 : 20 50 46 20 34 33 
             8287 : 20 42 65 72 6C 69 
             828D : 6E 20 31 30 32 36 
             8293 : 20 20 20 2A 2A 2A 
             8299 : 2A 2A 2A          
     290/    829C :                                             
     291/    829C :                                             ;db     '******    VEB   Mikroelektronik   M',01Ch,'hlhausen    ******'
     292/    829C :                     
     293/    829C :                                             REPT    nChars
     294/    829C :                                             db      ' '
     295/    829C :                                             ENDM
     294/    829C : 20                                          db      ' '
     294/    829D : 20                                          db      ' '
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 12 - 11/21/2024 11:26:38


     294/    829E : 20                                          db      ' '
     294/    829F : 20                                          db      ' '
     294/    82A0 : 20                                          db      ' '
     294/    82A1 : 20                                          db      ' '
     294/    82A2 : 20                                          db      ' '
     294/    82A3 : 20                                          db      ' '
     294/    82A4 : 20                                          db      ' '
     294/    82A5 : 20                                          db      ' '
     294/    82A6 : 20                                          db      ' '
     294/    82A7 : 20                                          db      ' '
     294/    82A8 : 20                                          db      ' '
     294/    82A9 : 20                                          db      ' '
     294/    82AA : 20                                          db      ' '
     294/    82AB : 20                                          db      ' '
     294/    82AC : 20                                          db      ' '
     294/    82AD : 20                                          db      ' '
     294/    82AE : 20                                          db      ' '
     294/    82AF : 20                                          db      ' '
     294/    82B0 : 20                                          db      ' '
     294/    82B1 : 20                                          db      ' '
     294/    82B2 : 20                                          db      ' '
     294/    82B3 : 20                                          db      ' '
     294/    82B4 : 20                                          db      ' '
     294/    82B5 : 20                                          db      ' '
     294/    82B6 : 20                                          db      ' '
     294/    82B7 : 20                                          db      ' '
     294/    82B8 : 20                                          db      ' '
     294/    82B9 : 20                                          db      ' '
     294/    82BA : 20                                          db      ' '
     294/    82BB : 20                                          db      ' '
     294/    82BC : 20                                          db      ' '
     294/    82BD : 20                                          db      ' '
     294/    82BE : 20                                          db      ' '
     294/    82BF : 20                                          db      ' '
     294/    82C0 : 20                                          db      ' '
     294/    82C1 : 20                                          db      ' '
     294/    82C2 : 20                                          db      ' '
     294/    82C3 : 20                                          db      ' '
     296/    82C4 :                     
     297/    82C4 : =82C4H               banner_end              equ     $
     298/    82C4 :                     
     299/    82C4 : =0DCH                banner_len              equ     (banner_end - banner_start)
     300/    82C4 :                     
     301/    82C4 :                     ;------------------------------------------------------------------------------
     302/    82C4 :                     
     303/    82C4 : (MACRO)              prepareBanner:  ldrr    rr6,  #banner_start
     304/    82C8 : (MACRO)                              ldrr    rr10, #banner_buffer
     305/    82CC : CC DC                               ld      r12,  #banner_len
     306/    82CE :                     
     307/    82CE : 88 EA                               ctb2:   ld      r8, r10
     308/    82D0 : 98 EB                                       ld      r9, r11
     309/    82D2 :                     
     310/    82D2 : 82 16                                       lde     r1, @rr6                ; Zeichen holen
     311/    82D4 : B0 E0                                       clr     r0
     312/    82D6 :                     
     313/    82D6 : 10 E1                                       rlc     r1                      ; rr0 x 8 ZG-Zeilen
     314/    82D8 : 10 E0                                       rlc     r0
     315/    82DA : 10 E1                                       rlc     r1
     316/    82DC : 10 E0                                       rlc     r0
     317/    82DE : 10 E1                                       rlc     r1
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 13 - 11/21/2024 11:26:38


     318/    82E0 : 10 E0                                       rlc     r0
     319/    82E2 :                     
     320/    82E2 : 56 E1 F8                                    and     r1, #11111000b
     321/    82E5 :                     
     322/    82E5 : (MACRO)                                      ldrr    rr2, #zg_Z9001          ; rr2 -> ZG Start
     323/    82E9 : 02 31                                       add     r3, r1
     324/    82EB : 12 20                                       adc     r2, r0                  ; rr2 -> ZG-Byte (ASCII) 1. Zeile
     325/    82ED :                     
     326/    82ED : 4C 08                                       ld      r4, #8
     327/    82EF :                     
     328/    82EF :                                             ctb1:
     329/    82EF : 82 52                                               lde     r5, @rr2        ; ZG-Byte
     330/    82F1 : A6 E4 05                                            cp      r4, #5          ; kursiv ?
     331/    82F4 : 7B 03                                               jr      c, ctb3
     332/    82F6 : CF                                                  rcf                     ; Zeichen kursiv machen
     333/    82F7 : C0 E5                                               rrc     r5
     334/    82F9 :                                             ctb3:
     335/    82F9 : 92 58                                               lde     @rr8, r5        ;
     336/    82FB : 06 E9 DC                                            add     r9, #lo(banner_len)
     337/    82FE : 16 E8 00                                            adc     r8, #hi(banner_len)
     338/    8301 : A0 E2                                               incw    rr2             ; nÃ¤chste ZG-Zeile
     339/    8303 : 4A EA                                       djnz    r4, ctb1
     340/    8305 :                     
     341/    8305 : A0 E6                                       incw    rr6
     342/    8307 : A0 EA                                       incw    rr10
     343/    8309 :                     
     344/    8309 : CA C3                               djnz    r12, ctb2
     345/    830B :                     
     346/    830B : AF                                  ret
     347/    830C :                                     
     348/    830C :                     ;------------------------------------------------------------------------------
     349/    830C :                     ; Verschieben des Bildschirms nach oben um 9 Zeilen.
     350/    830C :                     ;
     351/    830C :                     ;------------------------------------------------------------------------------
     352/    830C :                     
     353/    830C : (MACRO)              moveScreen:     ldrr    rr0, #VRAM + 180h
     354/    8310 : (MACRO)                              ldrr    rr2, #VRAM
     355/    8314 : (MACRO)                              ldrr    rr4, #VRAM_LEN - 180h
     356/    8318 :                     
     357/    8318 : EC 60                               ms1:    ld      r14, #60h
     358/    831A : FC 7F                                       ld      r15, #01111111b
     359/    831C :                     
     360/    831C : 92 FE                                       lde     @rr14, r15
     361/    831E : 82 60                                       lde     r6, @rr0
     362/    8320 : 92 62                                       lde     @rr2, r6
     363/    8322 :                     
     364/    8322 : E0 EF                                       rr      r15
     365/    8324 : 92 FE                                       lde     @rr14, r15
     366/    8326 : 82 60                                       lde     r6, @rr0
     367/    8328 : 92 62                                       lde     @rr2, r6
     368/    832A :                     
     369/    832A : E0 EF                                       rr      r15
     370/    832C : 92 FE                                       lde     @rr14, r15
     371/    832E : 82 60                                       lde     r6, @rr0
     372/    8330 : 92 62                                       lde     @rr2, r6
     373/    8332 :                     
     374/    8332 : E0 EF                                       rr      r15
     375/    8334 : 92 FE                                       lde     @rr14, r15
     376/    8336 : 82 60                                       lde     r6, @rr0
     377/    8338 : 92 62                                       lde     @rr2, r6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 14 - 11/21/2024 11:26:38


     378/    833A :                     
     379/    833A : A0 E0                                       incw    rr0
     380/    833C : A0 E2                                       incw    rr2
     381/    833E : 80 E4                                       decw    rr4
     382/    8340 : EB D6                               jr      nz, ms1
     383/    8342 :                     
     384/    8342 : AF                                  ret
     385/    8343 :                     
     386/    8343 :                     ;------------------------------------------------------------------------------
     387/    8343 :                     ; Umschalten der Farben vor der Animation.
     388/    8343 :                     ;
     389/    8343 :                     ;               Hintergrund     -> blau
     390/    8343 :                     ;               grÃ¼nH           -> ws
     391/    8343 :                     ;               rot             -> grÃ¼nH
     392/    8343 :                     ;------------------------------------------------------------------------------
     393/    8343 :                     
     394/    8343 : (MACRO)              switchColors:   ldrr    rr6, #VRAM
     395/    8347 : EC 60                               ld      r14, #60h
     396/    8349 :                     
     397/    8349 : FC B0                               sws1:   ld      r15, #10110000b         ; Farbbank grÃ¼n
     398/    834B : 92 FE                                       lde     @rr14, r15
     399/    834D :                     
     400/    834D : 82 06                                       lde     r0, @rr6
     401/    834F : A6 E0 00                                    cp      r0, #0                  ; grÃ¼n ?
     402/    8352 : 6B 08                                       jr      z, sws2                 ; nein
     403/    8354 :                     
     404/    8354 :                                             ; grÃ¼n/sw -> ws/blau
     405/    8354 :                     
     406/    8354 : FC 00                                       ld      r15, #00000000b         ; Farbbank ws
     407/    8356 : 92 FE                                       lde     @rr14, r15
     408/    8358 : 92 06                                       lde     @rr6, r0                ; grÃ¼n => ws
     409/    835A :                     
     410/    835A : 8B 1F                                       jr      sws3
     411/    835C :                     
     412/    835C : FC 70                               sws2:   ld      r15, #01110000b         ; Farbbank rot
     413/    835E : 92 FE                                       lde     @rr14, r15
     414/    8360 :                     
     415/    8360 : 82 06                                       lde     r0, @rr6
     416/    8362 : A6 E0 00                                    cp      r0, #0                  ; rot ?
     417/    8365 : 6B 14                                       jr      z, sws3                 ; nein
     418/    8367 :                     
     419/    8367 :                                             ; rot/sw -> grÃ¼nH/blau
     420/    8367 :                     
     421/    8367 : B0 E1                                       clr     r1
     422/    8369 : 92 16                                       lde     @rr6, r1                ; rot => 0
     423/    836B :                     
     424/    836B : FC A0                                       ld      r15, #10100000b         ; Farbbank grÃ¼nH
     425/    836D : 92 FE                                       lde     @rr14, r15
     426/    836F : 92 06                                       lde     @rr6, r0                ; rot => grÃ¼nH
     427/    8371 :                     
     428/    8371 : FC D0                                       ld      r15, #11010000b         ; Farbbank blau
     429/    8373 : 92 FE                                       lde     @rr14, r15
     430/    8375 : 60 E0                                       com     r0
     431/    8377 : 92 06                                       lde     @rr6, r0                ; sw => blau
     432/    8379 :                     
     433/    8379 : 8B 08                                       jr      sws4
     434/    837B :                     
     435/    837B :                                             ; sw -> blau
     436/    837B :                     
     437/    837B : FC D0                               sws3:   ld      r15, #11010000b         ; Farbbank blau
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 15 - 11/21/2024 11:26:38


     438/    837D : 92 FE                                       lde     @rr14, r15
     439/    837F : FC FF                                       ld      r15, #0FFh              ; blau => 1
     440/    8381 : 92 F6                                       lde     @rr6, r15
     441/    8383 :                     
     442/    8383 : A0 E6                               sws4:   incw    rr6
     443/    8385 : A6 E6 60                                    cp      r6, #60h
     444/    8388 : EB BF                               jr      nz, sws1
     445/    838A :                     
     446/    838A : AF                                  ret
     447/    838B :                     
     448/    838B :                     ;------------------------------------------------------------------------------
     449/    838B :                     ; Stellt Linien auf dem Bildschirm dar.
     450/    838B :                     ;
     451/    838B :                     ; in:           rr0              = Zeiger auf Y-Koordinaten (Ring-Puffer)
     452/    838B :                     ;
     453/    838B :                     ;               LINES            = Anzahl animierter Linien
     454/    838B :                     ;               COLORS_PER_LINE  = Anzahl Zeilen pro Linie
     455/    838B :                     ;
     456/    838B :                     ;               mcLines          = Zeiger auf Farbdefinition der Linien
     457/    838B :                     ;                                  (mc = mehrfarbig)
     458/    838B :                     ;
     459/    838B :                     ;------------------------------------------------------------------------------
     460/    838B :                     
     461/    838B : =0AH                 LINES           EQU     10                      ; Anzahl animierter Linien
     462/    838B :                     
     463/    838B : 70 E0               drawLines:      push    r0
     464/    838D : 70 E1                               push    r1
     465/    838F :                     
     466/    838F : 1E                                  inc     r1
     467/    8390 : 56 E1 3F                            and     r1, #cmask
     468/    8393 : 82 80                               lde     r8, @rr0
     469/    8395 : 89 50                               ld      var_Y_hi, r8            ; Nachfolger holen
     470/    8397 :                     
     471/    8397 : 00 E1                               dec     r1
     472/    8399 : 56 E1 3F                            and     r1, #cmask
     473/    839C : 82 80                               lde     r8, @rr0
     474/    839E : 89 51                               ld      var_Y_lo, r8
     475/    83A0 :                     
     476/    83A0 : A6 E8 60                            cp      r8, #192/2
     477/    83A3 : 7B 05                               jr      c, dls2
     478/    83A5 : D6 84 0C                            call    clrlineW
     479/    83A8 : 8B 03                               jr      dls3
     480/    83AA : D6 83 FC                    dls2:   call    clrLineG
     481/    83AD :                             dls3:
     482/    83AD : 1E                                  inc     r1
     483/    83AE : 56 E1 3F                            and     r1, #cmask
     484/    83B1 :                     
     485/    83B1 : CC 92                               ld      r12, #hi(mcLines)       ; Zeiger auf mehrfarbige Linien
     486/    83B3 : DC 00                               ld      r13, #lo(mcLines)
     487/    83B5 :                     
     488/    83B5 : E6 21 0A                            ld      var_A_lo, #LINES
     489/    83B8 :                     
     490/    83B8 : 82 80                       dls1:   lde     r8, @rr0
     491/    83BA : 89 51                               ld      var_Y_lo, r8
     492/    83BC : 1E                                  inc     r1
     493/    83BD : 56 E1 3F                            and     r1, #cmask
     494/    83C0 :                     
     495/    83C0 : 82 80                               lde     r8, @rr0
     496/    83C2 : 89 50                               ld      var_Y_hi, r8            ; Nachfolger holen
     497/    83C4 : 00 E1                               dec     r1
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 16 - 11/21/2024 11:26:38


     498/    83C6 : 56 E1 3F                            and     r1, #cmask
     499/    83C9 :                     
     500/    83C9 : A6 21 01                            cp      var_A_lo, #1            ; letzte Linie ? -> alle Zeilen schreiben
     501/    83CC : EB 03                               jr      nz, dls4
     502/    83CE : E6 50 80                            ld      var_Y_hi, #128          ; 128 = Code fÃ¼r "alle Zeilen"
     503/    83D1 :                             dls4:
     504/    83D1 : 70 EC                               push    r12
     505/    83D3 : 70 ED                               push    r13
     506/    83D5 :                     
     507/    83D5 : A6 E8 60                            cp      r8, #192/2
     508/    83D8 : 7B 05                               jr      c, dls22
     509/    83DA : D6 8A 98                            call    drawLineW
     510/    83DD : 8B 03                               jr      dls33
     511/    83DF : D6 84 2D                    dls22:  call    drawLineG
     512/    83E2 :                             dls33:
     513/    83E2 : 50 ED                               pop     r13
     514/    83E4 : 50 EC                               pop     r12
     515/    83E6 :                     
     516/    83E6 : 06 ED 10                            add     r13, #4*COLORS_PER_LINE ; nÃ¤chste Farbe, 4 Bytes * Zeilen
     517/    83E9 :                     
     518/    83E9 : 1E                                  inc     r1
     519/    83EA : 56 E1 3F                            and     r1, #cmask
     520/    83ED :                     
     521/    83ED : 00 21                               dec     var_A_lo
     522/    83EF : EB C7                               jr      nz, dls1
     523/    83F1 :                     
     524/    83F1 : D6 81 A1                            call    moveOneChar             ; Banner schieben
     525/    83F4 : D6 81 65                            call    checkKey                ; ESC ?
     526/    83F7 :                                     
     527/    83F7 : 50 E1                               pop     r1
     528/    83F9 : 50 E0                               pop     r0
     529/    83FB :                     
     530/    83FB : AF                                  ret
     531/    83FC :                     
     532/    83FC :                     ;------------------------------------------------------------------------------
     533/    83FC :                     ; clearLineR/W  LÃ¶scht eine Linie.
     534/    83FC :                     ;
     535/    83FC :                     ;               G = grÃ¼ne  Objekte werden nicht Ã¼berschrieben
     536/    83FC :                     ;               W = weisse Objekte werden nicht Ã¼berschrieben
     537/    83FC :                     ;
     538/    83FC :                     ; in:           var_Y_lo        = Y
     539/    83FC :                     ;               rr12            = Zeiger auf Farbdefinition der Linien
     540/    83FC :                     ;                                 Z1(R,G,B,H) ... ZN(R,G,B,H)
     541/    83FC :                     ;
     542/    83FC :                     ; out:          Linie auf Bildschirm gelÃ¶scht
     543/    83FC :                     ;------------------------------------------------------------------------------
     544/    83FC :                     
     545/    83FC : CC 92               clrLineG:       ld      r12, #hi(bg)
     546/    83FE : DC A0                               ld      r13, #lo(bg)
     547/    8400 :                     
     548/    8400 : 70 EC                               push    r12
     549/    8402 : 70 ED                               push    r13
     550/    8404 : D6 84 2D                            call    drawLineG
     551/    8407 : 50 ED                               pop     r13
     552/    8409 : 50 EC                               pop     r12
     553/    840B :                                     
     554/    840B : AF                                  ret
     555/    840C :                     
     556/    840C : CC 92               clrLineW:       ld      r12, #hi(bg)
     557/    840E : DC A0                               ld      r13, #lo(bg)
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 17 - 11/21/2024 11:26:38


     558/    8410 :                     
     559/    8410 : 70 EC                               push    r12
     560/    8412 : 70 ED                               push    r13
     561/    8414 : D6 8A 98                            call    drawLineW
     562/    8417 : 50 ED                               pop     r13
     563/    8419 : 50 EC                               pop     r12
     564/    841B :                                     
     565/    841B : AF                                  ret
     566/    841C :                     
     567/    841C :                     ;------------------------------------------------------------------------------
     568/    841C :                     ; Wartet N-mal 1,6 ms (eine Zeile).
     569/    841C :                     ;
     570/    841C :                     ; in:           var_T_hi = N
     571/    841C :                     ;------------------------------------------------------------------------------
     572/    841C :                     
     573/    841C : 06 46 01            tLine:          add     var_T_hi, #1            ; etwas verlangsamen an Wendepunkten    
     574/    841F : E6 47 E2            tl2:            ld      var_T_lo, #0e2h         ; 6788 Takte = 1,6 ms
     575/    8422 : 00 47               tl1:            dec     var_T_lo
     576/    8424 : FF                                  nop
     577/    8425 : FF                                  nop
     578/    8426 : EB FA                               jr      nz, tl1
     579/    8428 : 00 46                               dec     var_T_hi
     580/    842A : EB F3                               jr      nz, tl2
     581/    842C : AF                                  ret
     582/    842D :                     
     583/    842D :                     ;------------------------------------------------------------------------------
     584/    842D :                     ; drawLineR/W   Schreibt eine Linie.
     585/    842D :                     ;
     586/    842D :                     ;               G = grÃ¼ne  Objekte werden nicht Ã¼berschrieben
     587/    842D :                     ;               W = weisse Objekte werden nicht Ã¼berschrieben
     588/    842D :                     ;
     589/    842D :                     ; in:           var_Y_lo        = Y-Pos
     590/    842D :                     ;               rr12            = Zeiger auf Farbdefinition der Linien
     591/    842D :                     ;                                 Z1(R,G,B,H) ... ZN(R,G,B,H)
     592/    842D :                     ;
     593/    842D :                     ; out:          Linie auf Bildschirm
     594/    842D :                     ;
     595/    842D :                     ; intern:
     596/    842D :                     ;       r0      -
     597/    842D :                     ;       r1      Farbe
     598/    842D :                     ;       r2      -
     599/    842D :                     ;       r3      -
     600/    842D :                     ;       r4      Mask hi
     601/    842D :                     ;       r5      Mask lo
     602/    842D :                     ;       r6      VRAM hi
     603/    842D :                     ;       r7      VRAM lo
     604/    842D :                     ;       r8      -
     605/    842D :                     ;       r9      Farb-Bank-ZÃ¤hler
     606/    842D :                     ;       r10     Zeilen-ZÃ¤hler
     607/    842D :                     ;       r11     Byte-ZÃ¤hler
     608/    842D :                     ;       r12     Farbe HI
     609/    842D :                     ;       r13     Farbe LO
     610/    842D :                     ;       r14     Farb-Register hi
     611/    842D :                     ;       r15     Farb-Register lo
     612/    842D :                     ;
     613/    842D :                     ;------------------------------------------------------------------------------
     614/    842D :                     
     615/    842D : =4H                  COLORS_PER_LINE EQU     4                               ; Anzahl Farben pro Linie
     616/    842D :                     
     617/    842D : 8F                  drawLineG:      DI
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 18 - 11/21/2024 11:26:38


     618/    842E : 70 E0                               push    r0
     619/    8430 : 70 E1                               push    r1
     620/    8432 : E4 FE 6A                            ld      saveH, SPH
     621/    8435 : E4 FF 6B                            ld      saveL, SPL
     622/    8438 :                                     
     623/    8438 : AC 04                               ld      r10, #COLORS_PER_LINE           ; Zeilen-ZÃ¤hler
     624/    843A : 4C 60                               ld      r4, #60h
     625/    843C : E6 4F 27                            ld      var_X_lo, #39   
     626/    843F :                     
     627/    843F : A6 50 80                            cp      var_Y_hi, #128                  ; alle Zeilen schreiben ?
     628/    8442 : 6B 28                               jr      z, dln1
     629/    8444 :                     
     630/    8444 : 24 51 50                            sub     var_Y_hi, var_Y_lo              ; Anzahl Zeilen sichtbar berechnen
     631/    8447 : 6D 8A 90                            jp      z, dlrret
     632/    844A : 5B 09                               jr      mi, neg                         ; neg/pos ?
     633/    844C :                             pos:
     634/    844C : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     635/    844F : FB 1B                               jr      nc, dln1
     636/    8451 :                     
     637/    8451 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     638/    8453 : 8B 12                               jr      dln2
     639/    8455 :                             neg:
     640/    8455 : 60 50                               com     var_Y_hi                        ; Zweierkomplement
     641/    8457 : 06 50 01                            add     var_Y_hi, #1
     642/    845A :                     
     643/    845A : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     644/    845D : FB 0D                               jr      nc, dln1
     645/    845F :                     
     646/    845F : 06 51 04                            add     var_Y_lo, #COLORS_PER_LINE
     647/    8462 : 24 50 51                            sub     var_Y_lo, var_Y_hi
     648/    8465 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     649/    8467 :                     
     650/    8467 : A9 46                       dln2:   ld      var_T_hi, r10                   ; Ausgleich Zeit fÃ¼r fehlende Zeilen
     651/    8469 : D6 84 1C                            call    tLine
     652/    846C :                     
     653/    846C :                             dln1:
     654/    846C :                                     ; r0,r2,r3,r4,r5,r6,r7
     655/    846C : D6 A9 13                            call    XBY_to_vram
     656/    846F :                     
     657/    846F : 9C 05                               dl2:    ld      r9,  #5                 ; Farb-Bank-ZÃ¤hler
     658/    8471 : FC 7F                                       ld      r15, #01111111b         ; rot: Farb-BÃ¤nke = RGBHxxxx
     659/    8473 :                     
     660/    8473 : A0 E6                                       incw    rr6                     ; wegen PUSH -> SP=SP-1
     661/    8475 :                                                                     
     662/    8475 : 69 FE                                               ld      SPH, r6
     663/    8477 : 79 FF                                               ld      SPL, r7
     664/    8479 : 48 E6                                               ld      r4, r6
     665/    847B : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     666/    847E : 58 E7                                               ld      r5, r7
     667/    8480 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     668/    8482 :                     
     669/    8482 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     670/    8484 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     671/    8486 :                                                     
     672/    8486 :                                                                                     
     673/    8486 :                                                     rept    40
     674/    8486 :                                                             lde     r0, @rr4        ; 12
     675/    8486 :                                                             com     r0              ;  6
     676/    8486 :                                                             and     r0, r1          ;  6
     677/    8486 :                                                             ;or     r0, r1          ;  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 19 - 11/21/2024 11:26:38


     678/    8486 :                                                             push    r0              ; 12
     679/    8486 :                                                             dec     r5              ;  6
     680/    8486 :                                                     endm                            ; --
     674/    8486 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8488 : 60 E0                                                       com     r0              ;  6
     676/    848A : 52 01                                                       and     r0, r1          ;  6
     677/    848C :                                                             ;or     r0, r1          ;  
     678/    848C : 70 E0                                                       push    r0              ; 12
     679/    848E : 00 E5                                                       dec     r5              ;  6
     674/    8490 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8492 : 60 E0                                                       com     r0              ;  6
     676/    8494 : 52 01                                                       and     r0, r1          ;  6
     677/    8496 :                                                             ;or     r0, r1          ;  
     678/    8496 : 70 E0                                                       push    r0              ; 12
     679/    8498 : 00 E5                                                       dec     r5              ;  6
     674/    849A : 82 04                                                       lde     r0, @rr4        ; 12
     675/    849C : 60 E0                                                       com     r0              ;  6
     676/    849E : 52 01                                                       and     r0, r1          ;  6
     677/    84A0 :                                                             ;or     r0, r1          ;  
     678/    84A0 : 70 E0                                                       push    r0              ; 12
     679/    84A2 : 00 E5                                                       dec     r5              ;  6
     674/    84A4 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84A6 : 60 E0                                                       com     r0              ;  6
     676/    84A8 : 52 01                                                       and     r0, r1          ;  6
     677/    84AA :                                                             ;or     r0, r1          ;  
     678/    84AA : 70 E0                                                       push    r0              ; 12
     679/    84AC : 00 E5                                                       dec     r5              ;  6
     674/    84AE : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84B0 : 60 E0                                                       com     r0              ;  6
     676/    84B2 : 52 01                                                       and     r0, r1          ;  6
     677/    84B4 :                                                             ;or     r0, r1          ;  
     678/    84B4 : 70 E0                                                       push    r0              ; 12
     679/    84B6 : 00 E5                                                       dec     r5              ;  6
     674/    84B8 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84BA : 60 E0                                                       com     r0              ;  6
     676/    84BC : 52 01                                                       and     r0, r1          ;  6
     677/    84BE :                                                             ;or     r0, r1          ;  
     678/    84BE : 70 E0                                                       push    r0              ; 12
     679/    84C0 : 00 E5                                                       dec     r5              ;  6
     674/    84C2 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84C4 : 60 E0                                                       com     r0              ;  6
     676/    84C6 : 52 01                                                       and     r0, r1          ;  6
     677/    84C8 :                                                             ;or     r0, r1          ;  
     678/    84C8 : 70 E0                                                       push    r0              ; 12
     679/    84CA : 00 E5                                                       dec     r5              ;  6
     674/    84CC : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84CE : 60 E0                                                       com     r0              ;  6
     676/    84D0 : 52 01                                                       and     r0, r1          ;  6
     677/    84D2 :                                                             ;or     r0, r1          ;  
     678/    84D2 : 70 E0                                                       push    r0              ; 12
     679/    84D4 : 00 E5                                                       dec     r5              ;  6
     674/    84D6 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84D8 : 60 E0                                                       com     r0              ;  6
     676/    84DA : 52 01                                                       and     r0, r1          ;  6
     677/    84DC :                                                             ;or     r0, r1          ;  
     678/    84DC : 70 E0                                                       push    r0              ; 12
     679/    84DE : 00 E5                                                       dec     r5              ;  6
     674/    84E0 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84E2 : 60 E0                                                       com     r0              ;  6
     676/    84E4 : 52 01                                                       and     r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 20 - 11/21/2024 11:26:38


     677/    84E6 :                                                             ;or     r0, r1          ;  
     678/    84E6 : 70 E0                                                       push    r0              ; 12
     679/    84E8 : 00 E5                                                       dec     r5              ;  6
     674/    84EA : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84EC : 60 E0                                                       com     r0              ;  6
     676/    84EE : 52 01                                                       and     r0, r1          ;  6
     677/    84F0 :                                                             ;or     r0, r1          ;  
     678/    84F0 : 70 E0                                                       push    r0              ; 12
     679/    84F2 : 00 E5                                                       dec     r5              ;  6
     674/    84F4 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    84F6 : 60 E0                                                       com     r0              ;  6
     676/    84F8 : 52 01                                                       and     r0, r1          ;  6
     677/    84FA :                                                             ;or     r0, r1          ;  
     678/    84FA : 70 E0                                                       push    r0              ; 12
     679/    84FC : 00 E5                                                       dec     r5              ;  6
     674/    84FE : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8500 : 60 E0                                                       com     r0              ;  6
     676/    8502 : 52 01                                                       and     r0, r1          ;  6
     677/    8504 :                                                             ;or     r0, r1          ;  
     678/    8504 : 70 E0                                                       push    r0              ; 12
     679/    8506 : 00 E5                                                       dec     r5              ;  6
     674/    8508 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    850A : 60 E0                                                       com     r0              ;  6
     676/    850C : 52 01                                                       and     r0, r1          ;  6
     677/    850E :                                                             ;or     r0, r1          ;  
     678/    850E : 70 E0                                                       push    r0              ; 12
     679/    8510 : 00 E5                                                       dec     r5              ;  6
     674/    8512 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8514 : 60 E0                                                       com     r0              ;  6
     676/    8516 : 52 01                                                       and     r0, r1          ;  6
     677/    8518 :                                                             ;or     r0, r1          ;  
     678/    8518 : 70 E0                                                       push    r0              ; 12
     679/    851A : 00 E5                                                       dec     r5              ;  6
     674/    851C : 82 04                                                       lde     r0, @rr4        ; 12
     675/    851E : 60 E0                                                       com     r0              ;  6
     676/    8520 : 52 01                                                       and     r0, r1          ;  6
     677/    8522 :                                                             ;or     r0, r1          ;  
     678/    8522 : 70 E0                                                       push    r0              ; 12
     679/    8524 : 00 E5                                                       dec     r5              ;  6
     674/    8526 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8528 : 60 E0                                                       com     r0              ;  6
     676/    852A : 52 01                                                       and     r0, r1          ;  6
     677/    852C :                                                             ;or     r0, r1          ;  
     678/    852C : 70 E0                                                       push    r0              ; 12
     679/    852E : 00 E5                                                       dec     r5              ;  6
     674/    8530 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8532 : 60 E0                                                       com     r0              ;  6
     676/    8534 : 52 01                                                       and     r0, r1          ;  6
     677/    8536 :                                                             ;or     r0, r1          ;  
     678/    8536 : 70 E0                                                       push    r0              ; 12
     679/    8538 : 00 E5                                                       dec     r5              ;  6
     674/    853A : 82 04                                                       lde     r0, @rr4        ; 12
     675/    853C : 60 E0                                                       com     r0              ;  6
     676/    853E : 52 01                                                       and     r0, r1          ;  6
     677/    8540 :                                                             ;or     r0, r1          ;  
     678/    8540 : 70 E0                                                       push    r0              ; 12
     679/    8542 : 00 E5                                                       dec     r5              ;  6
     674/    8544 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8546 : 60 E0                                                       com     r0              ;  6
     676/    8548 : 52 01                                                       and     r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 21 - 11/21/2024 11:26:38


     677/    854A :                                                             ;or     r0, r1          ;  
     678/    854A : 70 E0                                                       push    r0              ; 12
     679/    854C : 00 E5                                                       dec     r5              ;  6
     674/    854E : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8550 : 60 E0                                                       com     r0              ;  6
     676/    8552 : 52 01                                                       and     r0, r1          ;  6
     677/    8554 :                                                             ;or     r0, r1          ;  
     678/    8554 : 70 E0                                                       push    r0              ; 12
     679/    8556 : 00 E5                                                       dec     r5              ;  6
     674/    8558 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    855A : 60 E0                                                       com     r0              ;  6
     676/    855C : 52 01                                                       and     r0, r1          ;  6
     677/    855E :                                                             ;or     r0, r1          ;  
     678/    855E : 70 E0                                                       push    r0              ; 12
     679/    8560 : 00 E5                                                       dec     r5              ;  6
     674/    8562 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8564 : 60 E0                                                       com     r0              ;  6
     676/    8566 : 52 01                                                       and     r0, r1          ;  6
     677/    8568 :                                                             ;or     r0, r1          ;  
     678/    8568 : 70 E0                                                       push    r0              ; 12
     679/    856A : 00 E5                                                       dec     r5              ;  6
     674/    856C : 82 04                                                       lde     r0, @rr4        ; 12
     675/    856E : 60 E0                                                       com     r0              ;  6
     676/    8570 : 52 01                                                       and     r0, r1          ;  6
     677/    8572 :                                                             ;or     r0, r1          ;  
     678/    8572 : 70 E0                                                       push    r0              ; 12
     679/    8574 : 00 E5                                                       dec     r5              ;  6
     674/    8576 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8578 : 60 E0                                                       com     r0              ;  6
     676/    857A : 52 01                                                       and     r0, r1          ;  6
     677/    857C :                                                             ;or     r0, r1          ;  
     678/    857C : 70 E0                                                       push    r0              ; 12
     679/    857E : 00 E5                                                       dec     r5              ;  6
     674/    8580 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8582 : 60 E0                                                       com     r0              ;  6
     676/    8584 : 52 01                                                       and     r0, r1          ;  6
     677/    8586 :                                                             ;or     r0, r1          ;  
     678/    8586 : 70 E0                                                       push    r0              ; 12
     679/    8588 : 00 E5                                                       dec     r5              ;  6
     674/    858A : 82 04                                                       lde     r0, @rr4        ; 12
     675/    858C : 60 E0                                                       com     r0              ;  6
     676/    858E : 52 01                                                       and     r0, r1          ;  6
     677/    8590 :                                                             ;or     r0, r1          ;  
     678/    8590 : 70 E0                                                       push    r0              ; 12
     679/    8592 : 00 E5                                                       dec     r5              ;  6
     674/    8594 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8596 : 60 E0                                                       com     r0              ;  6
     676/    8598 : 52 01                                                       and     r0, r1          ;  6
     677/    859A :                                                             ;or     r0, r1          ;  
     678/    859A : 70 E0                                                       push    r0              ; 12
     679/    859C : 00 E5                                                       dec     r5              ;  6
     674/    859E : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85A0 : 60 E0                                                       com     r0              ;  6
     676/    85A2 : 52 01                                                       and     r0, r1          ;  6
     677/    85A4 :                                                             ;or     r0, r1          ;  
     678/    85A4 : 70 E0                                                       push    r0              ; 12
     679/    85A6 : 00 E5                                                       dec     r5              ;  6
     674/    85A8 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85AA : 60 E0                                                       com     r0              ;  6
     676/    85AC : 52 01                                                       and     r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 22 - 11/21/2024 11:26:38


     677/    85AE :                                                             ;or     r0, r1          ;  
     678/    85AE : 70 E0                                                       push    r0              ; 12
     679/    85B0 : 00 E5                                                       dec     r5              ;  6
     674/    85B2 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85B4 : 60 E0                                                       com     r0              ;  6
     676/    85B6 : 52 01                                                       and     r0, r1          ;  6
     677/    85B8 :                                                             ;or     r0, r1          ;  
     678/    85B8 : 70 E0                                                       push    r0              ; 12
     679/    85BA : 00 E5                                                       dec     r5              ;  6
     674/    85BC : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85BE : 60 E0                                                       com     r0              ;  6
     676/    85C0 : 52 01                                                       and     r0, r1          ;  6
     677/    85C2 :                                                             ;or     r0, r1          ;  
     678/    85C2 : 70 E0                                                       push    r0              ; 12
     679/    85C4 : 00 E5                                                       dec     r5              ;  6
     674/    85C6 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85C8 : 60 E0                                                       com     r0              ;  6
     676/    85CA : 52 01                                                       and     r0, r1          ;  6
     677/    85CC :                                                             ;or     r0, r1          ;  
     678/    85CC : 70 E0                                                       push    r0              ; 12
     679/    85CE : 00 E5                                                       dec     r5              ;  6
     674/    85D0 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85D2 : 60 E0                                                       com     r0              ;  6
     676/    85D4 : 52 01                                                       and     r0, r1          ;  6
     677/    85D6 :                                                             ;or     r0, r1          ;  
     678/    85D6 : 70 E0                                                       push    r0              ; 12
     679/    85D8 : 00 E5                                                       dec     r5              ;  6
     674/    85DA : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85DC : 60 E0                                                       com     r0              ;  6
     676/    85DE : 52 01                                                       and     r0, r1          ;  6
     677/    85E0 :                                                             ;or     r0, r1          ;  
     678/    85E0 : 70 E0                                                       push    r0              ; 12
     679/    85E2 : 00 E5                                                       dec     r5              ;  6
     674/    85E4 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85E6 : 60 E0                                                       com     r0              ;  6
     676/    85E8 : 52 01                                                       and     r0, r1          ;  6
     677/    85EA :                                                             ;or     r0, r1          ;  
     678/    85EA : 70 E0                                                       push    r0              ; 12
     679/    85EC : 00 E5                                                       dec     r5              ;  6
     674/    85EE : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85F0 : 60 E0                                                       com     r0              ;  6
     676/    85F2 : 52 01                                                       and     r0, r1          ;  6
     677/    85F4 :                                                             ;or     r0, r1          ;  
     678/    85F4 : 70 E0                                                       push    r0              ; 12
     679/    85F6 : 00 E5                                                       dec     r5              ;  6
     674/    85F8 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    85FA : 60 E0                                                       com     r0              ;  6
     676/    85FC : 52 01                                                       and     r0, r1          ;  6
     677/    85FE :                                                             ;or     r0, r1          ;  
     678/    85FE : 70 E0                                                       push    r0              ; 12
     679/    8600 : 00 E5                                                       dec     r5              ;  6
     674/    8602 : 82 04                                                       lde     r0, @rr4        ; 12
     675/    8604 : 60 E0                                                       com     r0              ;  6
     676/    8606 : 52 01                                                       and     r0, r1          ;  6
     677/    8608 :                                                             ;or     r0, r1          ;  
     678/    8608 : 70 E0                                                       push    r0              ; 12
     679/    860A : 00 E5                                                       dec     r5              ;  6
     674/    860C : 82 04                                                       lde     r0, @rr4        ; 12
     675/    860E : 60 E0                                                       com     r0              ;  6
     676/    8610 : 52 01                                                       and     r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 23 - 11/21/2024 11:26:38


     677/    8612 :                                                             ;or     r0, r1          ;  
     678/    8612 : 70 E0                                                       push    r0              ; 12
     679/    8614 : 00 E5                                                       dec     r5              ;  6
     681/    8616 :                                                                                     ; 40
     682/    8616 : A0 EC                                               incw    rr12            ; next Farb-Byte
     683/    8618 : E0 EF                                               rr      r15             ; next Farb-Bank
     684/    861A :                     
     685/    861A :                     
     686/    861A : 69 FE                                               ld      SPH, r6
     687/    861C : 79 FF                                               ld      SPL, r7
     688/    861E : 48 E6                                               ld      r4, r6
     689/    8620 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     690/    8623 : 58 E7                                               ld      r5, r7
     691/    8625 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     692/    8627 :                     
     693/    8627 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     694/    8629 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     695/    862B :                                                                                     
     696/    862B :                                                     rept    40
     697/    862B :                                                             lde     r0, @rr4        ; 12
     698/    862B :                                                             ;com    r0              ; 
     699/    862B :                                                             or      r0, r1          ;  6
     700/    862B :                                                             ;and    r0, r1                                  
     701/    862B :                                                             push    r0              ; 12
     702/    862B :                                                             dec     r5              ;  6
     703/    862B :                                                     endm                            ; --
     697/    862B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    862D :                                                             ;com    r0              ; 
     699/    862D : 42 01                                                       or      r0, r1          ;  6
     700/    862F :                                                             ;and    r0, r1                                  
     701/    862F : 70 E0                                                       push    r0              ; 12
     702/    8631 : 00 E5                                                       dec     r5              ;  6
     697/    8633 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8635 :                                                             ;com    r0              ; 
     699/    8635 : 42 01                                                       or      r0, r1          ;  6
     700/    8637 :                                                             ;and    r0, r1                                  
     701/    8637 : 70 E0                                                       push    r0              ; 12
     702/    8639 : 00 E5                                                       dec     r5              ;  6
     697/    863B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    863D :                                                             ;com    r0              ; 
     699/    863D : 42 01                                                       or      r0, r1          ;  6
     700/    863F :                                                             ;and    r0, r1                                  
     701/    863F : 70 E0                                                       push    r0              ; 12
     702/    8641 : 00 E5                                                       dec     r5              ;  6
     697/    8643 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8645 :                                                             ;com    r0              ; 
     699/    8645 : 42 01                                                       or      r0, r1          ;  6
     700/    8647 :                                                             ;and    r0, r1                                  
     701/    8647 : 70 E0                                                       push    r0              ; 12
     702/    8649 : 00 E5                                                       dec     r5              ;  6
     697/    864B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    864D :                                                             ;com    r0              ; 
     699/    864D : 42 01                                                       or      r0, r1          ;  6
     700/    864F :                                                             ;and    r0, r1                                  
     701/    864F : 70 E0                                                       push    r0              ; 12
     702/    8651 : 00 E5                                                       dec     r5              ;  6
     697/    8653 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8655 :                                                             ;com    r0              ; 
     699/    8655 : 42 01                                                       or      r0, r1          ;  6
     700/    8657 :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 24 - 11/21/2024 11:26:38


     701/    8657 : 70 E0                                                       push    r0              ; 12
     702/    8659 : 00 E5                                                       dec     r5              ;  6
     697/    865B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    865D :                                                             ;com    r0              ; 
     699/    865D : 42 01                                                       or      r0, r1          ;  6
     700/    865F :                                                             ;and    r0, r1                                  
     701/    865F : 70 E0                                                       push    r0              ; 12
     702/    8661 : 00 E5                                                       dec     r5              ;  6
     697/    8663 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8665 :                                                             ;com    r0              ; 
     699/    8665 : 42 01                                                       or      r0, r1          ;  6
     700/    8667 :                                                             ;and    r0, r1                                  
     701/    8667 : 70 E0                                                       push    r0              ; 12
     702/    8669 : 00 E5                                                       dec     r5              ;  6
     697/    866B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    866D :                                                             ;com    r0              ; 
     699/    866D : 42 01                                                       or      r0, r1          ;  6
     700/    866F :                                                             ;and    r0, r1                                  
     701/    866F : 70 E0                                                       push    r0              ; 12
     702/    8671 : 00 E5                                                       dec     r5              ;  6
     697/    8673 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8675 :                                                             ;com    r0              ; 
     699/    8675 : 42 01                                                       or      r0, r1          ;  6
     700/    8677 :                                                             ;and    r0, r1                                  
     701/    8677 : 70 E0                                                       push    r0              ; 12
     702/    8679 : 00 E5                                                       dec     r5              ;  6
     697/    867B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    867D :                                                             ;com    r0              ; 
     699/    867D : 42 01                                                       or      r0, r1          ;  6
     700/    867F :                                                             ;and    r0, r1                                  
     701/    867F : 70 E0                                                       push    r0              ; 12
     702/    8681 : 00 E5                                                       dec     r5              ;  6
     697/    8683 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8685 :                                                             ;com    r0              ; 
     699/    8685 : 42 01                                                       or      r0, r1          ;  6
     700/    8687 :                                                             ;and    r0, r1                                  
     701/    8687 : 70 E0                                                       push    r0              ; 12
     702/    8689 : 00 E5                                                       dec     r5              ;  6
     697/    868B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    868D :                                                             ;com    r0              ; 
     699/    868D : 42 01                                                       or      r0, r1          ;  6
     700/    868F :                                                             ;and    r0, r1                                  
     701/    868F : 70 E0                                                       push    r0              ; 12
     702/    8691 : 00 E5                                                       dec     r5              ;  6
     697/    8693 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8695 :                                                             ;com    r0              ; 
     699/    8695 : 42 01                                                       or      r0, r1          ;  6
     700/    8697 :                                                             ;and    r0, r1                                  
     701/    8697 : 70 E0                                                       push    r0              ; 12
     702/    8699 : 00 E5                                                       dec     r5              ;  6
     697/    869B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    869D :                                                             ;com    r0              ; 
     699/    869D : 42 01                                                       or      r0, r1          ;  6
     700/    869F :                                                             ;and    r0, r1                                  
     701/    869F : 70 E0                                                       push    r0              ; 12
     702/    86A1 : 00 E5                                                       dec     r5              ;  6
     697/    86A3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86A5 :                                                             ;com    r0              ; 
     699/    86A5 : 42 01                                                       or      r0, r1          ;  6
     700/    86A7 :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 25 - 11/21/2024 11:26:38


     701/    86A7 : 70 E0                                                       push    r0              ; 12
     702/    86A9 : 00 E5                                                       dec     r5              ;  6
     697/    86AB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86AD :                                                             ;com    r0              ; 
     699/    86AD : 42 01                                                       or      r0, r1          ;  6
     700/    86AF :                                                             ;and    r0, r1                                  
     701/    86AF : 70 E0                                                       push    r0              ; 12
     702/    86B1 : 00 E5                                                       dec     r5              ;  6
     697/    86B3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86B5 :                                                             ;com    r0              ; 
     699/    86B5 : 42 01                                                       or      r0, r1          ;  6
     700/    86B7 :                                                             ;and    r0, r1                                  
     701/    86B7 : 70 E0                                                       push    r0              ; 12
     702/    86B9 : 00 E5                                                       dec     r5              ;  6
     697/    86BB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86BD :                                                             ;com    r0              ; 
     699/    86BD : 42 01                                                       or      r0, r1          ;  6
     700/    86BF :                                                             ;and    r0, r1                                  
     701/    86BF : 70 E0                                                       push    r0              ; 12
     702/    86C1 : 00 E5                                                       dec     r5              ;  6
     697/    86C3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86C5 :                                                             ;com    r0              ; 
     699/    86C5 : 42 01                                                       or      r0, r1          ;  6
     700/    86C7 :                                                             ;and    r0, r1                                  
     701/    86C7 : 70 E0                                                       push    r0              ; 12
     702/    86C9 : 00 E5                                                       dec     r5              ;  6
     697/    86CB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86CD :                                                             ;com    r0              ; 
     699/    86CD : 42 01                                                       or      r0, r1          ;  6
     700/    86CF :                                                             ;and    r0, r1                                  
     701/    86CF : 70 E0                                                       push    r0              ; 12
     702/    86D1 : 00 E5                                                       dec     r5              ;  6
     697/    86D3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86D5 :                                                             ;com    r0              ; 
     699/    86D5 : 42 01                                                       or      r0, r1          ;  6
     700/    86D7 :                                                             ;and    r0, r1                                  
     701/    86D7 : 70 E0                                                       push    r0              ; 12
     702/    86D9 : 00 E5                                                       dec     r5              ;  6
     697/    86DB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86DD :                                                             ;com    r0              ; 
     699/    86DD : 42 01                                                       or      r0, r1          ;  6
     700/    86DF :                                                             ;and    r0, r1                                  
     701/    86DF : 70 E0                                                       push    r0              ; 12
     702/    86E1 : 00 E5                                                       dec     r5              ;  6
     697/    86E3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86E5 :                                                             ;com    r0              ; 
     699/    86E5 : 42 01                                                       or      r0, r1          ;  6
     700/    86E7 :                                                             ;and    r0, r1                                  
     701/    86E7 : 70 E0                                                       push    r0              ; 12
     702/    86E9 : 00 E5                                                       dec     r5              ;  6
     697/    86EB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86ED :                                                             ;com    r0              ; 
     699/    86ED : 42 01                                                       or      r0, r1          ;  6
     700/    86EF :                                                             ;and    r0, r1                                  
     701/    86EF : 70 E0                                                       push    r0              ; 12
     702/    86F1 : 00 E5                                                       dec     r5              ;  6
     697/    86F3 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86F5 :                                                             ;com    r0              ; 
     699/    86F5 : 42 01                                                       or      r0, r1          ;  6
     700/    86F7 :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 26 - 11/21/2024 11:26:38


     701/    86F7 : 70 E0                                                       push    r0              ; 12
     702/    86F9 : 00 E5                                                       dec     r5              ;  6
     697/    86FB : 82 04                                                       lde     r0, @rr4        ; 12
     698/    86FD :                                                             ;com    r0              ; 
     699/    86FD : 42 01                                                       or      r0, r1          ;  6
     700/    86FF :                                                             ;and    r0, r1                                  
     701/    86FF : 70 E0                                                       push    r0              ; 12
     702/    8701 : 00 E5                                                       dec     r5              ;  6
     697/    8703 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8705 :                                                             ;com    r0              ; 
     699/    8705 : 42 01                                                       or      r0, r1          ;  6
     700/    8707 :                                                             ;and    r0, r1                                  
     701/    8707 : 70 E0                                                       push    r0              ; 12
     702/    8709 : 00 E5                                                       dec     r5              ;  6
     697/    870B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    870D :                                                             ;com    r0              ; 
     699/    870D : 42 01                                                       or      r0, r1          ;  6
     700/    870F :                                                             ;and    r0, r1                                  
     701/    870F : 70 E0                                                       push    r0              ; 12
     702/    8711 : 00 E5                                                       dec     r5              ;  6
     697/    8713 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8715 :                                                             ;com    r0              ; 
     699/    8715 : 42 01                                                       or      r0, r1          ;  6
     700/    8717 :                                                             ;and    r0, r1                                  
     701/    8717 : 70 E0                                                       push    r0              ; 12
     702/    8719 : 00 E5                                                       dec     r5              ;  6
     697/    871B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    871D :                                                             ;com    r0              ; 
     699/    871D : 42 01                                                       or      r0, r1          ;  6
     700/    871F :                                                             ;and    r0, r1                                  
     701/    871F : 70 E0                                                       push    r0              ; 12
     702/    8721 : 00 E5                                                       dec     r5              ;  6
     697/    8723 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8725 :                                                             ;com    r0              ; 
     699/    8725 : 42 01                                                       or      r0, r1          ;  6
     700/    8727 :                                                             ;and    r0, r1                                  
     701/    8727 : 70 E0                                                       push    r0              ; 12
     702/    8729 : 00 E5                                                       dec     r5              ;  6
     697/    872B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    872D :                                                             ;com    r0              ; 
     699/    872D : 42 01                                                       or      r0, r1          ;  6
     700/    872F :                                                             ;and    r0, r1                                  
     701/    872F : 70 E0                                                       push    r0              ; 12
     702/    8731 : 00 E5                                                       dec     r5              ;  6
     697/    8733 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8735 :                                                             ;com    r0              ; 
     699/    8735 : 42 01                                                       or      r0, r1          ;  6
     700/    8737 :                                                             ;and    r0, r1                                  
     701/    8737 : 70 E0                                                       push    r0              ; 12
     702/    8739 : 00 E5                                                       dec     r5              ;  6
     697/    873B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    873D :                                                             ;com    r0              ; 
     699/    873D : 42 01                                                       or      r0, r1          ;  6
     700/    873F :                                                             ;and    r0, r1                                  
     701/    873F : 70 E0                                                       push    r0              ; 12
     702/    8741 : 00 E5                                                       dec     r5              ;  6
     697/    8743 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8745 :                                                             ;com    r0              ; 
     699/    8745 : 42 01                                                       or      r0, r1          ;  6
     700/    8747 :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 27 - 11/21/2024 11:26:38


     701/    8747 : 70 E0                                                       push    r0              ; 12
     702/    8749 : 00 E5                                                       dec     r5              ;  6
     697/    874B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    874D :                                                             ;com    r0              ; 
     699/    874D : 42 01                                                       or      r0, r1          ;  6
     700/    874F :                                                             ;and    r0, r1                                  
     701/    874F : 70 E0                                                       push    r0              ; 12
     702/    8751 : 00 E5                                                       dec     r5              ;  6
     697/    8753 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8755 :                                                             ;com    r0              ; 
     699/    8755 : 42 01                                                       or      r0, r1          ;  6
     700/    8757 :                                                             ;and    r0, r1                                  
     701/    8757 : 70 E0                                                       push    r0              ; 12
     702/    8759 : 00 E5                                                       dec     r5              ;  6
     697/    875B : 82 04                                                       lde     r0, @rr4        ; 12
     698/    875D :                                                             ;com    r0              ; 
     699/    875D : 42 01                                                       or      r0, r1          ;  6
     700/    875F :                                                             ;and    r0, r1                                  
     701/    875F : 70 E0                                                       push    r0              ; 12
     702/    8761 : 00 E5                                                       dec     r5              ;  6
     697/    8763 : 82 04                                                       lde     r0, @rr4        ; 12
     698/    8765 :                                                             ;com    r0              ; 
     699/    8765 : 42 01                                                       or      r0, r1          ;  6
     700/    8767 :                                                             ;and    r0, r1                                  
     701/    8767 : 70 E0                                                       push    r0              ; 12
     702/    8769 : 00 E5                                                       dec     r5              ;  6
     704/    876B :                                                                                     ; 36
     705/    876B : A0 EC                                               incw    rr12            ; next Farb-Byte
     706/    876D : E0 EF                                               rr      r15             ; next Farb-Bank
     707/    876F :                     
     708/    876F : 69 FE                                               ld      SPH, r6
     709/    8771 : 79 FF                                               ld      SPL, r7
     710/    8773 : 48 E6                                               ld      r4, r6
     711/    8775 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     712/    8778 : 58 E7                                               ld      r5, r7
     713/    877A : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     714/    877C :                     
     715/    877C : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     716/    877E : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     717/    8780 :                     
     718/    8780 :                                                                                    
     719/    8780 :                                                     rept    40
     720/    8780 :                                                             lde     r0, @rr4        ; 12
     721/    8780 :                                                             com     r0              ;  6
     722/    8780 :                                                             and     r0, r1          ;  6
     723/    8780 :                                                             ;or     r0, r1          ;  
     724/    8780 :                                                             push    r0              ; 12
     725/    8780 :                                                             dec     r5              ;  6
     726/    8780 :                                                     endm                            ; --
     720/    8780 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8782 : 60 E0                                                       com     r0              ;  6
     722/    8784 : 52 01                                                       and     r0, r1          ;  6
     723/    8786 :                                                             ;or     r0, r1          ;  
     724/    8786 : 70 E0                                                       push    r0              ; 12
     725/    8788 : 00 E5                                                       dec     r5              ;  6
     720/    878A : 82 04                                                       lde     r0, @rr4        ; 12
     721/    878C : 60 E0                                                       com     r0              ;  6
     722/    878E : 52 01                                                       and     r0, r1          ;  6
     723/    8790 :                                                             ;or     r0, r1          ;  
     724/    8790 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 28 - 11/21/2024 11:26:38


     725/    8792 : 00 E5                                                       dec     r5              ;  6
     720/    8794 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8796 : 60 E0                                                       com     r0              ;  6
     722/    8798 : 52 01                                                       and     r0, r1          ;  6
     723/    879A :                                                             ;or     r0, r1          ;  
     724/    879A : 70 E0                                                       push    r0              ; 12
     725/    879C : 00 E5                                                       dec     r5              ;  6
     720/    879E : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87A0 : 60 E0                                                       com     r0              ;  6
     722/    87A2 : 52 01                                                       and     r0, r1          ;  6
     723/    87A4 :                                                             ;or     r0, r1          ;  
     724/    87A4 : 70 E0                                                       push    r0              ; 12
     725/    87A6 : 00 E5                                                       dec     r5              ;  6
     720/    87A8 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87AA : 60 E0                                                       com     r0              ;  6
     722/    87AC : 52 01                                                       and     r0, r1          ;  6
     723/    87AE :                                                             ;or     r0, r1          ;  
     724/    87AE : 70 E0                                                       push    r0              ; 12
     725/    87B0 : 00 E5                                                       dec     r5              ;  6
     720/    87B2 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87B4 : 60 E0                                                       com     r0              ;  6
     722/    87B6 : 52 01                                                       and     r0, r1          ;  6
     723/    87B8 :                                                             ;or     r0, r1          ;  
     724/    87B8 : 70 E0                                                       push    r0              ; 12
     725/    87BA : 00 E5                                                       dec     r5              ;  6
     720/    87BC : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87BE : 60 E0                                                       com     r0              ;  6
     722/    87C0 : 52 01                                                       and     r0, r1          ;  6
     723/    87C2 :                                                             ;or     r0, r1          ;  
     724/    87C2 : 70 E0                                                       push    r0              ; 12
     725/    87C4 : 00 E5                                                       dec     r5              ;  6
     720/    87C6 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87C8 : 60 E0                                                       com     r0              ;  6
     722/    87CA : 52 01                                                       and     r0, r1          ;  6
     723/    87CC :                                                             ;or     r0, r1          ;  
     724/    87CC : 70 E0                                                       push    r0              ; 12
     725/    87CE : 00 E5                                                       dec     r5              ;  6
     720/    87D0 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87D2 : 60 E0                                                       com     r0              ;  6
     722/    87D4 : 52 01                                                       and     r0, r1          ;  6
     723/    87D6 :                                                             ;or     r0, r1          ;  
     724/    87D6 : 70 E0                                                       push    r0              ; 12
     725/    87D8 : 00 E5                                                       dec     r5              ;  6
     720/    87DA : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87DC : 60 E0                                                       com     r0              ;  6
     722/    87DE : 52 01                                                       and     r0, r1          ;  6
     723/    87E0 :                                                             ;or     r0, r1          ;  
     724/    87E0 : 70 E0                                                       push    r0              ; 12
     725/    87E2 : 00 E5                                                       dec     r5              ;  6
     720/    87E4 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87E6 : 60 E0                                                       com     r0              ;  6
     722/    87E8 : 52 01                                                       and     r0, r1          ;  6
     723/    87EA :                                                             ;or     r0, r1          ;  
     724/    87EA : 70 E0                                                       push    r0              ; 12
     725/    87EC : 00 E5                                                       dec     r5              ;  6
     720/    87EE : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87F0 : 60 E0                                                       com     r0              ;  6
     722/    87F2 : 52 01                                                       and     r0, r1          ;  6
     723/    87F4 :                                                             ;or     r0, r1          ;  
     724/    87F4 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 29 - 11/21/2024 11:26:38


     725/    87F6 : 00 E5                                                       dec     r5              ;  6
     720/    87F8 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    87FA : 60 E0                                                       com     r0              ;  6
     722/    87FC : 52 01                                                       and     r0, r1          ;  6
     723/    87FE :                                                             ;or     r0, r1          ;  
     724/    87FE : 70 E0                                                       push    r0              ; 12
     725/    8800 : 00 E5                                                       dec     r5              ;  6
     720/    8802 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8804 : 60 E0                                                       com     r0              ;  6
     722/    8806 : 52 01                                                       and     r0, r1          ;  6
     723/    8808 :                                                             ;or     r0, r1          ;  
     724/    8808 : 70 E0                                                       push    r0              ; 12
     725/    880A : 00 E5                                                       dec     r5              ;  6
     720/    880C : 82 04                                                       lde     r0, @rr4        ; 12
     721/    880E : 60 E0                                                       com     r0              ;  6
     722/    8810 : 52 01                                                       and     r0, r1          ;  6
     723/    8812 :                                                             ;or     r0, r1          ;  
     724/    8812 : 70 E0                                                       push    r0              ; 12
     725/    8814 : 00 E5                                                       dec     r5              ;  6
     720/    8816 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8818 : 60 E0                                                       com     r0              ;  6
     722/    881A : 52 01                                                       and     r0, r1          ;  6
     723/    881C :                                                             ;or     r0, r1          ;  
     724/    881C : 70 E0                                                       push    r0              ; 12
     725/    881E : 00 E5                                                       dec     r5              ;  6
     720/    8820 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8822 : 60 E0                                                       com     r0              ;  6
     722/    8824 : 52 01                                                       and     r0, r1          ;  6
     723/    8826 :                                                             ;or     r0, r1          ;  
     724/    8826 : 70 E0                                                       push    r0              ; 12
     725/    8828 : 00 E5                                                       dec     r5              ;  6
     720/    882A : 82 04                                                       lde     r0, @rr4        ; 12
     721/    882C : 60 E0                                                       com     r0              ;  6
     722/    882E : 52 01                                                       and     r0, r1          ;  6
     723/    8830 :                                                             ;or     r0, r1          ;  
     724/    8830 : 70 E0                                                       push    r0              ; 12
     725/    8832 : 00 E5                                                       dec     r5              ;  6
     720/    8834 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8836 : 60 E0                                                       com     r0              ;  6
     722/    8838 : 52 01                                                       and     r0, r1          ;  6
     723/    883A :                                                             ;or     r0, r1          ;  
     724/    883A : 70 E0                                                       push    r0              ; 12
     725/    883C : 00 E5                                                       dec     r5              ;  6
     720/    883E : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8840 : 60 E0                                                       com     r0              ;  6
     722/    8842 : 52 01                                                       and     r0, r1          ;  6
     723/    8844 :                                                             ;or     r0, r1          ;  
     724/    8844 : 70 E0                                                       push    r0              ; 12
     725/    8846 : 00 E5                                                       dec     r5              ;  6
     720/    8848 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    884A : 60 E0                                                       com     r0              ;  6
     722/    884C : 52 01                                                       and     r0, r1          ;  6
     723/    884E :                                                             ;or     r0, r1          ;  
     724/    884E : 70 E0                                                       push    r0              ; 12
     725/    8850 : 00 E5                                                       dec     r5              ;  6
     720/    8852 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8854 : 60 E0                                                       com     r0              ;  6
     722/    8856 : 52 01                                                       and     r0, r1          ;  6
     723/    8858 :                                                             ;or     r0, r1          ;  
     724/    8858 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 30 - 11/21/2024 11:26:38


     725/    885A : 00 E5                                                       dec     r5              ;  6
     720/    885C : 82 04                                                       lde     r0, @rr4        ; 12
     721/    885E : 60 E0                                                       com     r0              ;  6
     722/    8860 : 52 01                                                       and     r0, r1          ;  6
     723/    8862 :                                                             ;or     r0, r1          ;  
     724/    8862 : 70 E0                                                       push    r0              ; 12
     725/    8864 : 00 E5                                                       dec     r5              ;  6
     720/    8866 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8868 : 60 E0                                                       com     r0              ;  6
     722/    886A : 52 01                                                       and     r0, r1          ;  6
     723/    886C :                                                             ;or     r0, r1          ;  
     724/    886C : 70 E0                                                       push    r0              ; 12
     725/    886E : 00 E5                                                       dec     r5              ;  6
     720/    8870 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8872 : 60 E0                                                       com     r0              ;  6
     722/    8874 : 52 01                                                       and     r0, r1          ;  6
     723/    8876 :                                                             ;or     r0, r1          ;  
     724/    8876 : 70 E0                                                       push    r0              ; 12
     725/    8878 : 00 E5                                                       dec     r5              ;  6
     720/    887A : 82 04                                                       lde     r0, @rr4        ; 12
     721/    887C : 60 E0                                                       com     r0              ;  6
     722/    887E : 52 01                                                       and     r0, r1          ;  6
     723/    8880 :                                                             ;or     r0, r1          ;  
     724/    8880 : 70 E0                                                       push    r0              ; 12
     725/    8882 : 00 E5                                                       dec     r5              ;  6
     720/    8884 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8886 : 60 E0                                                       com     r0              ;  6
     722/    8888 : 52 01                                                       and     r0, r1          ;  6
     723/    888A :                                                             ;or     r0, r1          ;  
     724/    888A : 70 E0                                                       push    r0              ; 12
     725/    888C : 00 E5                                                       dec     r5              ;  6
     720/    888E : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8890 : 60 E0                                                       com     r0              ;  6
     722/    8892 : 52 01                                                       and     r0, r1          ;  6
     723/    8894 :                                                             ;or     r0, r1          ;  
     724/    8894 : 70 E0                                                       push    r0              ; 12
     725/    8896 : 00 E5                                                       dec     r5              ;  6
     720/    8898 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    889A : 60 E0                                                       com     r0              ;  6
     722/    889C : 52 01                                                       and     r0, r1          ;  6
     723/    889E :                                                             ;or     r0, r1          ;  
     724/    889E : 70 E0                                                       push    r0              ; 12
     725/    88A0 : 00 E5                                                       dec     r5              ;  6
     720/    88A2 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88A4 : 60 E0                                                       com     r0              ;  6
     722/    88A6 : 52 01                                                       and     r0, r1          ;  6
     723/    88A8 :                                                             ;or     r0, r1          ;  
     724/    88A8 : 70 E0                                                       push    r0              ; 12
     725/    88AA : 00 E5                                                       dec     r5              ;  6
     720/    88AC : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88AE : 60 E0                                                       com     r0              ;  6
     722/    88B0 : 52 01                                                       and     r0, r1          ;  6
     723/    88B2 :                                                             ;or     r0, r1          ;  
     724/    88B2 : 70 E0                                                       push    r0              ; 12
     725/    88B4 : 00 E5                                                       dec     r5              ;  6
     720/    88B6 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88B8 : 60 E0                                                       com     r0              ;  6
     722/    88BA : 52 01                                                       and     r0, r1          ;  6
     723/    88BC :                                                             ;or     r0, r1          ;  
     724/    88BC : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 31 - 11/21/2024 11:26:38


     725/    88BE : 00 E5                                                       dec     r5              ;  6
     720/    88C0 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88C2 : 60 E0                                                       com     r0              ;  6
     722/    88C4 : 52 01                                                       and     r0, r1          ;  6
     723/    88C6 :                                                             ;or     r0, r1          ;  
     724/    88C6 : 70 E0                                                       push    r0              ; 12
     725/    88C8 : 00 E5                                                       dec     r5              ;  6
     720/    88CA : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88CC : 60 E0                                                       com     r0              ;  6
     722/    88CE : 52 01                                                       and     r0, r1          ;  6
     723/    88D0 :                                                             ;or     r0, r1          ;  
     724/    88D0 : 70 E0                                                       push    r0              ; 12
     725/    88D2 : 00 E5                                                       dec     r5              ;  6
     720/    88D4 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88D6 : 60 E0                                                       com     r0              ;  6
     722/    88D8 : 52 01                                                       and     r0, r1          ;  6
     723/    88DA :                                                             ;or     r0, r1          ;  
     724/    88DA : 70 E0                                                       push    r0              ; 12
     725/    88DC : 00 E5                                                       dec     r5              ;  6
     720/    88DE : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88E0 : 60 E0                                                       com     r0              ;  6
     722/    88E2 : 52 01                                                       and     r0, r1          ;  6
     723/    88E4 :                                                             ;or     r0, r1          ;  
     724/    88E4 : 70 E0                                                       push    r0              ; 12
     725/    88E6 : 00 E5                                                       dec     r5              ;  6
     720/    88E8 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88EA : 60 E0                                                       com     r0              ;  6
     722/    88EC : 52 01                                                       and     r0, r1          ;  6
     723/    88EE :                                                             ;or     r0, r1          ;  
     724/    88EE : 70 E0                                                       push    r0              ; 12
     725/    88F0 : 00 E5                                                       dec     r5              ;  6
     720/    88F2 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88F4 : 60 E0                                                       com     r0              ;  6
     722/    88F6 : 52 01                                                       and     r0, r1          ;  6
     723/    88F8 :                                                             ;or     r0, r1          ;  
     724/    88F8 : 70 E0                                                       push    r0              ; 12
     725/    88FA : 00 E5                                                       dec     r5              ;  6
     720/    88FC : 82 04                                                       lde     r0, @rr4        ; 12
     721/    88FE : 60 E0                                                       com     r0              ;  6
     722/    8900 : 52 01                                                       and     r0, r1          ;  6
     723/    8902 :                                                             ;or     r0, r1          ;  
     724/    8902 : 70 E0                                                       push    r0              ; 12
     725/    8904 : 00 E5                                                       dec     r5              ;  6
     720/    8906 : 82 04                                                       lde     r0, @rr4        ; 12
     721/    8908 : 60 E0                                                       com     r0              ;  6
     722/    890A : 52 01                                                       and     r0, r1          ;  6
     723/    890C :                                                             ;or     r0, r1          ;  
     724/    890C : 70 E0                                                       push    r0              ; 12
     725/    890E : 00 E5                                                       dec     r5              ;  6
     727/    8910 :                                                                                     ; 40
     728/    8910 : A0 EC                                               incw    rr12            ; next Farb-Byte
     729/    8912 : E0 EF                                               rr      r15             ; next Farb-Bank
     730/    8914 :                     
     731/    8914 :                     
     732/    8914 : 69 FE                                               ld      SPH, r6
     733/    8916 : 79 FF                                               ld      SPL, r7
     734/    8918 : 48 E6                                               ld      r4, r6
     735/    891A : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     736/    891D : 58 E7                                               ld      r5, r7
     737/    891F : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 32 - 11/21/2024 11:26:38


     738/    8921 :                     
     739/    8921 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     740/    8923 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     741/    8925 :                                                                                    
     742/    8925 :                                                     rept    40
     743/    8925 :                                                             lde     r0, @rr4        ; 12
     744/    8925 :                                                             ;com    r0              ;   
     745/    8925 :                                                             or      r0, r1          ;  6
     746/    8925 :                                                             ;and    r0, r1
     747/    8925 :                                                             push    r0              ; 12
     748/    8925 :                                                             dec     r5              ;  6
     749/    8925 :                                                     endm                            ; --
     743/    8925 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8927 :                                                             ;com    r0              ;   
     745/    8927 : 42 01                                                       or      r0, r1          ;  6
     746/    8929 :                                                             ;and    r0, r1
     747/    8929 : 70 E0                                                       push    r0              ; 12
     748/    892B : 00 E5                                                       dec     r5              ;  6
     743/    892D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    892F :                                                             ;com    r0              ;   
     745/    892F : 42 01                                                       or      r0, r1          ;  6
     746/    8931 :                                                             ;and    r0, r1
     747/    8931 : 70 E0                                                       push    r0              ; 12
     748/    8933 : 00 E5                                                       dec     r5              ;  6
     743/    8935 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8937 :                                                             ;com    r0              ;   
     745/    8937 : 42 01                                                       or      r0, r1          ;  6
     746/    8939 :                                                             ;and    r0, r1
     747/    8939 : 70 E0                                                       push    r0              ; 12
     748/    893B : 00 E5                                                       dec     r5              ;  6
     743/    893D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    893F :                                                             ;com    r0              ;   
     745/    893F : 42 01                                                       or      r0, r1          ;  6
     746/    8941 :                                                             ;and    r0, r1
     747/    8941 : 70 E0                                                       push    r0              ; 12
     748/    8943 : 00 E5                                                       dec     r5              ;  6
     743/    8945 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8947 :                                                             ;com    r0              ;   
     745/    8947 : 42 01                                                       or      r0, r1          ;  6
     746/    8949 :                                                             ;and    r0, r1
     747/    8949 : 70 E0                                                       push    r0              ; 12
     748/    894B : 00 E5                                                       dec     r5              ;  6
     743/    894D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    894F :                                                             ;com    r0              ;   
     745/    894F : 42 01                                                       or      r0, r1          ;  6
     746/    8951 :                                                             ;and    r0, r1
     747/    8951 : 70 E0                                                       push    r0              ; 12
     748/    8953 : 00 E5                                                       dec     r5              ;  6
     743/    8955 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8957 :                                                             ;com    r0              ;   
     745/    8957 : 42 01                                                       or      r0, r1          ;  6
     746/    8959 :                                                             ;and    r0, r1
     747/    8959 : 70 E0                                                       push    r0              ; 12
     748/    895B : 00 E5                                                       dec     r5              ;  6
     743/    895D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    895F :                                                             ;com    r0              ;   
     745/    895F : 42 01                                                       or      r0, r1          ;  6
     746/    8961 :                                                             ;and    r0, r1
     747/    8961 : 70 E0                                                       push    r0              ; 12
     748/    8963 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 33 - 11/21/2024 11:26:38


     743/    8965 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8967 :                                                             ;com    r0              ;   
     745/    8967 : 42 01                                                       or      r0, r1          ;  6
     746/    8969 :                                                             ;and    r0, r1
     747/    8969 : 70 E0                                                       push    r0              ; 12
     748/    896B : 00 E5                                                       dec     r5              ;  6
     743/    896D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    896F :                                                             ;com    r0              ;   
     745/    896F : 42 01                                                       or      r0, r1          ;  6
     746/    8971 :                                                             ;and    r0, r1
     747/    8971 : 70 E0                                                       push    r0              ; 12
     748/    8973 : 00 E5                                                       dec     r5              ;  6
     743/    8975 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8977 :                                                             ;com    r0              ;   
     745/    8977 : 42 01                                                       or      r0, r1          ;  6
     746/    8979 :                                                             ;and    r0, r1
     747/    8979 : 70 E0                                                       push    r0              ; 12
     748/    897B : 00 E5                                                       dec     r5              ;  6
     743/    897D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    897F :                                                             ;com    r0              ;   
     745/    897F : 42 01                                                       or      r0, r1          ;  6
     746/    8981 :                                                             ;and    r0, r1
     747/    8981 : 70 E0                                                       push    r0              ; 12
     748/    8983 : 00 E5                                                       dec     r5              ;  6
     743/    8985 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8987 :                                                             ;com    r0              ;   
     745/    8987 : 42 01                                                       or      r0, r1          ;  6
     746/    8989 :                                                             ;and    r0, r1
     747/    8989 : 70 E0                                                       push    r0              ; 12
     748/    898B : 00 E5                                                       dec     r5              ;  6
     743/    898D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    898F :                                                             ;com    r0              ;   
     745/    898F : 42 01                                                       or      r0, r1          ;  6
     746/    8991 :                                                             ;and    r0, r1
     747/    8991 : 70 E0                                                       push    r0              ; 12
     748/    8993 : 00 E5                                                       dec     r5              ;  6
     743/    8995 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8997 :                                                             ;com    r0              ;   
     745/    8997 : 42 01                                                       or      r0, r1          ;  6
     746/    8999 :                                                             ;and    r0, r1
     747/    8999 : 70 E0                                                       push    r0              ; 12
     748/    899B : 00 E5                                                       dec     r5              ;  6
     743/    899D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    899F :                                                             ;com    r0              ;   
     745/    899F : 42 01                                                       or      r0, r1          ;  6
     746/    89A1 :                                                             ;and    r0, r1
     747/    89A1 : 70 E0                                                       push    r0              ; 12
     748/    89A3 : 00 E5                                                       dec     r5              ;  6
     743/    89A5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89A7 :                                                             ;com    r0              ;   
     745/    89A7 : 42 01                                                       or      r0, r1          ;  6
     746/    89A9 :                                                             ;and    r0, r1
     747/    89A9 : 70 E0                                                       push    r0              ; 12
     748/    89AB : 00 E5                                                       dec     r5              ;  6
     743/    89AD : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89AF :                                                             ;com    r0              ;   
     745/    89AF : 42 01                                                       or      r0, r1          ;  6
     746/    89B1 :                                                             ;and    r0, r1
     747/    89B1 : 70 E0                                                       push    r0              ; 12
     748/    89B3 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 34 - 11/21/2024 11:26:38


     743/    89B5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89B7 :                                                             ;com    r0              ;   
     745/    89B7 : 42 01                                                       or      r0, r1          ;  6
     746/    89B9 :                                                             ;and    r0, r1
     747/    89B9 : 70 E0                                                       push    r0              ; 12
     748/    89BB : 00 E5                                                       dec     r5              ;  6
     743/    89BD : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89BF :                                                             ;com    r0              ;   
     745/    89BF : 42 01                                                       or      r0, r1          ;  6
     746/    89C1 :                                                             ;and    r0, r1
     747/    89C1 : 70 E0                                                       push    r0              ; 12
     748/    89C3 : 00 E5                                                       dec     r5              ;  6
     743/    89C5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89C7 :                                                             ;com    r0              ;   
     745/    89C7 : 42 01                                                       or      r0, r1          ;  6
     746/    89C9 :                                                             ;and    r0, r1
     747/    89C9 : 70 E0                                                       push    r0              ; 12
     748/    89CB : 00 E5                                                       dec     r5              ;  6
     743/    89CD : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89CF :                                                             ;com    r0              ;   
     745/    89CF : 42 01                                                       or      r0, r1          ;  6
     746/    89D1 :                                                             ;and    r0, r1
     747/    89D1 : 70 E0                                                       push    r0              ; 12
     748/    89D3 : 00 E5                                                       dec     r5              ;  6
     743/    89D5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89D7 :                                                             ;com    r0              ;   
     745/    89D7 : 42 01                                                       or      r0, r1          ;  6
     746/    89D9 :                                                             ;and    r0, r1
     747/    89D9 : 70 E0                                                       push    r0              ; 12
     748/    89DB : 00 E5                                                       dec     r5              ;  6
     743/    89DD : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89DF :                                                             ;com    r0              ;   
     745/    89DF : 42 01                                                       or      r0, r1          ;  6
     746/    89E1 :                                                             ;and    r0, r1
     747/    89E1 : 70 E0                                                       push    r0              ; 12
     748/    89E3 : 00 E5                                                       dec     r5              ;  6
     743/    89E5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89E7 :                                                             ;com    r0              ;   
     745/    89E7 : 42 01                                                       or      r0, r1          ;  6
     746/    89E9 :                                                             ;and    r0, r1
     747/    89E9 : 70 E0                                                       push    r0              ; 12
     748/    89EB : 00 E5                                                       dec     r5              ;  6
     743/    89ED : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89EF :                                                             ;com    r0              ;   
     745/    89EF : 42 01                                                       or      r0, r1          ;  6
     746/    89F1 :                                                             ;and    r0, r1
     747/    89F1 : 70 E0                                                       push    r0              ; 12
     748/    89F3 : 00 E5                                                       dec     r5              ;  6
     743/    89F5 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89F7 :                                                             ;com    r0              ;   
     745/    89F7 : 42 01                                                       or      r0, r1          ;  6
     746/    89F9 :                                                             ;and    r0, r1
     747/    89F9 : 70 E0                                                       push    r0              ; 12
     748/    89FB : 00 E5                                                       dec     r5              ;  6
     743/    89FD : 82 04                                                       lde     r0, @rr4        ; 12
     744/    89FF :                                                             ;com    r0              ;   
     745/    89FF : 42 01                                                       or      r0, r1          ;  6
     746/    8A01 :                                                             ;and    r0, r1
     747/    8A01 : 70 E0                                                       push    r0              ; 12
     748/    8A03 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 35 - 11/21/2024 11:26:38


     743/    8A05 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A07 :                                                             ;com    r0              ;   
     745/    8A07 : 42 01                                                       or      r0, r1          ;  6
     746/    8A09 :                                                             ;and    r0, r1
     747/    8A09 : 70 E0                                                       push    r0              ; 12
     748/    8A0B : 00 E5                                                       dec     r5              ;  6
     743/    8A0D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A0F :                                                             ;com    r0              ;   
     745/    8A0F : 42 01                                                       or      r0, r1          ;  6
     746/    8A11 :                                                             ;and    r0, r1
     747/    8A11 : 70 E0                                                       push    r0              ; 12
     748/    8A13 : 00 E5                                                       dec     r5              ;  6
     743/    8A15 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A17 :                                                             ;com    r0              ;   
     745/    8A17 : 42 01                                                       or      r0, r1          ;  6
     746/    8A19 :                                                             ;and    r0, r1
     747/    8A19 : 70 E0                                                       push    r0              ; 12
     748/    8A1B : 00 E5                                                       dec     r5              ;  6
     743/    8A1D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A1F :                                                             ;com    r0              ;   
     745/    8A1F : 42 01                                                       or      r0, r1          ;  6
     746/    8A21 :                                                             ;and    r0, r1
     747/    8A21 : 70 E0                                                       push    r0              ; 12
     748/    8A23 : 00 E5                                                       dec     r5              ;  6
     743/    8A25 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A27 :                                                             ;com    r0              ;   
     745/    8A27 : 42 01                                                       or      r0, r1          ;  6
     746/    8A29 :                                                             ;and    r0, r1
     747/    8A29 : 70 E0                                                       push    r0              ; 12
     748/    8A2B : 00 E5                                                       dec     r5              ;  6
     743/    8A2D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A2F :                                                             ;com    r0              ;   
     745/    8A2F : 42 01                                                       or      r0, r1          ;  6
     746/    8A31 :                                                             ;and    r0, r1
     747/    8A31 : 70 E0                                                       push    r0              ; 12
     748/    8A33 : 00 E5                                                       dec     r5              ;  6
     743/    8A35 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A37 :                                                             ;com    r0              ;   
     745/    8A37 : 42 01                                                       or      r0, r1          ;  6
     746/    8A39 :                                                             ;and    r0, r1
     747/    8A39 : 70 E0                                                       push    r0              ; 12
     748/    8A3B : 00 E5                                                       dec     r5              ;  6
     743/    8A3D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A3F :                                                             ;com    r0              ;   
     745/    8A3F : 42 01                                                       or      r0, r1          ;  6
     746/    8A41 :                                                             ;and    r0, r1
     747/    8A41 : 70 E0                                                       push    r0              ; 12
     748/    8A43 : 00 E5                                                       dec     r5              ;  6
     743/    8A45 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A47 :                                                             ;com    r0              ;   
     745/    8A47 : 42 01                                                       or      r0, r1          ;  6
     746/    8A49 :                                                             ;and    r0, r1
     747/    8A49 : 70 E0                                                       push    r0              ; 12
     748/    8A4B : 00 E5                                                       dec     r5              ;  6
     743/    8A4D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A4F :                                                             ;com    r0              ;   
     745/    8A4F : 42 01                                                       or      r0, r1          ;  6
     746/    8A51 :                                                             ;and    r0, r1
     747/    8A51 : 70 E0                                                       push    r0              ; 12
     748/    8A53 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 36 - 11/21/2024 11:26:38


     743/    8A55 : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A57 :                                                             ;com    r0              ;   
     745/    8A57 : 42 01                                                       or      r0, r1          ;  6
     746/    8A59 :                                                             ;and    r0, r1
     747/    8A59 : 70 E0                                                       push    r0              ; 12
     748/    8A5B : 00 E5                                                       dec     r5              ;  6
     743/    8A5D : 82 04                                                       lde     r0, @rr4        ; 12
     744/    8A5F :                                                             ;com    r0              ;   
     745/    8A5F : 42 01                                                       or      r0, r1          ;  6
     746/    8A61 :                                                             ;and    r0, r1
     747/    8A61 : 70 E0                                                       push    r0              ; 12
     748/    8A63 : 00 E5                                                       dec     r5              ;  6
     750/    8A65 :                                                                                     ; 36
     751/    8A65 : A0 EC                                               incw    rr12            ; next Farb-Byte
     752/    8A67 : E0 EF                                               rr      r15             ; next Farb-Bank
     753/    8A69 :                                                     
     754/    8A69 :                                                     
     755/    8A69 : 80 E6                                       decw    rr6
     756/    8A6B :                                             ;-----------------------
     757/    8A6B : 06 E7 28                                    add     R7, #28h        ; 10 BWS-lo + 28h (40)
     758/    8A6E : 7B 08                                       jr      C,  vram10      ; 10/12
     759/    8A70 : 4B 07                                       jr      OV, vram20      ; 10/12
     760/    8A72 : 66 E7 78                                    tcm     R7, #78h        ; 10
     761/    8A75 : EB 08                                       jr      NZ, vram30      ; 10/12
     762/    8A77 : 0B                                          db      0Bh             ; 10/12 0Bh = JR F (also niemals), irgendwo hin
     763/    8A78 :                                                                     ;       Distanz (opcode inc r6)
     764/    8A78 :                                                                     ; wenn Z = 0, springe nicht (2 Bytes)
     765/    8A78 :                                                                     ; wenn Z = 1, Distanz wird als "inc r6" gelesen
     766/    8A78 : 6E                                  vram10: inc     R6              ; 6
     767/    8A79 : 06 E7 08                            vram20: add     R7, #8          ; 10
     768/    8A7C : 16 E6 00                                    adc     R6, #0          ; 10
     769/    8A7F :                                     vram30: ;-----------------------
     770/    8A7F :                     
     771/    8A7F : 00 EA                               dec     r10
     772/    8A81 : ED 84 6F                            jp      nz, dl2
     773/    8A84 :                     
     774/    8A84 : E4 6A FE                    dlr1:   ld      SPH, saveH
     775/    8A87 : E4 6B FF                            ld      SPL, saveL
     776/    8A8A :                     
     777/    8A8A : 50 E1                               pop     r1
     778/    8A8C : 50 E0                               pop     r0
     779/    8A8E :                     
     780/    8A8E : 9F                                  EI
     781/    8A8F : AF                                  ret
     782/    8A90 :                     
     783/    8A90 : E6 46 04            dlrret:         ld      var_T_hi, #4
     784/    8A93 : D6 84 1C                            call    tLine
     785/    8A96 : 8B EC                               jr      dlr1
     786/    8A98 :                     
     787/    8A98 :                     ;------------------------------------------------------------------------------
     788/    8A98 :                     
     789/    8A98 : 8F                  drawLineW:      DI
     790/    8A99 : 70 E0                               push    r0
     791/    8A9B : 70 E1                               push    r1
     792/    8A9D : E4 FE 6A                            ld      saveH, SPH
     793/    8AA0 : E4 FF 6B                            ld      saveL, SPL
     794/    8AA3 :                     
     795/    8AA3 : AC 04                               ld      r10, #COLORS_PER_LINE           ; Zeilen-ZÃ¤hler
     796/    8AA5 : 4C 60                               ld      r4, #60h
     797/    8AA7 : E6 4F 27                            ld      var_X_lo, #39
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 37 - 11/21/2024 11:26:38


     798/    8AAA :                     
     799/    8AAA : A6 50 80                            cp      var_Y_hi, #128                  ; alle Zeilen schreiben ?
     800/    8AAD : 6B 28                               jr      z, dln11
     801/    8AAF :                     
     802/    8AAF : 24 51 50                            sub     var_Y_hi, var_Y_lo              ; Anzahl Zeilen sichtbar berechnen
     803/    8AB2 : 6D 90 5B                            jp      z, dlrret2
     804/    8AB5 : 5B 09                               jr      mi, neg2                                ; neg/pos ?
     805/    8AB7 :                             pos2:
     806/    8AB7 : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     807/    8ABA : FB 1B                               jr      nc, dln11
     808/    8ABC :                     
     809/    8ABC : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     810/    8ABE : 8B 12                               jr      dln22
     811/    8AC0 :                             neg2:
     812/    8AC0 : 60 50                               com     var_Y_hi                        ; Zweierkomplement
     813/    8AC2 : 06 50 01                            add     var_Y_hi, #1
     814/    8AC5 :                     
     815/    8AC5 : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     816/    8AC8 : FB 0D                               jr      nc, dln11
     817/    8ACA :                     
     818/    8ACA : 06 51 04                            add     var_Y_lo, #COLORS_PER_LINE
     819/    8ACD : 24 50 51                            sub     var_Y_lo, var_Y_hi
     820/    8AD0 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     821/    8AD2 :                     
     822/    8AD2 : A9 46                       dln22:  ld      var_T_hi, r10                   ; Ausgleich Zeit fÃ¼r fehlende Zeilen
     823/    8AD4 : D6 84 1C                            call    tLine
     824/    8AD7 :                     
     825/    8AD7 :                             dln11:
     826/    8AD7 :                                     ; r0,r2,r3,r4,r5,r6,r7
     827/    8AD7 : D6 A9 13                            call    XBY_to_vram
     828/    8ADA :                     
     829/    8ADA : 9C 04                               dl22:   ld      r9,  #4                 ; Farb-Bank-ZÃ¤hler
     830/    8ADC : FC 7F                                       ld      r15, #01111111b         ; rot: Farb-BÃ¤nke = RGBHxxxx
     831/    8ADE :                     
     832/    8ADE : A0 E6                                       incw    rr6                     ; wegen PUSH -> SP=SP-1
     833/    8AE0 :                                                                     
     834/    8AE0 : 69 FE                                               ld      SPH, r6
     835/    8AE2 : 79 FF                                               ld      SPL, r7
     836/    8AE4 : 48 E6                                               ld      r4, r6
     837/    8AE6 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     838/    8AE9 : 58 E7                                               ld      r5, r7
     839/    8AEB : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     840/    8AED :                     
     841/    8AED : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     842/    8AEF : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     843/    8AF1 :                     
     844/    8AF1 :                                                     rept    40
     845/    8AF1 :                                                             lde     r0, @rr4        ; 12
     846/    8AF1 :                                                             ;com    r0
     847/    8AF1 :                                                             ;and    r0, r1          ;  
     848/    8AF1 :                                                             or      r0, r1          ;  6
     849/    8AF1 :                                                             push    r0              ; 12
     850/    8AF1 :                                                             dec     r5              ;  6
     851/    8AF1 :                                                     endm                            ; --
     845/    8AF1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8AF3 :                                                             ;com    r0
     847/    8AF3 :                                                             ;and    r0, r1          ;  
     848/    8AF3 : 42 01                                                       or      r0, r1          ;  6
     849/    8AF5 : 70 E0                                                       push    r0              ; 12
     850/    8AF7 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 38 - 11/21/2024 11:26:38


     845/    8AF9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8AFB :                                                             ;com    r0
     847/    8AFB :                                                             ;and    r0, r1          ;  
     848/    8AFB : 42 01                                                       or      r0, r1          ;  6
     849/    8AFD : 70 E0                                                       push    r0              ; 12
     850/    8AFF : 00 E5                                                       dec     r5              ;  6
     845/    8B01 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B03 :                                                             ;com    r0
     847/    8B03 :                                                             ;and    r0, r1          ;  
     848/    8B03 : 42 01                                                       or      r0, r1          ;  6
     849/    8B05 : 70 E0                                                       push    r0              ; 12
     850/    8B07 : 00 E5                                                       dec     r5              ;  6
     845/    8B09 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B0B :                                                             ;com    r0
     847/    8B0B :                                                             ;and    r0, r1          ;  
     848/    8B0B : 42 01                                                       or      r0, r1          ;  6
     849/    8B0D : 70 E0                                                       push    r0              ; 12
     850/    8B0F : 00 E5                                                       dec     r5              ;  6
     845/    8B11 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B13 :                                                             ;com    r0
     847/    8B13 :                                                             ;and    r0, r1          ;  
     848/    8B13 : 42 01                                                       or      r0, r1          ;  6
     849/    8B15 : 70 E0                                                       push    r0              ; 12
     850/    8B17 : 00 E5                                                       dec     r5              ;  6
     845/    8B19 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B1B :                                                             ;com    r0
     847/    8B1B :                                                             ;and    r0, r1          ;  
     848/    8B1B : 42 01                                                       or      r0, r1          ;  6
     849/    8B1D : 70 E0                                                       push    r0              ; 12
     850/    8B1F : 00 E5                                                       dec     r5              ;  6
     845/    8B21 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B23 :                                                             ;com    r0
     847/    8B23 :                                                             ;and    r0, r1          ;  
     848/    8B23 : 42 01                                                       or      r0, r1          ;  6
     849/    8B25 : 70 E0                                                       push    r0              ; 12
     850/    8B27 : 00 E5                                                       dec     r5              ;  6
     845/    8B29 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B2B :                                                             ;com    r0
     847/    8B2B :                                                             ;and    r0, r1          ;  
     848/    8B2B : 42 01                                                       or      r0, r1          ;  6
     849/    8B2D : 70 E0                                                       push    r0              ; 12
     850/    8B2F : 00 E5                                                       dec     r5              ;  6
     845/    8B31 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B33 :                                                             ;com    r0
     847/    8B33 :                                                             ;and    r0, r1          ;  
     848/    8B33 : 42 01                                                       or      r0, r1          ;  6
     849/    8B35 : 70 E0                                                       push    r0              ; 12
     850/    8B37 : 00 E5                                                       dec     r5              ;  6
     845/    8B39 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B3B :                                                             ;com    r0
     847/    8B3B :                                                             ;and    r0, r1          ;  
     848/    8B3B : 42 01                                                       or      r0, r1          ;  6
     849/    8B3D : 70 E0                                                       push    r0              ; 12
     850/    8B3F : 00 E5                                                       dec     r5              ;  6
     845/    8B41 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B43 :                                                             ;com    r0
     847/    8B43 :                                                             ;and    r0, r1          ;  
     848/    8B43 : 42 01                                                       or      r0, r1          ;  6
     849/    8B45 : 70 E0                                                       push    r0              ; 12
     850/    8B47 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 39 - 11/21/2024 11:26:38


     845/    8B49 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B4B :                                                             ;com    r0
     847/    8B4B :                                                             ;and    r0, r1          ;  
     848/    8B4B : 42 01                                                       or      r0, r1          ;  6
     849/    8B4D : 70 E0                                                       push    r0              ; 12
     850/    8B4F : 00 E5                                                       dec     r5              ;  6
     845/    8B51 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B53 :                                                             ;com    r0
     847/    8B53 :                                                             ;and    r0, r1          ;  
     848/    8B53 : 42 01                                                       or      r0, r1          ;  6
     849/    8B55 : 70 E0                                                       push    r0              ; 12
     850/    8B57 : 00 E5                                                       dec     r5              ;  6
     845/    8B59 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B5B :                                                             ;com    r0
     847/    8B5B :                                                             ;and    r0, r1          ;  
     848/    8B5B : 42 01                                                       or      r0, r1          ;  6
     849/    8B5D : 70 E0                                                       push    r0              ; 12
     850/    8B5F : 00 E5                                                       dec     r5              ;  6
     845/    8B61 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B63 :                                                             ;com    r0
     847/    8B63 :                                                             ;and    r0, r1          ;  
     848/    8B63 : 42 01                                                       or      r0, r1          ;  6
     849/    8B65 : 70 E0                                                       push    r0              ; 12
     850/    8B67 : 00 E5                                                       dec     r5              ;  6
     845/    8B69 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B6B :                                                             ;com    r0
     847/    8B6B :                                                             ;and    r0, r1          ;  
     848/    8B6B : 42 01                                                       or      r0, r1          ;  6
     849/    8B6D : 70 E0                                                       push    r0              ; 12
     850/    8B6F : 00 E5                                                       dec     r5              ;  6
     845/    8B71 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B73 :                                                             ;com    r0
     847/    8B73 :                                                             ;and    r0, r1          ;  
     848/    8B73 : 42 01                                                       or      r0, r1          ;  6
     849/    8B75 : 70 E0                                                       push    r0              ; 12
     850/    8B77 : 00 E5                                                       dec     r5              ;  6
     845/    8B79 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B7B :                                                             ;com    r0
     847/    8B7B :                                                             ;and    r0, r1          ;  
     848/    8B7B : 42 01                                                       or      r0, r1          ;  6
     849/    8B7D : 70 E0                                                       push    r0              ; 12
     850/    8B7F : 00 E5                                                       dec     r5              ;  6
     845/    8B81 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B83 :                                                             ;com    r0
     847/    8B83 :                                                             ;and    r0, r1          ;  
     848/    8B83 : 42 01                                                       or      r0, r1          ;  6
     849/    8B85 : 70 E0                                                       push    r0              ; 12
     850/    8B87 : 00 E5                                                       dec     r5              ;  6
     845/    8B89 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B8B :                                                             ;com    r0
     847/    8B8B :                                                             ;and    r0, r1          ;  
     848/    8B8B : 42 01                                                       or      r0, r1          ;  6
     849/    8B8D : 70 E0                                                       push    r0              ; 12
     850/    8B8F : 00 E5                                                       dec     r5              ;  6
     845/    8B91 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B93 :                                                             ;com    r0
     847/    8B93 :                                                             ;and    r0, r1          ;  
     848/    8B93 : 42 01                                                       or      r0, r1          ;  6
     849/    8B95 : 70 E0                                                       push    r0              ; 12
     850/    8B97 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 40 - 11/21/2024 11:26:38


     845/    8B99 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8B9B :                                                             ;com    r0
     847/    8B9B :                                                             ;and    r0, r1          ;  
     848/    8B9B : 42 01                                                       or      r0, r1          ;  6
     849/    8B9D : 70 E0                                                       push    r0              ; 12
     850/    8B9F : 00 E5                                                       dec     r5              ;  6
     845/    8BA1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BA3 :                                                             ;com    r0
     847/    8BA3 :                                                             ;and    r0, r1          ;  
     848/    8BA3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BA5 : 70 E0                                                       push    r0              ; 12
     850/    8BA7 : 00 E5                                                       dec     r5              ;  6
     845/    8BA9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BAB :                                                             ;com    r0
     847/    8BAB :                                                             ;and    r0, r1          ;  
     848/    8BAB : 42 01                                                       or      r0, r1          ;  6
     849/    8BAD : 70 E0                                                       push    r0              ; 12
     850/    8BAF : 00 E5                                                       dec     r5              ;  6
     845/    8BB1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BB3 :                                                             ;com    r0
     847/    8BB3 :                                                             ;and    r0, r1          ;  
     848/    8BB3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BB5 : 70 E0                                                       push    r0              ; 12
     850/    8BB7 : 00 E5                                                       dec     r5              ;  6
     845/    8BB9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BBB :                                                             ;com    r0
     847/    8BBB :                                                             ;and    r0, r1          ;  
     848/    8BBB : 42 01                                                       or      r0, r1          ;  6
     849/    8BBD : 70 E0                                                       push    r0              ; 12
     850/    8BBF : 00 E5                                                       dec     r5              ;  6
     845/    8BC1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BC3 :                                                             ;com    r0
     847/    8BC3 :                                                             ;and    r0, r1          ;  
     848/    8BC3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BC5 : 70 E0                                                       push    r0              ; 12
     850/    8BC7 : 00 E5                                                       dec     r5              ;  6
     845/    8BC9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BCB :                                                             ;com    r0
     847/    8BCB :                                                             ;and    r0, r1          ;  
     848/    8BCB : 42 01                                                       or      r0, r1          ;  6
     849/    8BCD : 70 E0                                                       push    r0              ; 12
     850/    8BCF : 00 E5                                                       dec     r5              ;  6
     845/    8BD1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BD3 :                                                             ;com    r0
     847/    8BD3 :                                                             ;and    r0, r1          ;  
     848/    8BD3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BD5 : 70 E0                                                       push    r0              ; 12
     850/    8BD7 : 00 E5                                                       dec     r5              ;  6
     845/    8BD9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BDB :                                                             ;com    r0
     847/    8BDB :                                                             ;and    r0, r1          ;  
     848/    8BDB : 42 01                                                       or      r0, r1          ;  6
     849/    8BDD : 70 E0                                                       push    r0              ; 12
     850/    8BDF : 00 E5                                                       dec     r5              ;  6
     845/    8BE1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BE3 :                                                             ;com    r0
     847/    8BE3 :                                                             ;and    r0, r1          ;  
     848/    8BE3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BE5 : 70 E0                                                       push    r0              ; 12
     850/    8BE7 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 41 - 11/21/2024 11:26:38


     845/    8BE9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BEB :                                                             ;com    r0
     847/    8BEB :                                                             ;and    r0, r1          ;  
     848/    8BEB : 42 01                                                       or      r0, r1          ;  6
     849/    8BED : 70 E0                                                       push    r0              ; 12
     850/    8BEF : 00 E5                                                       dec     r5              ;  6
     845/    8BF1 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BF3 :                                                             ;com    r0
     847/    8BF3 :                                                             ;and    r0, r1          ;  
     848/    8BF3 : 42 01                                                       or      r0, r1          ;  6
     849/    8BF5 : 70 E0                                                       push    r0              ; 12
     850/    8BF7 : 00 E5                                                       dec     r5              ;  6
     845/    8BF9 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8BFB :                                                             ;com    r0
     847/    8BFB :                                                             ;and    r0, r1          ;  
     848/    8BFB : 42 01                                                       or      r0, r1          ;  6
     849/    8BFD : 70 E0                                                       push    r0              ; 12
     850/    8BFF : 00 E5                                                       dec     r5              ;  6
     845/    8C01 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C03 :                                                             ;com    r0
     847/    8C03 :                                                             ;and    r0, r1          ;  
     848/    8C03 : 42 01                                                       or      r0, r1          ;  6
     849/    8C05 : 70 E0                                                       push    r0              ; 12
     850/    8C07 : 00 E5                                                       dec     r5              ;  6
     845/    8C09 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C0B :                                                             ;com    r0
     847/    8C0B :                                                             ;and    r0, r1          ;  
     848/    8C0B : 42 01                                                       or      r0, r1          ;  6
     849/    8C0D : 70 E0                                                       push    r0              ; 12
     850/    8C0F : 00 E5                                                       dec     r5              ;  6
     845/    8C11 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C13 :                                                             ;com    r0
     847/    8C13 :                                                             ;and    r0, r1          ;  
     848/    8C13 : 42 01                                                       or      r0, r1          ;  6
     849/    8C15 : 70 E0                                                       push    r0              ; 12
     850/    8C17 : 00 E5                                                       dec     r5              ;  6
     845/    8C19 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C1B :                                                             ;com    r0
     847/    8C1B :                                                             ;and    r0, r1          ;  
     848/    8C1B : 42 01                                                       or      r0, r1          ;  6
     849/    8C1D : 70 E0                                                       push    r0              ; 12
     850/    8C1F : 00 E5                                                       dec     r5              ;  6
     845/    8C21 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C23 :                                                             ;com    r0
     847/    8C23 :                                                             ;and    r0, r1          ;  
     848/    8C23 : 42 01                                                       or      r0, r1          ;  6
     849/    8C25 : 70 E0                                                       push    r0              ; 12
     850/    8C27 : 00 E5                                                       dec     r5              ;  6
     845/    8C29 : 82 04                                                       lde     r0, @rr4        ; 12
     846/    8C2B :                                                             ;com    r0
     847/    8C2B :                                                             ;and    r0, r1          ;  
     848/    8C2B : 42 01                                                       or      r0, r1          ;  6
     849/    8C2D : 70 E0                                                       push    r0              ; 12
     850/    8C2F : 00 E5                                                       dec     r5              ;  6
     852/    8C31 :                                                                                     ; 36
     853/    8C31 : A0 EC                                               incw    rr12            ; next Farb-Byte
     854/    8C33 : E0 EF                                               rr      r15             ; next Farb-Bank
     855/    8C35 :                     
     856/    8C35 : 69 FE                                               ld      SPH, r6
     857/    8C37 : 79 FF                                               ld      SPL, r7
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 42 - 11/21/2024 11:26:38


     858/    8C39 : 48 E6                                               ld      r4, r6
     859/    8C3B : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     860/    8C3E : 58 E7                                               ld      r5, r7
     861/    8C40 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     862/    8C42 :                     
     863/    8C42 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     864/    8C44 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     865/    8C46 :                                                                                     
     866/    8C46 :                                                     rept    40
     867/    8C46 :                                                             lde     r0, @rr4        ; 12
     868/    8C46 :                                                             ;com    r0              ; 
     869/    8C46 :                                                             or      r0, r1          ;  6
     870/    8C46 :                                                             ;and    r0, r1                                  
     871/    8C46 :                                                             push    r0              ; 12
     872/    8C46 :                                                             dec     r5              ;  6
     873/    8C46 :                                                     endm                            ; --
     867/    8C46 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C48 :                                                             ;com    r0              ; 
     869/    8C48 : 42 01                                                       or      r0, r1          ;  6
     870/    8C4A :                                                             ;and    r0, r1                                  
     871/    8C4A : 70 E0                                                       push    r0              ; 12
     872/    8C4C : 00 E5                                                       dec     r5              ;  6
     867/    8C4E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C50 :                                                             ;com    r0              ; 
     869/    8C50 : 42 01                                                       or      r0, r1          ;  6
     870/    8C52 :                                                             ;and    r0, r1                                  
     871/    8C52 : 70 E0                                                       push    r0              ; 12
     872/    8C54 : 00 E5                                                       dec     r5              ;  6
     867/    8C56 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C58 :                                                             ;com    r0              ; 
     869/    8C58 : 42 01                                                       or      r0, r1          ;  6
     870/    8C5A :                                                             ;and    r0, r1                                  
     871/    8C5A : 70 E0                                                       push    r0              ; 12
     872/    8C5C : 00 E5                                                       dec     r5              ;  6
     867/    8C5E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C60 :                                                             ;com    r0              ; 
     869/    8C60 : 42 01                                                       or      r0, r1          ;  6
     870/    8C62 :                                                             ;and    r0, r1                                  
     871/    8C62 : 70 E0                                                       push    r0              ; 12
     872/    8C64 : 00 E5                                                       dec     r5              ;  6
     867/    8C66 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C68 :                                                             ;com    r0              ; 
     869/    8C68 : 42 01                                                       or      r0, r1          ;  6
     870/    8C6A :                                                             ;and    r0, r1                                  
     871/    8C6A : 70 E0                                                       push    r0              ; 12
     872/    8C6C : 00 E5                                                       dec     r5              ;  6
     867/    8C6E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C70 :                                                             ;com    r0              ; 
     869/    8C70 : 42 01                                                       or      r0, r1          ;  6
     870/    8C72 :                                                             ;and    r0, r1                                  
     871/    8C72 : 70 E0                                                       push    r0              ; 12
     872/    8C74 : 00 E5                                                       dec     r5              ;  6
     867/    8C76 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C78 :                                                             ;com    r0              ; 
     869/    8C78 : 42 01                                                       or      r0, r1          ;  6
     870/    8C7A :                                                             ;and    r0, r1                                  
     871/    8C7A : 70 E0                                                       push    r0              ; 12
     872/    8C7C : 00 E5                                                       dec     r5              ;  6
     867/    8C7E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C80 :                                                             ;com    r0              ; 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 43 - 11/21/2024 11:26:38


     869/    8C80 : 42 01                                                       or      r0, r1          ;  6
     870/    8C82 :                                                             ;and    r0, r1                                  
     871/    8C82 : 70 E0                                                       push    r0              ; 12
     872/    8C84 : 00 E5                                                       dec     r5              ;  6
     867/    8C86 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C88 :                                                             ;com    r0              ; 
     869/    8C88 : 42 01                                                       or      r0, r1          ;  6
     870/    8C8A :                                                             ;and    r0, r1                                  
     871/    8C8A : 70 E0                                                       push    r0              ; 12
     872/    8C8C : 00 E5                                                       dec     r5              ;  6
     867/    8C8E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C90 :                                                             ;com    r0              ; 
     869/    8C90 : 42 01                                                       or      r0, r1          ;  6
     870/    8C92 :                                                             ;and    r0, r1                                  
     871/    8C92 : 70 E0                                                       push    r0              ; 12
     872/    8C94 : 00 E5                                                       dec     r5              ;  6
     867/    8C96 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8C98 :                                                             ;com    r0              ; 
     869/    8C98 : 42 01                                                       or      r0, r1          ;  6
     870/    8C9A :                                                             ;and    r0, r1                                  
     871/    8C9A : 70 E0                                                       push    r0              ; 12
     872/    8C9C : 00 E5                                                       dec     r5              ;  6
     867/    8C9E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CA0 :                                                             ;com    r0              ; 
     869/    8CA0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CA2 :                                                             ;and    r0, r1                                  
     871/    8CA2 : 70 E0                                                       push    r0              ; 12
     872/    8CA4 : 00 E5                                                       dec     r5              ;  6
     867/    8CA6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CA8 :                                                             ;com    r0              ; 
     869/    8CA8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CAA :                                                             ;and    r0, r1                                  
     871/    8CAA : 70 E0                                                       push    r0              ; 12
     872/    8CAC : 00 E5                                                       dec     r5              ;  6
     867/    8CAE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CB0 :                                                             ;com    r0              ; 
     869/    8CB0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CB2 :                                                             ;and    r0, r1                                  
     871/    8CB2 : 70 E0                                                       push    r0              ; 12
     872/    8CB4 : 00 E5                                                       dec     r5              ;  6
     867/    8CB6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CB8 :                                                             ;com    r0              ; 
     869/    8CB8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CBA :                                                             ;and    r0, r1                                  
     871/    8CBA : 70 E0                                                       push    r0              ; 12
     872/    8CBC : 00 E5                                                       dec     r5              ;  6
     867/    8CBE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CC0 :                                                             ;com    r0              ; 
     869/    8CC0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CC2 :                                                             ;and    r0, r1                                  
     871/    8CC2 : 70 E0                                                       push    r0              ; 12
     872/    8CC4 : 00 E5                                                       dec     r5              ;  6
     867/    8CC6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CC8 :                                                             ;com    r0              ; 
     869/    8CC8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CCA :                                                             ;and    r0, r1                                  
     871/    8CCA : 70 E0                                                       push    r0              ; 12
     872/    8CCC : 00 E5                                                       dec     r5              ;  6
     867/    8CCE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CD0 :                                                             ;com    r0              ; 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 44 - 11/21/2024 11:26:38


     869/    8CD0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CD2 :                                                             ;and    r0, r1                                  
     871/    8CD2 : 70 E0                                                       push    r0              ; 12
     872/    8CD4 : 00 E5                                                       dec     r5              ;  6
     867/    8CD6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CD8 :                                                             ;com    r0              ; 
     869/    8CD8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CDA :                                                             ;and    r0, r1                                  
     871/    8CDA : 70 E0                                                       push    r0              ; 12
     872/    8CDC : 00 E5                                                       dec     r5              ;  6
     867/    8CDE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CE0 :                                                             ;com    r0              ; 
     869/    8CE0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CE2 :                                                             ;and    r0, r1                                  
     871/    8CE2 : 70 E0                                                       push    r0              ; 12
     872/    8CE4 : 00 E5                                                       dec     r5              ;  6
     867/    8CE6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CE8 :                                                             ;com    r0              ; 
     869/    8CE8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CEA :                                                             ;and    r0, r1                                  
     871/    8CEA : 70 E0                                                       push    r0              ; 12
     872/    8CEC : 00 E5                                                       dec     r5              ;  6
     867/    8CEE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CF0 :                                                             ;com    r0              ; 
     869/    8CF0 : 42 01                                                       or      r0, r1          ;  6
     870/    8CF2 :                                                             ;and    r0, r1                                  
     871/    8CF2 : 70 E0                                                       push    r0              ; 12
     872/    8CF4 : 00 E5                                                       dec     r5              ;  6
     867/    8CF6 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8CF8 :                                                             ;com    r0              ; 
     869/    8CF8 : 42 01                                                       or      r0, r1          ;  6
     870/    8CFA :                                                             ;and    r0, r1                                  
     871/    8CFA : 70 E0                                                       push    r0              ; 12
     872/    8CFC : 00 E5                                                       dec     r5              ;  6
     867/    8CFE : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D00 :                                                             ;com    r0              ; 
     869/    8D00 : 42 01                                                       or      r0, r1          ;  6
     870/    8D02 :                                                             ;and    r0, r1                                  
     871/    8D02 : 70 E0                                                       push    r0              ; 12
     872/    8D04 : 00 E5                                                       dec     r5              ;  6
     867/    8D06 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D08 :                                                             ;com    r0              ; 
     869/    8D08 : 42 01                                                       or      r0, r1          ;  6
     870/    8D0A :                                                             ;and    r0, r1                                  
     871/    8D0A : 70 E0                                                       push    r0              ; 12
     872/    8D0C : 00 E5                                                       dec     r5              ;  6
     867/    8D0E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D10 :                                                             ;com    r0              ; 
     869/    8D10 : 42 01                                                       or      r0, r1          ;  6
     870/    8D12 :                                                             ;and    r0, r1                                  
     871/    8D12 : 70 E0                                                       push    r0              ; 12
     872/    8D14 : 00 E5                                                       dec     r5              ;  6
     867/    8D16 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D18 :                                                             ;com    r0              ; 
     869/    8D18 : 42 01                                                       or      r0, r1          ;  6
     870/    8D1A :                                                             ;and    r0, r1                                  
     871/    8D1A : 70 E0                                                       push    r0              ; 12
     872/    8D1C : 00 E5                                                       dec     r5              ;  6
     867/    8D1E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D20 :                                                             ;com    r0              ; 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 45 - 11/21/2024 11:26:38


     869/    8D20 : 42 01                                                       or      r0, r1          ;  6
     870/    8D22 :                                                             ;and    r0, r1                                  
     871/    8D22 : 70 E0                                                       push    r0              ; 12
     872/    8D24 : 00 E5                                                       dec     r5              ;  6
     867/    8D26 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D28 :                                                             ;com    r0              ; 
     869/    8D28 : 42 01                                                       or      r0, r1          ;  6
     870/    8D2A :                                                             ;and    r0, r1                                  
     871/    8D2A : 70 E0                                                       push    r0              ; 12
     872/    8D2C : 00 E5                                                       dec     r5              ;  6
     867/    8D2E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D30 :                                                             ;com    r0              ; 
     869/    8D30 : 42 01                                                       or      r0, r1          ;  6
     870/    8D32 :                                                             ;and    r0, r1                                  
     871/    8D32 : 70 E0                                                       push    r0              ; 12
     872/    8D34 : 00 E5                                                       dec     r5              ;  6
     867/    8D36 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D38 :                                                             ;com    r0              ; 
     869/    8D38 : 42 01                                                       or      r0, r1          ;  6
     870/    8D3A :                                                             ;and    r0, r1                                  
     871/    8D3A : 70 E0                                                       push    r0              ; 12
     872/    8D3C : 00 E5                                                       dec     r5              ;  6
     867/    8D3E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D40 :                                                             ;com    r0              ; 
     869/    8D40 : 42 01                                                       or      r0, r1          ;  6
     870/    8D42 :                                                             ;and    r0, r1                                  
     871/    8D42 : 70 E0                                                       push    r0              ; 12
     872/    8D44 : 00 E5                                                       dec     r5              ;  6
     867/    8D46 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D48 :                                                             ;com    r0              ; 
     869/    8D48 : 42 01                                                       or      r0, r1          ;  6
     870/    8D4A :                                                             ;and    r0, r1                                  
     871/    8D4A : 70 E0                                                       push    r0              ; 12
     872/    8D4C : 00 E5                                                       dec     r5              ;  6
     867/    8D4E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D50 :                                                             ;com    r0              ; 
     869/    8D50 : 42 01                                                       or      r0, r1          ;  6
     870/    8D52 :                                                             ;and    r0, r1                                  
     871/    8D52 : 70 E0                                                       push    r0              ; 12
     872/    8D54 : 00 E5                                                       dec     r5              ;  6
     867/    8D56 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D58 :                                                             ;com    r0              ; 
     869/    8D58 : 42 01                                                       or      r0, r1          ;  6
     870/    8D5A :                                                             ;and    r0, r1                                  
     871/    8D5A : 70 E0                                                       push    r0              ; 12
     872/    8D5C : 00 E5                                                       dec     r5              ;  6
     867/    8D5E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D60 :                                                             ;com    r0              ; 
     869/    8D60 : 42 01                                                       or      r0, r1          ;  6
     870/    8D62 :                                                             ;and    r0, r1                                  
     871/    8D62 : 70 E0                                                       push    r0              ; 12
     872/    8D64 : 00 E5                                                       dec     r5              ;  6
     867/    8D66 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D68 :                                                             ;com    r0              ; 
     869/    8D68 : 42 01                                                       or      r0, r1          ;  6
     870/    8D6A :                                                             ;and    r0, r1                                  
     871/    8D6A : 70 E0                                                       push    r0              ; 12
     872/    8D6C : 00 E5                                                       dec     r5              ;  6
     867/    8D6E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D70 :                                                             ;com    r0              ; 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 46 - 11/21/2024 11:26:38


     869/    8D70 : 42 01                                                       or      r0, r1          ;  6
     870/    8D72 :                                                             ;and    r0, r1                                  
     871/    8D72 : 70 E0                                                       push    r0              ; 12
     872/    8D74 : 00 E5                                                       dec     r5              ;  6
     867/    8D76 : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D78 :                                                             ;com    r0              ; 
     869/    8D78 : 42 01                                                       or      r0, r1          ;  6
     870/    8D7A :                                                             ;and    r0, r1                                  
     871/    8D7A : 70 E0                                                       push    r0              ; 12
     872/    8D7C : 00 E5                                                       dec     r5              ;  6
     867/    8D7E : 82 04                                                       lde     r0, @rr4        ; 12
     868/    8D80 :                                                             ;com    r0              ; 
     869/    8D80 : 42 01                                                       or      r0, r1          ;  6
     870/    8D82 :                                                             ;and    r0, r1                                  
     871/    8D82 : 70 E0                                                       push    r0              ; 12
     872/    8D84 : 00 E5                                                       dec     r5              ;  6
     874/    8D86 :                                                                                     ; 36
     875/    8D86 : A0 EC                                               incw    rr12            ; next Farb-Byte
     876/    8D88 : E0 EF                                               rr      r15             ; next Farb-Bank
     877/    8D8A :                     
     878/    8D8A : 69 FE                                               ld      SPH, r6
     879/    8D8C : 79 FF                                               ld      SPL, r7
     880/    8D8E : 48 E6                                               ld      r4, r6
     881/    8D90 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     882/    8D93 : 58 E7                                               ld      r5, r7
     883/    8D95 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     884/    8D97 :                     
     885/    8D97 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     886/    8D99 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     887/    8D9B :                                                                             ;
     888/    8D9B :                                                     rept    40
     889/    8D9B :                                                             lde     r0, @rr4        ; 12
     890/    8D9B :                                                             ;com    r0
     891/    8D9B :                                                             ;and    r0, r1          
     892/    8D9B :                                                             or      r0, r1          ;  6
     893/    8D9B :                                                             push    r0              ; 12
     894/    8D9B :                                                             dec     r5              ;  6
     895/    8D9B :                                                     endm                            ; --
     889/    8D9B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8D9D :                                                             ;com    r0
     891/    8D9D :                                                             ;and    r0, r1          
     892/    8D9D : 42 01                                                       or      r0, r1          ;  6
     893/    8D9F : 70 E0                                                       push    r0              ; 12
     894/    8DA1 : 00 E5                                                       dec     r5              ;  6
     889/    8DA3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DA5 :                                                             ;com    r0
     891/    8DA5 :                                                             ;and    r0, r1          
     892/    8DA5 : 42 01                                                       or      r0, r1          ;  6
     893/    8DA7 : 70 E0                                                       push    r0              ; 12
     894/    8DA9 : 00 E5                                                       dec     r5              ;  6
     889/    8DAB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DAD :                                                             ;com    r0
     891/    8DAD :                                                             ;and    r0, r1          
     892/    8DAD : 42 01                                                       or      r0, r1          ;  6
     893/    8DAF : 70 E0                                                       push    r0              ; 12
     894/    8DB1 : 00 E5                                                       dec     r5              ;  6
     889/    8DB3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DB5 :                                                             ;com    r0
     891/    8DB5 :                                                             ;and    r0, r1          
     892/    8DB5 : 42 01                                                       or      r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 47 - 11/21/2024 11:26:38


     893/    8DB7 : 70 E0                                                       push    r0              ; 12
     894/    8DB9 : 00 E5                                                       dec     r5              ;  6
     889/    8DBB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DBD :                                                             ;com    r0
     891/    8DBD :                                                             ;and    r0, r1          
     892/    8DBD : 42 01                                                       or      r0, r1          ;  6
     893/    8DBF : 70 E0                                                       push    r0              ; 12
     894/    8DC1 : 00 E5                                                       dec     r5              ;  6
     889/    8DC3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DC5 :                                                             ;com    r0
     891/    8DC5 :                                                             ;and    r0, r1          
     892/    8DC5 : 42 01                                                       or      r0, r1          ;  6
     893/    8DC7 : 70 E0                                                       push    r0              ; 12
     894/    8DC9 : 00 E5                                                       dec     r5              ;  6
     889/    8DCB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DCD :                                                             ;com    r0
     891/    8DCD :                                                             ;and    r0, r1          
     892/    8DCD : 42 01                                                       or      r0, r1          ;  6
     893/    8DCF : 70 E0                                                       push    r0              ; 12
     894/    8DD1 : 00 E5                                                       dec     r5              ;  6
     889/    8DD3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DD5 :                                                             ;com    r0
     891/    8DD5 :                                                             ;and    r0, r1          
     892/    8DD5 : 42 01                                                       or      r0, r1          ;  6
     893/    8DD7 : 70 E0                                                       push    r0              ; 12
     894/    8DD9 : 00 E5                                                       dec     r5              ;  6
     889/    8DDB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DDD :                                                             ;com    r0
     891/    8DDD :                                                             ;and    r0, r1          
     892/    8DDD : 42 01                                                       or      r0, r1          ;  6
     893/    8DDF : 70 E0                                                       push    r0              ; 12
     894/    8DE1 : 00 E5                                                       dec     r5              ;  6
     889/    8DE3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DE5 :                                                             ;com    r0
     891/    8DE5 :                                                             ;and    r0, r1          
     892/    8DE5 : 42 01                                                       or      r0, r1          ;  6
     893/    8DE7 : 70 E0                                                       push    r0              ; 12
     894/    8DE9 : 00 E5                                                       dec     r5              ;  6
     889/    8DEB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DED :                                                             ;com    r0
     891/    8DED :                                                             ;and    r0, r1          
     892/    8DED : 42 01                                                       or      r0, r1          ;  6
     893/    8DEF : 70 E0                                                       push    r0              ; 12
     894/    8DF1 : 00 E5                                                       dec     r5              ;  6
     889/    8DF3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DF5 :                                                             ;com    r0
     891/    8DF5 :                                                             ;and    r0, r1          
     892/    8DF5 : 42 01                                                       or      r0, r1          ;  6
     893/    8DF7 : 70 E0                                                       push    r0              ; 12
     894/    8DF9 : 00 E5                                                       dec     r5              ;  6
     889/    8DFB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8DFD :                                                             ;com    r0
     891/    8DFD :                                                             ;and    r0, r1          
     892/    8DFD : 42 01                                                       or      r0, r1          ;  6
     893/    8DFF : 70 E0                                                       push    r0              ; 12
     894/    8E01 : 00 E5                                                       dec     r5              ;  6
     889/    8E03 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E05 :                                                             ;com    r0
     891/    8E05 :                                                             ;and    r0, r1          
     892/    8E05 : 42 01                                                       or      r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 48 - 11/21/2024 11:26:38


     893/    8E07 : 70 E0                                                       push    r0              ; 12
     894/    8E09 : 00 E5                                                       dec     r5              ;  6
     889/    8E0B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E0D :                                                             ;com    r0
     891/    8E0D :                                                             ;and    r0, r1          
     892/    8E0D : 42 01                                                       or      r0, r1          ;  6
     893/    8E0F : 70 E0                                                       push    r0              ; 12
     894/    8E11 : 00 E5                                                       dec     r5              ;  6
     889/    8E13 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E15 :                                                             ;com    r0
     891/    8E15 :                                                             ;and    r0, r1          
     892/    8E15 : 42 01                                                       or      r0, r1          ;  6
     893/    8E17 : 70 E0                                                       push    r0              ; 12
     894/    8E19 : 00 E5                                                       dec     r5              ;  6
     889/    8E1B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E1D :                                                             ;com    r0
     891/    8E1D :                                                             ;and    r0, r1          
     892/    8E1D : 42 01                                                       or      r0, r1          ;  6
     893/    8E1F : 70 E0                                                       push    r0              ; 12
     894/    8E21 : 00 E5                                                       dec     r5              ;  6
     889/    8E23 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E25 :                                                             ;com    r0
     891/    8E25 :                                                             ;and    r0, r1          
     892/    8E25 : 42 01                                                       or      r0, r1          ;  6
     893/    8E27 : 70 E0                                                       push    r0              ; 12
     894/    8E29 : 00 E5                                                       dec     r5              ;  6
     889/    8E2B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E2D :                                                             ;com    r0
     891/    8E2D :                                                             ;and    r0, r1          
     892/    8E2D : 42 01                                                       or      r0, r1          ;  6
     893/    8E2F : 70 E0                                                       push    r0              ; 12
     894/    8E31 : 00 E5                                                       dec     r5              ;  6
     889/    8E33 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E35 :                                                             ;com    r0
     891/    8E35 :                                                             ;and    r0, r1          
     892/    8E35 : 42 01                                                       or      r0, r1          ;  6
     893/    8E37 : 70 E0                                                       push    r0              ; 12
     894/    8E39 : 00 E5                                                       dec     r5              ;  6
     889/    8E3B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E3D :                                                             ;com    r0
     891/    8E3D :                                                             ;and    r0, r1          
     892/    8E3D : 42 01                                                       or      r0, r1          ;  6
     893/    8E3F : 70 E0                                                       push    r0              ; 12
     894/    8E41 : 00 E5                                                       dec     r5              ;  6
     889/    8E43 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E45 :                                                             ;com    r0
     891/    8E45 :                                                             ;and    r0, r1          
     892/    8E45 : 42 01                                                       or      r0, r1          ;  6
     893/    8E47 : 70 E0                                                       push    r0              ; 12
     894/    8E49 : 00 E5                                                       dec     r5              ;  6
     889/    8E4B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E4D :                                                             ;com    r0
     891/    8E4D :                                                             ;and    r0, r1          
     892/    8E4D : 42 01                                                       or      r0, r1          ;  6
     893/    8E4F : 70 E0                                                       push    r0              ; 12
     894/    8E51 : 00 E5                                                       dec     r5              ;  6
     889/    8E53 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E55 :                                                             ;com    r0
     891/    8E55 :                                                             ;and    r0, r1          
     892/    8E55 : 42 01                                                       or      r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 49 - 11/21/2024 11:26:38


     893/    8E57 : 70 E0                                                       push    r0              ; 12
     894/    8E59 : 00 E5                                                       dec     r5              ;  6
     889/    8E5B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E5D :                                                             ;com    r0
     891/    8E5D :                                                             ;and    r0, r1          
     892/    8E5D : 42 01                                                       or      r0, r1          ;  6
     893/    8E5F : 70 E0                                                       push    r0              ; 12
     894/    8E61 : 00 E5                                                       dec     r5              ;  6
     889/    8E63 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E65 :                                                             ;com    r0
     891/    8E65 :                                                             ;and    r0, r1          
     892/    8E65 : 42 01                                                       or      r0, r1          ;  6
     893/    8E67 : 70 E0                                                       push    r0              ; 12
     894/    8E69 : 00 E5                                                       dec     r5              ;  6
     889/    8E6B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E6D :                                                             ;com    r0
     891/    8E6D :                                                             ;and    r0, r1          
     892/    8E6D : 42 01                                                       or      r0, r1          ;  6
     893/    8E6F : 70 E0                                                       push    r0              ; 12
     894/    8E71 : 00 E5                                                       dec     r5              ;  6
     889/    8E73 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E75 :                                                             ;com    r0
     891/    8E75 :                                                             ;and    r0, r1          
     892/    8E75 : 42 01                                                       or      r0, r1          ;  6
     893/    8E77 : 70 E0                                                       push    r0              ; 12
     894/    8E79 : 00 E5                                                       dec     r5              ;  6
     889/    8E7B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E7D :                                                             ;com    r0
     891/    8E7D :                                                             ;and    r0, r1          
     892/    8E7D : 42 01                                                       or      r0, r1          ;  6
     893/    8E7F : 70 E0                                                       push    r0              ; 12
     894/    8E81 : 00 E5                                                       dec     r5              ;  6
     889/    8E83 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E85 :                                                             ;com    r0
     891/    8E85 :                                                             ;and    r0, r1          
     892/    8E85 : 42 01                                                       or      r0, r1          ;  6
     893/    8E87 : 70 E0                                                       push    r0              ; 12
     894/    8E89 : 00 E5                                                       dec     r5              ;  6
     889/    8E8B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E8D :                                                             ;com    r0
     891/    8E8D :                                                             ;and    r0, r1          
     892/    8E8D : 42 01                                                       or      r0, r1          ;  6
     893/    8E8F : 70 E0                                                       push    r0              ; 12
     894/    8E91 : 00 E5                                                       dec     r5              ;  6
     889/    8E93 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E95 :                                                             ;com    r0
     891/    8E95 :                                                             ;and    r0, r1          
     892/    8E95 : 42 01                                                       or      r0, r1          ;  6
     893/    8E97 : 70 E0                                                       push    r0              ; 12
     894/    8E99 : 00 E5                                                       dec     r5              ;  6
     889/    8E9B : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8E9D :                                                             ;com    r0
     891/    8E9D :                                                             ;and    r0, r1          
     892/    8E9D : 42 01                                                       or      r0, r1          ;  6
     893/    8E9F : 70 E0                                                       push    r0              ; 12
     894/    8EA1 : 00 E5                                                       dec     r5              ;  6
     889/    8EA3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8EA5 :                                                             ;com    r0
     891/    8EA5 :                                                             ;and    r0, r1          
     892/    8EA5 : 42 01                                                       or      r0, r1          ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 50 - 11/21/2024 11:26:38


     893/    8EA7 : 70 E0                                                       push    r0              ; 12
     894/    8EA9 : 00 E5                                                       dec     r5              ;  6
     889/    8EAB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8EAD :                                                             ;com    r0
     891/    8EAD :                                                             ;and    r0, r1          
     892/    8EAD : 42 01                                                       or      r0, r1          ;  6
     893/    8EAF : 70 E0                                                       push    r0              ; 12
     894/    8EB1 : 00 E5                                                       dec     r5              ;  6
     889/    8EB3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8EB5 :                                                             ;com    r0
     891/    8EB5 :                                                             ;and    r0, r1          
     892/    8EB5 : 42 01                                                       or      r0, r1          ;  6
     893/    8EB7 : 70 E0                                                       push    r0              ; 12
     894/    8EB9 : 00 E5                                                       dec     r5              ;  6
     889/    8EBB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8EBD :                                                             ;com    r0
     891/    8EBD :                                                             ;and    r0, r1          
     892/    8EBD : 42 01                                                       or      r0, r1          ;  6
     893/    8EBF : 70 E0                                                       push    r0              ; 12
     894/    8EC1 : 00 E5                                                       dec     r5              ;  6
     889/    8EC3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8EC5 :                                                             ;com    r0
     891/    8EC5 :                                                             ;and    r0, r1          
     892/    8EC5 : 42 01                                                       or      r0, r1          ;  6
     893/    8EC7 : 70 E0                                                       push    r0              ; 12
     894/    8EC9 : 00 E5                                                       dec     r5              ;  6
     889/    8ECB : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8ECD :                                                             ;com    r0
     891/    8ECD :                                                             ;and    r0, r1          
     892/    8ECD : 42 01                                                       or      r0, r1          ;  6
     893/    8ECF : 70 E0                                                       push    r0              ; 12
     894/    8ED1 : 00 E5                                                       dec     r5              ;  6
     889/    8ED3 : 82 04                                                       lde     r0, @rr4        ; 12
     890/    8ED5 :                                                             ;com    r0
     891/    8ED5 :                                                             ;and    r0, r1          
     892/    8ED5 : 42 01                                                       or      r0, r1          ;  6
     893/    8ED7 : 70 E0                                                       push    r0              ; 12
     894/    8ED9 : 00 E5                                                       dec     r5              ;  6
     896/    8EDB :                                                                                     ; 36
     897/    8EDB : A0 EC                                               incw    rr12            ; next Farb-Byte
     898/    8EDD : E0 EF                                               rr      r15             ; next Farb-Bank
     899/    8EDF :                     
     900/    8EDF : 69 FE                                               ld      SPH, r6
     901/    8EE1 : 79 FF                                               ld      SPL, r7
     902/    8EE3 : 48 E6                                               ld      r4, r6
     903/    8EE5 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     904/    8EE8 : 58 E7                                               ld      r5, r7
     905/    8EEA : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     906/    8EEC :                     
     907/    8EEC : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     908/    8EEE : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     909/    8EF0 :                                                                                     ;       wenig   oft
     910/    8EF0 :                                                     rept    40
     911/    8EF0 :                                                             lde     r0, @rr4        ; 12
     912/    8EF0 :                                                             ;com    r0              ;    
     913/    8EF0 :                                                             or      r0, r1          ;  6
     914/    8EF0 :                                                             ;and    r0, r1
     915/    8EF0 :                                                             push    r0              ; 12
     916/    8EF0 :                                                             dec     r5              ;  6
     917/    8EF0 :                                                     endm                            ; --
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 51 - 11/21/2024 11:26:38


     911/    8EF0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8EF2 :                                                             ;com    r0              ;    
     913/    8EF2 : 42 01                                                       or      r0, r1          ;  6
     914/    8EF4 :                                                             ;and    r0, r1
     915/    8EF4 : 70 E0                                                       push    r0              ; 12
     916/    8EF6 : 00 E5                                                       dec     r5              ;  6
     911/    8EF8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8EFA :                                                             ;com    r0              ;    
     913/    8EFA : 42 01                                                       or      r0, r1          ;  6
     914/    8EFC :                                                             ;and    r0, r1
     915/    8EFC : 70 E0                                                       push    r0              ; 12
     916/    8EFE : 00 E5                                                       dec     r5              ;  6
     911/    8F00 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F02 :                                                             ;com    r0              ;    
     913/    8F02 : 42 01                                                       or      r0, r1          ;  6
     914/    8F04 :                                                             ;and    r0, r1
     915/    8F04 : 70 E0                                                       push    r0              ; 12
     916/    8F06 : 00 E5                                                       dec     r5              ;  6
     911/    8F08 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F0A :                                                             ;com    r0              ;    
     913/    8F0A : 42 01                                                       or      r0, r1          ;  6
     914/    8F0C :                                                             ;and    r0, r1
     915/    8F0C : 70 E0                                                       push    r0              ; 12
     916/    8F0E : 00 E5                                                       dec     r5              ;  6
     911/    8F10 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F12 :                                                             ;com    r0              ;    
     913/    8F12 : 42 01                                                       or      r0, r1          ;  6
     914/    8F14 :                                                             ;and    r0, r1
     915/    8F14 : 70 E0                                                       push    r0              ; 12
     916/    8F16 : 00 E5                                                       dec     r5              ;  6
     911/    8F18 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F1A :                                                             ;com    r0              ;    
     913/    8F1A : 42 01                                                       or      r0, r1          ;  6
     914/    8F1C :                                                             ;and    r0, r1
     915/    8F1C : 70 E0                                                       push    r0              ; 12
     916/    8F1E : 00 E5                                                       dec     r5              ;  6
     911/    8F20 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F22 :                                                             ;com    r0              ;    
     913/    8F22 : 42 01                                                       or      r0, r1          ;  6
     914/    8F24 :                                                             ;and    r0, r1
     915/    8F24 : 70 E0                                                       push    r0              ; 12
     916/    8F26 : 00 E5                                                       dec     r5              ;  6
     911/    8F28 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F2A :                                                             ;com    r0              ;    
     913/    8F2A : 42 01                                                       or      r0, r1          ;  6
     914/    8F2C :                                                             ;and    r0, r1
     915/    8F2C : 70 E0                                                       push    r0              ; 12
     916/    8F2E : 00 E5                                                       dec     r5              ;  6
     911/    8F30 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F32 :                                                             ;com    r0              ;    
     913/    8F32 : 42 01                                                       or      r0, r1          ;  6
     914/    8F34 :                                                             ;and    r0, r1
     915/    8F34 : 70 E0                                                       push    r0              ; 12
     916/    8F36 : 00 E5                                                       dec     r5              ;  6
     911/    8F38 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F3A :                                                             ;com    r0              ;    
     913/    8F3A : 42 01                                                       or      r0, r1          ;  6
     914/    8F3C :                                                             ;and    r0, r1
     915/    8F3C : 70 E0                                                       push    r0              ; 12
     916/    8F3E : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 52 - 11/21/2024 11:26:38


     911/    8F40 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F42 :                                                             ;com    r0              ;    
     913/    8F42 : 42 01                                                       or      r0, r1          ;  6
     914/    8F44 :                                                             ;and    r0, r1
     915/    8F44 : 70 E0                                                       push    r0              ; 12
     916/    8F46 : 00 E5                                                       dec     r5              ;  6
     911/    8F48 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F4A :                                                             ;com    r0              ;    
     913/    8F4A : 42 01                                                       or      r0, r1          ;  6
     914/    8F4C :                                                             ;and    r0, r1
     915/    8F4C : 70 E0                                                       push    r0              ; 12
     916/    8F4E : 00 E5                                                       dec     r5              ;  6
     911/    8F50 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F52 :                                                             ;com    r0              ;    
     913/    8F52 : 42 01                                                       or      r0, r1          ;  6
     914/    8F54 :                                                             ;and    r0, r1
     915/    8F54 : 70 E0                                                       push    r0              ; 12
     916/    8F56 : 00 E5                                                       dec     r5              ;  6
     911/    8F58 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F5A :                                                             ;com    r0              ;    
     913/    8F5A : 42 01                                                       or      r0, r1          ;  6
     914/    8F5C :                                                             ;and    r0, r1
     915/    8F5C : 70 E0                                                       push    r0              ; 12
     916/    8F5E : 00 E5                                                       dec     r5              ;  6
     911/    8F60 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F62 :                                                             ;com    r0              ;    
     913/    8F62 : 42 01                                                       or      r0, r1          ;  6
     914/    8F64 :                                                             ;and    r0, r1
     915/    8F64 : 70 E0                                                       push    r0              ; 12
     916/    8F66 : 00 E5                                                       dec     r5              ;  6
     911/    8F68 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F6A :                                                             ;com    r0              ;    
     913/    8F6A : 42 01                                                       or      r0, r1          ;  6
     914/    8F6C :                                                             ;and    r0, r1
     915/    8F6C : 70 E0                                                       push    r0              ; 12
     916/    8F6E : 00 E5                                                       dec     r5              ;  6
     911/    8F70 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F72 :                                                             ;com    r0              ;    
     913/    8F72 : 42 01                                                       or      r0, r1          ;  6
     914/    8F74 :                                                             ;and    r0, r1
     915/    8F74 : 70 E0                                                       push    r0              ; 12
     916/    8F76 : 00 E5                                                       dec     r5              ;  6
     911/    8F78 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F7A :                                                             ;com    r0              ;    
     913/    8F7A : 42 01                                                       or      r0, r1          ;  6
     914/    8F7C :                                                             ;and    r0, r1
     915/    8F7C : 70 E0                                                       push    r0              ; 12
     916/    8F7E : 00 E5                                                       dec     r5              ;  6
     911/    8F80 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F82 :                                                             ;com    r0              ;    
     913/    8F82 : 42 01                                                       or      r0, r1          ;  6
     914/    8F84 :                                                             ;and    r0, r1
     915/    8F84 : 70 E0                                                       push    r0              ; 12
     916/    8F86 : 00 E5                                                       dec     r5              ;  6
     911/    8F88 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F8A :                                                             ;com    r0              ;    
     913/    8F8A : 42 01                                                       or      r0, r1          ;  6
     914/    8F8C :                                                             ;and    r0, r1
     915/    8F8C : 70 E0                                                       push    r0              ; 12
     916/    8F8E : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 53 - 11/21/2024 11:26:38


     911/    8F90 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F92 :                                                             ;com    r0              ;    
     913/    8F92 : 42 01                                                       or      r0, r1          ;  6
     914/    8F94 :                                                             ;and    r0, r1
     915/    8F94 : 70 E0                                                       push    r0              ; 12
     916/    8F96 : 00 E5                                                       dec     r5              ;  6
     911/    8F98 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8F9A :                                                             ;com    r0              ;    
     913/    8F9A : 42 01                                                       or      r0, r1          ;  6
     914/    8F9C :                                                             ;and    r0, r1
     915/    8F9C : 70 E0                                                       push    r0              ; 12
     916/    8F9E : 00 E5                                                       dec     r5              ;  6
     911/    8FA0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FA2 :                                                             ;com    r0              ;    
     913/    8FA2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FA4 :                                                             ;and    r0, r1
     915/    8FA4 : 70 E0                                                       push    r0              ; 12
     916/    8FA6 : 00 E5                                                       dec     r5              ;  6
     911/    8FA8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FAA :                                                             ;com    r0              ;    
     913/    8FAA : 42 01                                                       or      r0, r1          ;  6
     914/    8FAC :                                                             ;and    r0, r1
     915/    8FAC : 70 E0                                                       push    r0              ; 12
     916/    8FAE : 00 E5                                                       dec     r5              ;  6
     911/    8FB0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FB2 :                                                             ;com    r0              ;    
     913/    8FB2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FB4 :                                                             ;and    r0, r1
     915/    8FB4 : 70 E0                                                       push    r0              ; 12
     916/    8FB6 : 00 E5                                                       dec     r5              ;  6
     911/    8FB8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FBA :                                                             ;com    r0              ;    
     913/    8FBA : 42 01                                                       or      r0, r1          ;  6
     914/    8FBC :                                                             ;and    r0, r1
     915/    8FBC : 70 E0                                                       push    r0              ; 12
     916/    8FBE : 00 E5                                                       dec     r5              ;  6
     911/    8FC0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FC2 :                                                             ;com    r0              ;    
     913/    8FC2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FC4 :                                                             ;and    r0, r1
     915/    8FC4 : 70 E0                                                       push    r0              ; 12
     916/    8FC6 : 00 E5                                                       dec     r5              ;  6
     911/    8FC8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FCA :                                                             ;com    r0              ;    
     913/    8FCA : 42 01                                                       or      r0, r1          ;  6
     914/    8FCC :                                                             ;and    r0, r1
     915/    8FCC : 70 E0                                                       push    r0              ; 12
     916/    8FCE : 00 E5                                                       dec     r5              ;  6
     911/    8FD0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FD2 :                                                             ;com    r0              ;    
     913/    8FD2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FD4 :                                                             ;and    r0, r1
     915/    8FD4 : 70 E0                                                       push    r0              ; 12
     916/    8FD6 : 00 E5                                                       dec     r5              ;  6
     911/    8FD8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FDA :                                                             ;com    r0              ;    
     913/    8FDA : 42 01                                                       or      r0, r1          ;  6
     914/    8FDC :                                                             ;and    r0, r1
     915/    8FDC : 70 E0                                                       push    r0              ; 12
     916/    8FDE : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 54 - 11/21/2024 11:26:38


     911/    8FE0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FE2 :                                                             ;com    r0              ;    
     913/    8FE2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FE4 :                                                             ;and    r0, r1
     915/    8FE4 : 70 E0                                                       push    r0              ; 12
     916/    8FE6 : 00 E5                                                       dec     r5              ;  6
     911/    8FE8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FEA :                                                             ;com    r0              ;    
     913/    8FEA : 42 01                                                       or      r0, r1          ;  6
     914/    8FEC :                                                             ;and    r0, r1
     915/    8FEC : 70 E0                                                       push    r0              ; 12
     916/    8FEE : 00 E5                                                       dec     r5              ;  6
     911/    8FF0 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FF2 :                                                             ;com    r0              ;    
     913/    8FF2 : 42 01                                                       or      r0, r1          ;  6
     914/    8FF4 :                                                             ;and    r0, r1
     915/    8FF4 : 70 E0                                                       push    r0              ; 12
     916/    8FF6 : 00 E5                                                       dec     r5              ;  6
     911/    8FF8 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    8FFA :                                                             ;com    r0              ;    
     913/    8FFA : 42 01                                                       or      r0, r1          ;  6
     914/    8FFC :                                                             ;and    r0, r1
     915/    8FFC : 70 E0                                                       push    r0              ; 12
     916/    8FFE : 00 E5                                                       dec     r5              ;  6
     911/    9000 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    9002 :                                                             ;com    r0              ;    
     913/    9002 : 42 01                                                       or      r0, r1          ;  6
     914/    9004 :                                                             ;and    r0, r1
     915/    9004 : 70 E0                                                       push    r0              ; 12
     916/    9006 : 00 E5                                                       dec     r5              ;  6
     911/    9008 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    900A :                                                             ;com    r0              ;    
     913/    900A : 42 01                                                       or      r0, r1          ;  6
     914/    900C :                                                             ;and    r0, r1
     915/    900C : 70 E0                                                       push    r0              ; 12
     916/    900E : 00 E5                                                       dec     r5              ;  6
     911/    9010 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    9012 :                                                             ;com    r0              ;    
     913/    9012 : 42 01                                                       or      r0, r1          ;  6
     914/    9014 :                                                             ;and    r0, r1
     915/    9014 : 70 E0                                                       push    r0              ; 12
     916/    9016 : 00 E5                                                       dec     r5              ;  6
     911/    9018 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    901A :                                                             ;com    r0              ;    
     913/    901A : 42 01                                                       or      r0, r1          ;  6
     914/    901C :                                                             ;and    r0, r1
     915/    901C : 70 E0                                                       push    r0              ; 12
     916/    901E : 00 E5                                                       dec     r5              ;  6
     911/    9020 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    9022 :                                                             ;com    r0              ;    
     913/    9022 : 42 01                                                       or      r0, r1          ;  6
     914/    9024 :                                                             ;and    r0, r1
     915/    9024 : 70 E0                                                       push    r0              ; 12
     916/    9026 : 00 E5                                                       dec     r5              ;  6
     911/    9028 : 82 04                                                       lde     r0, @rr4        ; 12
     912/    902A :                                                             ;com    r0              ;    
     913/    902A : 42 01                                                       or      r0, r1          ;  6
     914/    902C :                                                             ;and    r0, r1
     915/    902C : 70 E0                                                       push    r0              ; 12
     916/    902E : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 55 - 11/21/2024 11:26:38


     918/    9030 :                                                                                     ; 36
     919/    9030 : A0 EC                                               incw    rr12            ; next Farb-Byte
     920/    9032 : E0 EF                                               rr      r15             ; next Farb-Bank
     921/    9034 :                     
     922/    9034 : 80 E6                                       decw    rr6
     923/    9036 :                                             ;-----------------------
     924/    9036 : 06 E7 28                                    add     R7, #28h        ; 10 BWS-lo + 28h (40)
     925/    9039 : 7B 08                                       jr      C,  vram100     ; 10/12
     926/    903B : 4B 07                                       jr      OV, vram200     ; 10/12
     927/    903D : 66 E7 78                                    tcm     R7, #78h        ; 10
     928/    9040 : EB 08                                       jr      NZ, vram300     ; 10/12
     929/    9042 : 0B                                          db      0Bh             ; 10/12 0Bh = JR F (also niemals), irgendwo hin
     930/    9043 :                                                                     ;       Distanz (opcode inc r6)
     931/    9043 :                                                                     ; wenn Z = 0, springe nicht (2 Bytes)
     932/    9043 :                                                                     ; wenn Z = 1, Distanz wird als "inc r6" gelesen
     933/    9043 : 6E                                 vram100: inc     R6              ; 6
     934/    9044 : 06 E7 08                           vram200: add     R7, #8          ; 10
     935/    9047 : 16 E6 00                                    adc     R6, #0          ; 10
     936/    904A :                                    vram300: ;-----------------------
     937/    904A :                     
     938/    904A : 00 EA                               dec     r10
     939/    904C : ED 8A DA                            jp      nz, dl22
     940/    904F :                     
     941/    904F : E4 6A FE                    dlr11:  ld      SPH, saveH
     942/    9052 : E4 6B FF                            ld      SPL, saveL
     943/    9055 :                     
     944/    9055 : 50 E1                               pop     r1
     945/    9057 : 50 E0                               pop     r0
     946/    9059 :                     
     947/    9059 : 9F                                  EI
     948/    905A : AF                                  ret
     949/    905B :                     
     950/    905B : E6 46 04            dlrret2:        ld      var_T_hi, #4
     951/    905E : D6 84 1C                            call    tLine
     952/    9061 : 8B EC                               jr      dlr11
     953/    9063 :                     
     954/    9063 :                     ;------------------------------------------------------------------------------
     955/    9063 :                     ; Erzeugt eine Kopie der HELL-Bank des VRAM ab 0C000H im RAM fÃ¼r die Erkennung
     956/    9063 :                     ; von hell-grÃ¼n- und weiss-Bitmaps im VRAM, um bei der Animation diese Stellen
     957/    9063 :                     ; nicht zu Ã¼berschreiben.
     958/    9063 :                     ;------------------------------------------------------------------------------
     959/    9063 :                     
     960/    9063 :                     makeMaskMap:
     961/    9063 : EC 60                               ld      r14, #60h
     962/    9065 : FC EF                               ld      r15, #11101111b         ; hell: Farb-BÃ¤nke = RGBHxxxx
     963/    9067 : 92 FE                               lde     @rr14, r15              ; Farb-Bank einschalten
     964/    9069 :                     
     965/    9069 : 6C 40                               ld      r6, #hi(04000h)
     966/    906B : 7C 00                               ld      r7, #lo(04000h)
     967/    906D : 4C C0                               ld      r4, #hi(0C000h)         ; VRAM-Maske
     968/    906F : 5C 00                               ld      r5, #lo(0C000h)
     969/    9071 :                     
     970/    9071 : 82 06                       mmm1:   lde     r0, @rr6
     971/    9073 : 92 04                               lde     @rr4, r0
     972/    9075 : A0 E4                               incw    rr4
     973/    9077 : A0 E6                               incw    rr6
     974/    9079 : A6 E6 60                            cp      r6, #60h
     975/    907C : EB F3                               jr      nz, mmm1
     976/    907E :                     
     977/    907E : AF                                  ret
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 56 - 11/21/2024 11:26:38


     978/    907F :                     
     979/    907F :                     ;------------------------------------------------------------------------------         
     980/    907F :                                     align   100h
     981/    9100 :                     cLines:
     982/    9100 :                                     ;       R     G     B     H             einfarbige Linien
     983/    9100 :                     ;10             
     984/    9100 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     985/    9104 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     986/    9108 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     987/    910C : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     988/    9110 :                     ;9
     989/    9110 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     990/    9114 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     991/    9118 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     992/    911C : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     993/    9120 :                     ;8
     994/    9120 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     995/    9124 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     996/    9128 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     997/    912C : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     998/    9130 :                     ;7
     999/    9130 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1000/    9134 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1001/    9138 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1002/    913C : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh          
    1003/    9140 :                     ;6
    1004/    9140 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1005/    9144 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1006/    9148 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1007/    914C : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1008/    9150 :                     ;5
    1009/    9150 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
    1010/    9154 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
    1011/    9158 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
    1012/    915C : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
    1013/    9160 :                     ;4
    1014/    9160 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1015/    9164 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1016/    9168 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1017/    916C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1018/    9170 :                     ;3
    1019/    9170 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1020/    9174 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1021/    9178 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1022/    917C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1023/    9180 :                     ;2
    1024/    9180 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1025/    9184 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1026/    9188 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1027/    918C : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1028/    9190 :                     ;1
    1029/    9190 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1030/    9194 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1031/    9198 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1032/    919C : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1033/    91A0 :                     
    1034/    91A0 :                     ;------------------------------------------------------------------------------
    1035/    91A0 :                                     align   100h
    1036/    9200 :                     mcLines:
    1037/    9200 :                                     ;       R     G     B     H             mehrfarbige Linien
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 57 - 11/21/2024 11:26:38


    1038/    9200 :                     ;10             
    1039/    9200 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1040/    9204 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
    1041/    9208 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1042/    920C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1043/    9210 :                     ;9
    1044/    9210 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1045/    9214 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1046/    9218 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1047/    921C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1048/    9220 :                     ;8
    1049/    9220 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1050/    9224 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1051/    9228 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1052/    922C : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1053/    9230 :                     ;7
    1054/    9230 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1055/    9234 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1056/    9238 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1057/    923C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1058/    9240 :                     ;6
    1059/    9240 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1060/    9244 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1061/    9248 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1062/    924C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1063/    9250 :                     ;5
    1064/    9250 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1065/    9254 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1066/    9258 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1067/    925C : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1068/    9260 :                     ;4
    1069/    9260 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1070/    9264 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1071/    9268 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1072/    926C : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1073/    9270 :                     ;3
    1074/    9270 : 00 00 FF FF                         db      000h, 000h, 0FFh, 0FFh
    1075/    9274 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1076/    9278 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1077/    927C : 00 00 FF FF                         db      000h, 000h, 0FFh, 0FFh
    1078/    9280 :                     ;2
    1079/    9280 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1080/    9284 : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1081/    9288 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1082/    928C : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1083/    9290 :                     ;1
    1084/    9290 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h  
    1085/    9294 : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1086/    9298 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1087/    929C : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1088/    92A0 :                     
    1089/    92A0 :                     ;------------------------------------------------------------------------------
    1090/    92A0 :                     
    1091/    92A0 :                                     ;       R     G     B     H             Hintergrund
    1092/    92A0 : 00 00 FF 00         bg:             db      000h, 000h, 0FFh, 000h
    1093/    92A4 : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1094/    92A8 : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1095/    92AC : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1096/    92B0 :                     
    1097/    92B0 :                     ;------------------------------------------------------------------------------
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 58 - 11/21/2024 11:26:38


    1098/    92B0 :                     
    1099/    92B0 : =40H                 XW              equ     64                              ; 64 Y-Werte
    1100/    92B0 : =3FH                 cmask           equ     00111111b                       ; Maske fÃ¼r Ring-Puffer
    1101/    92B0 : =3.141592            PI              equ     3.141592
    1102/    92B0 :                     
    1103/    92B0 :                     ;------------------------------------------------------------------------------
    1104/    92B0 :                                     align 100h
    1105/    9300 :                     
    1106/    9300 :                     Y_POS_RING_BUFFER:
    1107/    9300 :                     
    1108/    9300 : =0H                  x       set     0
    1109/    9300 :                             while x<=XW-1
    1110/    9300 :                     
    1111/    9300 :                     value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9300 :                     
    1113/    9300 :                                     if value > 0
    1114/    9300 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9300 :                                     endif
    1116/    9300 :                     
    1117/    9300 :                     value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9300 :                                     db      value
    1119/    9300 :                                     ;message "value: \{value}"
    1120/    9300 :                     x               set     x+1     
    1121/    9300 :                             endm
    1110/    9300 :                     
    1111/    9300 : =-0.9202449857364    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9300 :                     
    1113/    9300 : =>FALSE                              if value > 0
    1114/    9300 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9300 : [1113]                               endif
    1116/    9300 :                     
    1117/    9300 : =1BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9300 : 1B                                  db      value
    1119/    9301 :                                     ;message "value: \{value}"
    1120/    9301 : =1H                  x               set     x+1     
    1110/    9301 :                     
    1111/    9301 : =-0.9199453082903    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9301 :                     
    1113/    9301 : =>FALSE                              if value > 0
    1114/    9301 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9301 : [1113]                               endif
    1116/    9301 :                     
    1117/    9301 : =1BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9301 : 1B                                  db      value
    1119/    9302 :                                     ;message "value: \{value}"
    1120/    9302 : =2H                  x               set     x+1     
    1110/    9302 :                     
    1111/    9302 : =-0.9024984038887    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9302 :                     
    1113/    9302 : =>FALSE                              if value > 0
    1114/    9302 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9302 : [1113]                               endif
    1116/    9302 :                     
    1117/    9302 : =1CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9302 : 1C                                  db      value
    1119/    9303 :                                     ;message "value: \{value}"
    1120/    9303 : =3H                  x               set     x+1     
    1110/    9303 :                     
    1111/    9303 : =-0.8693994265888    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9303 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 59 - 11/21/2024 11:26:38


    1113/    9303 : =>FALSE                              if value > 0
    1114/    9303 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9303 : [1113]                               endif
    1116/    9303 :                     
    1117/    9303 : =1EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9303 : 1E                                  db      value
    1119/    9304 :                                     ;message "value: \{value}"
    1120/    9304 : =4H                  x               set     x+1     
    1110/    9304 :                     
    1111/    9304 : =-0.8225617573113    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9304 :                     
    1113/    9304 : =>FALSE                              if value > 0
    1114/    9304 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9304 : [1113]                               endif
    1116/    9304 :                     
    1117/    9304 : =21H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9304 : 21                                  db      value
    1119/    9305 :                                     ;message "value: \{value}"
    1120/    9305 : =5H                  x               set     x+1     
    1110/    9305 :                     
    1111/    9305 : =-0.7642372966198    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9305 :                     
    1113/    9305 : =>FALSE                              if value > 0
    1114/    9305 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9305 : [1113]                               endif
    1116/    9305 :                     
    1117/    9305 : =25H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9305 : 25                                  db      value
    1119/    9306 :                                     ;message "value: \{value}"
    1120/    9306 : =6H                  x               set     x+1     
    1110/    9306 :                     
    1111/    9306 : =-0.6969255729002    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9306 :                     
    1113/    9306 : =>FALSE                              if value > 0
    1114/    9306 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9306 : [1113]                               endif
    1116/    9306 :                     
    1117/    9306 : =29H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9306 : 29                                  db      value
    1119/    9307 :                                     ;message "value: \{value}"
    1120/    9307 : =7H                  x               set     x+1     
    1110/    9307 :                     
    1111/    9307 : =-0.6232752007763    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9307 :                     
    1113/    9307 : =>FALSE                              if value > 0
    1114/    9307 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9307 : [1113]                               endif
    1116/    9307 :                     
    1117/    9307 : =2EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9307 : 2E                                  db      value
    1119/    9308 :                                     ;message "value: \{value}"
    1120/    9308 : =8H                  x               set     x+1     
    1110/    9308 :                     
    1111/    9308 : =-0.5459815005898    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9308 :                     
    1113/    9308 : =>FALSE                              if value > 0
    1114/    9308 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9308 : [1113]                               endif
    1116/    9308 :                     
    1117/    9308 : =33H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 60 - 11/21/2024 11:26:38


    1118/    9308 : 33                                  db      value
    1119/    9309 :                                     ;message "value: \{value}"
    1120/    9309 : =9H                  x               set     x+1     
    1110/    9309 :                     
    1111/    9309 : =-0.4676842191222    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9309 :                     
    1113/    9309 : =>FALSE                              if value > 0
    1114/    9309 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9309 : [1113]                               endif
    1116/    9309 :                     
    1117/    9309 : =38H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9309 : 38                                  db      value
    1119/    930A :                                     ;message "value: \{value}"
    1120/    930A : =0AH                 x               set     x+1     
    1110/    930A :                     
    1111/    930A : =-0.3908692695615    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    930A :                     
    1113/    930A : =>FALSE                              if value > 0
    1114/    930A :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930A : [1113]                               endif
    1116/    930A :                     
    1117/    930A : =3CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930A : 3C                                  db      value
    1119/    930B :                                     ;message "value: \{value}"
    1120/    930B : =0BH                 x               set     x+1     
    1110/    930B :                     
    1111/    930B : =-0.3177782361171    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    930B :                     
    1113/    930B : =>FALSE                              if value > 0
    1114/    930B :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930B : [1113]                               endif
    1116/    930B :                     
    1117/    930B : =41H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930B : 41                                  db      value
    1119/    930C :                                     ;message "value: \{value}"
    1120/    930C : =0CH                 x               set     x+1     
    1110/    930C :                     
    1111/    930C : =-0.2503290724906    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    930C :                     
    1113/    930C : =>FALSE                              if value > 0
    1114/    930C :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930C : [1113]                               endif
    1116/    930C :                     
    1117/    930C : =45H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930C : 45                                  db      value
    1119/    930D :                                     ;message "value: \{value}"
    1120/    930D : =0DH                 x               set     x+1     
    1110/    930D :                     
    1111/    930D : =-0.1900509757918    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    930D :                     
    1113/    930D : =>FALSE                              if value > 0
    1114/    930D :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930D : [1113]                               endif
    1116/    930D :                     
    1117/    930D : =49H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930D : 49                                  db      value
    1119/    930E :                                     ;message "value: \{value}"
    1120/    930E : =0EH                 x               set     x+1     
    1110/    930E :                     
    1111/    930E : =-0.1380358560616    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 61 - 11/21/2024 11:26:38


    1112/    930E :                     
    1113/    930E : =>FALSE                              if value > 0
    1114/    930E :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930E : [1113]                               endif
    1116/    930E :                     
    1117/    930E : =4DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930E : 4D                                  db      value
    1119/    930F :                                     ;message "value: \{value}"
    1120/    930F : =0FH                 x               set     x+1     
    1110/    930F :                     
    1111/    930F : =-0.09490816780528   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    930F :                     
    1113/    930F : =>FALSE                              if value > 0
    1114/    930F :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    930F : [1113]                               endif
    1116/    930F :                     
    1117/    930F : =4FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    930F : 4F                                  db      value
    1119/    9310 :                                     ;message "value: \{value}"
    1120/    9310 : =10H                 x               set     x+1     
    1110/    9310 :                     
    1111/    9310 : =-0.06081414932887   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9310 :                     
    1113/    9310 : =>FALSE                              if value > 0
    1114/    9310 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9310 : [1113]                               endif
    1116/    9310 :                     
    1117/    9310 : =52H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9310 : 52                                  db      value
    1119/    9311 :                                     ;message "value: \{value}"
    1120/    9311 : =11H                 x               set     x+1     
    1110/    9311 :                     
    1111/    9311 : =-0.03543075592429   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9311 :                     
    1113/    9311 : =>FALSE                              if value > 0
    1114/    9311 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9311 : [1113]                               endif
    1116/    9311 :                     
    1117/    9311 : =53H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9311 : 53                                  db      value
    1119/    9312 :                                     ;message "value: \{value}"
    1120/    9312 : =12H                 x               set     x+1     
    1110/    9312 :                     
    1111/    9312 : =-0.01799380345378   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9312 :                     
    1113/    9312 : =>FALSE                              if value > 0
    1114/    9312 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9312 : [1113]                               endif
    1116/    9312 :                     
    1117/    9312 : =54H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9312 : 54                                  db      value
    1119/    9313 :                                     ;message "value: \{value}"
    1120/    9313 : =13H                 x               set     x+1     
    1110/    9313 :                     
    1111/    9313 : =-0.007344089311331  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9313 :                     
    1113/    9313 : =>FALSE                              if value > 0
    1114/    9313 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9313 : [1113]                               endif
    1116/    9313 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 62 - 11/21/2024 11:26:38


    1117/    9313 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9313 : 55                                  db      value
    1119/    9314 :                                     ;message "value: \{value}"
    1120/    9314 : =14H                 x               set     x+1     
    1110/    9314 :                     
    1111/    9314 : =-0.001989557010028  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9314 :                     
    1113/    9314 : =>FALSE                              if value > 0
    1114/    9314 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9314 : [1113]                               endif
    1116/    9314 :                     
    1117/    9314 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9314 : 55                                  db      value
    1119/    9315 :                                     ;message "value: \{value}"
    1120/    9315 : =15H                 x               set     x+1     
    1110/    9315 :                     
    1111/    9315 : =-1.809457845311E-4  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9315 :                     
    1113/    9315 : =>FALSE                              if value > 0
    1114/    9315 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9315 : [1113]                               endif
    1116/    9315 :                     
    1117/    9315 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9315 : 55                                  db      value
    1119/    9316 :                                     ;message "value: \{value}"
    1120/    9316 : =16H                 x               set     x+1     
    1110/    9316 :                     
    1111/    9316 : =2.1583039233153E-6  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9316 :                     
    1113/    9316 : =>TRUE                               if value > 0
    1114/    9316 : =3.3453710811393E-6  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9316 : [1113]                               endif
    1116/    9316 :                     
    1117/    9316 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9316 : 56                                  db      value
    1119/    9317 :                                     ;message "value: \{value}"
    1120/    9317 : =17H                 x               set     x+1     
    1110/    9317 :                     
    1111/    9317 : =5.5835797905561E-4  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9317 :                     
    1113/    9317 : =>TRUE                               if value > 0
    1114/    9317 : =8.6545486753635E-4  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9317 : [1113]                               endif
    1116/    9317 :                     
    1117/    9317 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9317 : 56                                  db      value
    1119/    9318 :                                     ;message "value: \{value}"
    1120/    9318 : =18H                 x               set     x+1     
    1110/    9318 :                     
    1111/    9318 : =0.0034683242046244  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9318 :                     
    1113/    9318 : =>TRUE                               if value > 0
    1114/    9318 : =0.0053759025171678  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9318 : [1113]                               endif
    1116/    9318 :                     
    1117/    9318 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9318 : 56                                  db      value
    1119/    9319 :                                     ;message "value: \{value}"
    1120/    9319 : =19H                 x               set     x+1     
    1110/    9319 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 63 - 11/21/2024 11:26:38


    1111/    9319 : =0.010599399358057   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9319 :                     
    1113/    9319 : =>TRUE                               if value > 0
    1114/    9319 : =0.016429069004985   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9319 : [1113]                               endif
    1116/    9319 :                     
    1117/    9319 : =57H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9319 : 57                                  db      value
    1119/    931A :                                     ;message "value: \{value}"
    1120/    931A : =1AH                 x               set     x+1     
    1110/    931A :                     
    1111/    931A : =0.023614775852012   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931A :                     
    1113/    931A : =>TRUE                               if value > 0
    1114/    931A : =0.036602902570615   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931A : [1113]                               endif
    1116/    931A :                     
    1117/    931A : =58H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931A : 58                                  db      value
    1119/    931B :                                     ;message "value: \{value}"
    1120/    931B : =1BH                 x               set     x+1     
    1110/    931B :                     
    1111/    931B : =0.043890923979917   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931B :                     
    1113/    931B : =>TRUE                               if value > 0
    1114/    931B : =0.068030932168865   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931B : [1113]                               endif
    1116/    931B :                     
    1117/    931B : =5AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931B : 5A                                  db      value
    1119/    931C :                                     ;message "value: \{value}"
    1120/    931C : =1CH                 x               set     x+1     
    1110/    931C :                     
    1111/    931C : =0.072446621859215   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931C :                     
    1113/    931C : =>TRUE                               if value > 0
    1114/    931C : =0.11229226388171    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931C : [1113]                               endif
    1116/    931C :                     
    1117/    931C : =5DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931C : 5D                                  db      value
    1119/    931D :                                     ;message "value: \{value}"
    1120/    931D : =1DH                 x               set     x+1     
    1110/    931D :                     
    1111/    931D : =0.10988648886442    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931D :                     
    1113/    931D : =>TRUE                               if value > 0
    1114/    931D : =0.17032405773981    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931D : [1113]                               endif
    1116/    931D :                     
    1117/    931D : =60H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931D : 60                                  db      value
    1119/    931E :                                     ;message "value: \{value}"
    1120/    931E : =1EH                 x               set     x+1     
    1110/    931E :                     
    1111/    931E : =0.15636135928526    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931E :                     
    1113/    931E : =>TRUE                               if value > 0
    1114/    931E : =0.24236010689217    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931E : [1113]                               endif
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 64 - 11/21/2024 11:26:38


    1116/    931E :                     
    1117/    931E : =65H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931E : 65                                  db      value
    1119/    931F :                                     ;message "value: \{value}"
    1120/    931F : =1FH                 x               set     x+1     
    1110/    931F :                     
    1111/    931F : =0.21154717688343    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    931F :                     
    1113/    931F : =>TRUE                               if value > 0
    1114/    931F : =0.32789812416946    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    931F : [1113]                               endif
    1116/    931F :                     
    1117/    931F : =6AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    931F : 6A                                  db      value
    1119/    9320 :                                     ;message "value: \{value}"
    1120/    9320 : =20H                 x               set     x+1     
    1110/    9320 :                     
    1111/    9320 : =0.27464336885167    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9320 :                     
    1113/    9320 : =>TRUE                               if value > 0
    1114/    9320 : =0.42569722171999    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9320 : [1113]                               endif
    1116/    9320 :                     
    1117/    9320 : =71H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9320 : 71                                  db      value
    1119/    9321 :                                     ;message "value: \{value}"
    1120/    9321 : =21H                 x               set     x+1     
    1110/    9321 :                     
    1111/    9321 : =0.34439089725339    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9321 :                     
    1113/    9321 : =>TRUE                               if value > 0
    1114/    9321 : =0.53380589074263    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9321 : [1113]                               endif
    1116/    9321 :                     
    1117/    9321 : =78H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9321 : 78                                  db      value
    1119/    9322 :                                     ;message "value: \{value}"
    1120/    9322 : =22H                 x               set     x+1     
    1110/    9322 :                     
    1111/    9322 : =0.41910941668313    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9322 :                     
    1113/    9322 : =>TRUE                               if value > 0
    1114/    9322 : =0.64961959585884    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9322 : [1113]                               endif
    1116/    9322 :                     
    1117/    9322 : =7FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9322 : 7F                                  db      value
    1119/    9323 :                                     ;message "value: \{value}"
    1120/    9323 : =23H                 x               set     x+1     
    1110/    9323 :                     
    1111/    9323 : =0.49675221831376    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9323 :                     
    1113/    9323 : =>TRUE                               if value > 0
    1114/    9323 : =0.76996593838632    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9323 : [1113]                               endif
    1116/    9323 :                     
    1117/    9323 : =87H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9323 : 87                                  db      value
    1119/    9324 :                                     ;message "value: \{value}"
    1120/    9324 : =24H                 x               set     x+1     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 65 - 11/21/2024 11:26:38


    1110/    9324 :                     
    1111/    9324 : =0.57497694161275    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9324 :                     
    1113/    9324 : =>TRUE                               if value > 0
    1114/    9324 : =0.89121425949977    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9324 : [1113]                               endif
    1116/    9324 :                     
    1117/    9324 : =8FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9324 : 8F                                  db      value
    1119/    9325 :                                     ;message "value: \{value}"
    1120/    9325 : =25H                 x               set     x+1     
    1110/    9325 :                     
    1111/    9325 : =0.65122941280386    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9325 :                     
    1113/    9325 : =>TRUE                               if value > 0
    1114/    9325 : =1.00940558984599    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9325 : [1113]                               endif
    1116/    9325 :                     
    1117/    9325 : =96H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9325 : 96                                  db      value
    1119/    9326 :                                     ;message "value: \{value}"
    1120/    9326 : =26H                 x               set     x+1     
    1110/    9326 :                     
    1111/    9326 : =0.72283744769894    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9326 :                     
    1113/    9326 : =>TRUE                               if value > 0
    1114/    9326 : =1.120398043933386   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9326 : [1113]                               endif
    1116/    9326 :                     
    1117/    9326 : =9DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9326 : 9D                                  db      value
    1119/    9327 :                                     ;message "value: \{value}"
    1120/    9327 : =27H                 x               set     x+1     
    1110/    9327 :                     
    1111/    9327 : =0.78711105602905    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9327 :                     
    1113/    9327 : =>TRUE                               if value > 0
    1114/    9327 : =1.220022136845011   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9327 : [1113]                               endif
    1116/    9327 :                     
    1117/    9327 : =0A4H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9327 : A4                                  db      value
    1119/    9328 :                                     ;message "value: \{value}"
    1120/    9328 : =28H                 x               set     x+1     
    1110/    9328 :                     
    1111/    9328 : =0.84144522042338    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9328 :                     
    1113/    9328 : =>TRUE                               if value > 0
    1114/    9328 : =1.304240091656226   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9328 : [1113]                               endif
    1116/    9328 :                     
    1117/    9328 : =0A9H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9328 : A9                                  db      value
    1119/    9329 :                                     ;message "value: \{value}"
    1120/    9329 : =29H                 x               set     x+1     
    1110/    9329 :                     
    1111/    9329 : =0.88342130603722    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9329 :                     
    1113/    9329 : =>TRUE                               if value > 0
    1114/    9329 : =1.369303024357808   value           set     value*1.55                      ; untere "Halbwelle" strecken
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 66 - 11/21/2024 11:26:38


    1115/    9329 : [1113]                               endif
    1116/    9329 :                     
    1117/    9329 : =0ADH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9329 : AD                                  db      value
    1119/    932A :                                     ;message "value: \{value}"
    1120/    932A : =2AH                 x               set     x+1     
    1110/    932A :                     
    1111/    932A : =0.91090319119263    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932A :                     
    1113/    932A : =>TRUE                               if value > 0
    1114/    932A : =1.411899946348597   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932A : [1113]                               endif
    1116/    932A :                     
    1117/    932A : =0B0H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932A : B0                                  db      value
    1119/    932B :                                     ;message "value: \{value}"
    1120/    932B : =2BH                 x               set     x+1     
    1110/    932B :                     
    1111/    932B : =0.92212439412305    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932B :                     
    1113/    932B : =>TRUE                               if value > 0
    1114/    932B : =1.429292810890651   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932B : [1113]                               endif
    1116/    932B :                     
    1117/    932B : =0B1H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932B : B1                                  db      value
    1119/    932C :                                     ;message "value: \{value}"
    1120/    932C : =2CH                 x               set     x+1     
    1110/    932C :                     
    1111/    932C : =0.91576279908597    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932C :                     
    1113/    932C : =>TRUE                               if value > 0
    1114/    932C : =1.419432338583171   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932C : [1113]                               endif
    1116/    932C :                     
    1117/    932C : =0B0H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932C : B0                                  db      value
    1119/    932D :                                     ;message "value: \{value}"
    1120/    932D : =2DH                 x               set     x+1     
    1110/    932D :                     
    1111/    932D : =0.89100004427588    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932D :                     
    1113/    932D : =>TRUE                               if value > 0
    1114/    932D : =1.381050068627569   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932D : [1113]                               endif
    1116/    932D :                     
    1117/    932D : =0AEH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932D : AE                                  db      value
    1119/    932E :                                     ;message "value: \{value}"
    1120/    932E : =2EH                 x               set     x+1     
    1110/    932E :                     
    1111/    932E : =0.84756320666671    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932E :                     
    1113/    932E : =>TRUE                               if value > 0
    1114/    932E : =1.313722970333525   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932E : [1113]                               endif
    1116/    932E :                     
    1117/    932E : =0AAH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932E : AA                                  db      value
    1119/    932F :                                     ;message "value: \{value}"
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 67 - 11/21/2024 11:26:38


    1120/    932F : =2FH                 x               set     x+1     
    1110/    932F :                     
    1111/    932F : =0.78574708328507    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    932F :                     
    1113/    932F : =>TRUE                               if value > 0
    1114/    932F : =1.217907979091796   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    932F : [1113]                               endif
    1116/    932F :                     
    1117/    932F : =0A3H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    932F : A3                                  db      value
    1119/    9330 :                                     ;message "value: \{value}"
    1120/    9330 : =30H                 x               set     x+1     
    1110/    9330 :                     
    1111/    9330 : =0.70641609908267    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9330 :                     
    1113/    9330 : =>TRUE                               if value > 0
    1114/    9330 : =1.094944953578129   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9330 : [1113]                               endif
    1116/    9330 :                     
    1117/    9330 : =9CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9330 : 9C                                  db      value
    1119/    9331 :                                     ;message "value: \{value}"
    1120/    9331 : =31H                 x               set     x+1     
    1110/    9331 :                     
    1111/    9331 : =0.61098564061624    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9331 :                     
    1113/    9331 : =>TRUE                               if value > 0
    1114/    9331 : =0.94702774295515    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9331 : [1113]                               endif
    1116/    9331 :                     
    1117/    9331 : =92H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9331 : 92                                  db      value
    1119/    9332 :                                     ;message "value: \{value}"
    1120/    9332 : =32H                 x               set     x+1     
    1110/    9332 :                     
    1111/    9332 : =0.50138339271277    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9332 :                     
    1113/    9332 : =>TRUE                               if value > 0
    1114/    9332 : =0.77714425870474    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9332 : [1113]                               endif
    1116/    9332 :                     
    1117/    9332 : =87H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9332 : 87                                  db      value
    1119/    9333 :                                     ;message "value: \{value}"
    1120/    9333 : =33H                 x               set     x+1     
    1110/    9333 :                     
    1111/    9333 : =0.37999201245273    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9333 :                     
    1113/    9333 : =>TRUE                               if value > 0
    1114/    9333 : =0.58898761930173    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9333 : [1113]                               endif
    1116/    9333 :                     
    1117/    9333 : =7BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9333 : 7B                                  db      value
    1119/    9334 :                                     ;message "value: \{value}"
    1120/    9334 : =34H                 x               set     x+1     
    1110/    9334 :                     
    1111/    9334 : =0.24957518212773    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9334 :                     
    1113/    9334 : =>TRUE                               if value > 0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 68 - 11/21/2024 11:26:38


    1114/    9334 : =0.38684153229795    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9334 : [1113]                               endif
    1116/    9334 :                     
    1117/    9334 : =6EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9334 : 6E                                  db      value
    1119/    9335 :                                     ;message "value: \{value}"
    1120/    9335 : =35H                 x               set     x+1     
    1110/    9335 :                     
    1111/    9335 : =0.11318971325172    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9335 :                     
    1113/    9335 : =>TRUE                               if value > 0
    1114/    9335 : =0.17544405554017    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9335 : [1113]                               endif
    1116/    9335 :                     
    1117/    9335 : =61H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9335 : 61                                  db      value
    1119/    9336 :                                     ;message "value: \{value}"
    1120/    9336 : =36H                 x               set     x+1     
    1110/    9336 :                     
    1111/    9336 : =-0.02591309692236   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9336 :                     
    1113/    9336 : =>FALSE                              if value > 0
    1114/    9336 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9336 : [1113]                               endif
    1116/    9336 :                     
    1117/    9336 : =54H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9336 : 54                                  db      value
    1119/    9337 :                                     ;message "value: \{value}"
    1120/    9337 : =37H                 x               set     x+1     
    1110/    9337 :                     
    1111/    9337 : =-0.1643932468944    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9337 :                     
    1113/    9337 : =>FALSE                              if value > 0
    1114/    9337 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9337 : [1113]                               endif
    1116/    9337 :                     
    1117/    9337 : =4BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9337 : 4B                                  db      value
    1119/    9338 :                                     ;message "value: \{value}"
    1120/    9338 : =38H                 x               set     x+1     
    1110/    9338 :                     
    1111/    9338 : =-0.2989310698527    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9338 :                     
    1113/    9338 : =>FALSE                              if value > 0
    1114/    9338 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9338 : [1113]                               endif
    1116/    9338 :                     
    1117/    9338 : =42H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9338 : 42                                  db      value
    1119/    9339 :                                     ;message "value: \{value}"
    1120/    9339 : =39H                 x               set     x+1     
    1110/    9339 :                     
    1111/    9339 : =-0.4263355257727    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    9339 :                     
    1113/    9339 : =>FALSE                              if value > 0
    1114/    9339 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    9339 : [1113]                               endif
    1116/    9339 :                     
    1117/    9339 : =3AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    9339 : 3A                                  db      value
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 69 - 11/21/2024 11:26:38


    1119/    933A :                                     ;message "value: \{value}"
    1120/    933A : =3AH                 x               set     x+1     
    1110/    933A :                     
    1111/    933A : =-0.5436477707539    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933A :                     
    1113/    933A : =>FALSE                              if value > 0
    1114/    933A :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933A : [1113]                               endif
    1116/    933A :                     
    1117/    933A : =33H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933A : 33                                  db      value
    1119/    933B :                                     ;message "value: \{value}"
    1120/    933B : =3BH                 x               set     x+1     
    1110/    933B :                     
    1111/    933B : =-0.6482362070493    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933B :                     
    1113/    933B : =>FALSE                              if value > 0
    1114/    933B :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933B : [1113]                               endif
    1116/    933B :                     
    1117/    933B : =2CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933B : 2C                                  db      value
    1119/    933C :                                     ;message "value: \{value}"
    1120/    933C : =3CH                 x               set     x+1     
    1110/    933C :                     
    1111/    933C : =-0.7378795407522    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933C :                     
    1113/    933C : =>FALSE                              if value > 0
    1114/    933C :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933C : [1113]                               endif
    1116/    933C :                     
    1117/    933C : =26H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933C : 26                                  db      value
    1119/    933D :                                     ;message "value: \{value}"
    1120/    933D : =3DH                 x               set     x+1     
    1110/    933D :                     
    1111/    933D : =-0.8108348293186    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933D :                     
    1113/    933D : =>FALSE                              if value > 0
    1114/    933D :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933D : [1113]                               endif
    1116/    933D :                     
    1117/    933D : =22H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933D : 22                                  db      value
    1119/    933E :                                     ;message "value: \{value}"
    1120/    933E : =3EH                 x               set     x+1     
    1110/    933E :                     
    1111/    933E : =-0.8658880706712    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933E :                     
    1113/    933E : =>FALSE                              if value > 0
    1114/    933E :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933E : [1113]                               endif
    1116/    933E :                     
    1117/    933E : =1EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933E : 1E                                  db      value
    1119/    933F :                                     ;message "value: \{value}"
    1120/    933F : =3FH                 x               set     x+1     
    1110/    933F :                     
    1111/    933F : =-0.9023855476233    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1112/    933F :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 70 - 11/21/2024 11:26:38


    1113/    933F : =>FALSE                              if value > 0
    1114/    933F :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1115/    933F : [1113]                               endif
    1116/    933F :                     
    1117/    933F : =1CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1118/    933F : 1C                                  db      value
    1119/    9340 :                                     ;message "value: \{value}"
    1120/    9340 : =40H                 x               set     x+1     
    1110/    9340 :                     
    1122/    9340 :                     
    1123/    9340 :                     ;;------------------------------------------------------------------------------
    1124/    9340 :                     ; Einfache Simulation der genutzten Funktion zur Bewegung der Linien auf der Z-Achse
    1125/    9340 :                     ;
    1126/    9340 :                     ; https://www.geogebra.org/graphing?lang=de
    1127/    9340 :                     ;
    1128/    9340 :                     ; Copy/Paste: 
    1129/    9340 :                     ;
    1130/    9340 :                     ; Wenn((sin(x)+0.5 sin(2x))*0.71>0, (sin(x)+0.5 sin(2x))*0.71, (sin(x)+0.5 sin(2x))*0.71*1.55)
    1131/    9340 :                     ;
    1132/    9340 :                     ;------------------------------------------------------------------------------
    1133/    9340 :                                     align 100h
    1134/    9400 :                                     
    1135/    9400 :                     zg_KCC:         binclude ./zg_KCC.rom
    1136/    9C00 :                     zg_Z9001:       binclude ./zg_Z9001.rom
    1137/    A400 :                     
    1138/    A400 :                                     include ./bitmaps.asm
(1)    1/    A400 :                     ;------------------------------------------------------------------------------
(1)    2/    A400 :                     
(1)    3/    A400 : 0A                  KC_LOGO:        db      10      ; x
(1)    4/    A401 : 0C                                  db      12      ; y
(1)    5/    A402 : 04                                  db      4       ; xw
(1)    6/    A403 : 15                                  db      21      ; yw
(1)    7/    A404 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)    8/    A405 :                     
(1)    9/    A405 :                                     ;       4 x 21
(1)   10/    A405 :                                     ;       12345678  12345678  12345678  12345678
(1)   11/    A405 : 00 27 FE 7F                         db      00000000b,00100111b,11111110b,01111111b
(1)   12/    A409 : 00 27 FE 7F                         db      00000000b,00100111b,11111110b,01111111b
(1)   13/    A40D : 00 67 FC FF                         db      00000000b,01100111b,11111100b,11111111b
(1)   14/    A411 : 00 67 FC FF                         db      00000000b,01100111b,11111100b,11111111b
(1)   15/    A415 : 00 E7 F9 FF                         db      00000000b,11100111b,11111001b,11111111b
(1)   16/    A419 : 00 E7 F9 FF                         db      00000000b,11100111b,11111001b,11111111b
(1)   17/    A41D : 01 E7 F3 FF                         db      00000001b,11100111b,11110011b,11111111b
(1)   18/    A421 : 01 E7 F3 FF                         db      00000001b,11100111b,11110011b,11111111b
(1)   19/    A425 : 03 E7 E7 FF                         db      00000011b,11100111b,11100111b,11111111b
(1)   20/    A429 : 03 E7 E7 FF                         db      00000011b,11100111b,11100111b,11111111b
(1)   21/    A42D : 07 E7 CF FF                         db      00000111b,11100111b,11001111b,11111111b
(1)   22/    A431 : 07 E7 CF FF                         db      00000111b,11100111b,11001111b,11111111b
(1)   23/    A435 : 0F E7 9F FF                         db      00001111b,11100111b,10011111b,11111111b
(1)   24/    A439 : 0F E7 9F FF                         db      00001111b,11100111b,10011111b,11111111b
(1)   25/    A43D : 1F E7 3F FF                         db      00011111b,11100111b,00111111b,11111111b
(1)   26/    A441 : 1F E7 3F FF                         db      00011111b,11100111b,00111111b,11111111b
(1)   27/    A445 : 3F E6 7F FF                         db      00111111b,11100110b,01111111b,11111111b
(1)   28/    A449 : 3F E6 7F FF                         db      00111111b,11100110b,01111111b,11111111b
(1)   29/    A44D : 7F E4 FF FF                         db      01111111b,11100100b,11111111b,11111111b
(1)   30/    A451 : 7F E4 FF FF                         db      01111111b,11100100b,11111111b,11111111b
(1)   31/    A455 : FF E4 FF FF                         db      11111111b,11100100b,11111111b,11111111b
(1)   32/    A459 :                     
(1)   33/    A459 :                     ;------------------------------------------------------------------------------
(1)   34/    A459 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 71 - 11/21/2024 11:26:38


(1)   35/    A459 : 0A                  TINY_LOGO:      db      10      ; x
(1)   36/    A45A : 0C                                  db      12      ; y
(1)   37/    A45B : 0A                                  db      10      ; xw
(1)   38/    A45C : 18                                  db      24      ; yw
(1)   39/    A45D : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)   40/    A45E :                     
(1)   41/    A45E :                                     ;       10 x 24
(1)   42/    A45E :                                     ;       12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678      
(1)   43/    A45E : 3F FF C0 80 7F FF                   db      00111111b,11111111b,11000000b,10000000b,01111111b,11111111b,11000000b,01000000b,00000000b,10000000b     
             A464 : C0 40 00 80       
(1)   44/    A468 : 7F FF E1 C0 FF FF                   db      01111111b,11111111b,11100001b,11000000b,11111111b,11111111b,11100000b,11100000b,00000001b,11000000b     
             A46E : E0 E0 01 C0       
(1)   45/    A472 : 3F FF C1 C0 FF FF                   db      00111111b,11111111b,11000001b,11000000b,11111111b,11111111b,11100000b,11100000b,00000001b,11000000b     
             A478 : E0 E0 01 C0       
(1)   46/    A47C : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A482 : E0 E0 01 C0       
(1)   47/    A486 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A48C : E0 E0 01 C0       
(1)   48/    A490 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A496 : E0 E0 01 C0       
(1)   49/    A49A : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4A0 : E0 E0 01 C0       
(1)   50/    A4A4 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4AA : E0 E0 01 C0       
(1)   51/    A4AE : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4B4 : E0 E0 01 C0       
(1)   52/    A4B8 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4BE : E0 E0 01 C0       
(1)   53/    A4C2 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,01111111b,11111111b,10000000b     
             A4C8 : E0 7F FF 80       
(1)   54/    A4CC : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,00111111b,11111111b,00000000b     
             A4D2 : E0 3F FF 00       
(1)   55/    A4D6 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4DC : E0 01 E0 00       
(1)   56/    A4E0 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4E6 : E0 01 E0 00       
(1)   57/    A4EA : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4F0 : E0 01 E0 00       
(1)   58/    A4F4 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4FA : E0 01 E0 00       
(1)   59/    A4FE : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A504 : E0 01 E0 00       
(1)   60/    A508 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A50E : E0 01 E0 00       
(1)   61/    A512 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A518 : E0 01 E0 00       
(1)   62/    A51C : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A522 : E0 01 E0 00       
(1)   63/    A526 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A52C : E0 01 E0 00       
(1)   64/    A530 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A536 : E0 01 E0 00       
(1)   65/    A53A : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A540 : E0 01 E0 00       
(1)   66/    A544 : 00 60 00 C0 60 00                   db      00000000b,01100000b,00000000b,11000000b,01100000b,00000000b,01000000b,00000000b,11000000b,00000000b        
             A54A : 40 00 C0 00       
(1)   67/    A54E :                     
(1)   68/    A54E :                     ;------------------------------------------------------------------------------
(1)   69/    A54E :                     
(1)   70/    A54E : 1A                  MH_LOGO:        db      26      ; x
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 72 - 11/21/2024 11:26:38


(1)   71/    A54F : 8D                                  db      141     ; y
(1)   72/    A550 : 05                                  db      5       ; xw
(1)   73/    A551 : 2C                                  db      44      ; yw
(1)   74/    A552 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)   75/    A553 :                     
(1)   76/    A553 :                                     ;       5 x 1 = 5 x 44
(1)   77/    A553 :                                     ;       12345678  12345678  12345678  12345678  12345678
(1)   78/    A553 : 00 07 BE 00 00                      db      00000000b,00000111b,10111110b,00000000b,00000000b                                       
(1)   79/    A558 : 00 18 01 80 00                      db      00000000b,00011000b,00000001b,10000000b,00000000b                                     
(1)   80/    A55D : 00 A0 00 50 00                      db      00000000b,10100000b,00000000b,01010000b,00000000b                                     
(1)   81/    A562 : 01 00 00 10 00                      db      00000001b,00000000b,00000000b,00010000b,00000000b                                     
(1)   82/    A567 : 03 01 F8 08 00                      db      00000011b,00000001b,11111000b,00001000b,00000000b                                     
(1)   83/    A56C : 04 06 07 04 00                      db      00000100b,00000110b,00000111b,00000100b,00000000b                                     
(1)   84/    A571 : 08 18 00 C2 00                      db      00001000b,00011000b,00000000b,11000010b,00000000b                                     
(1)   85/    A576 : 10 20 00 21 80                      db      00010000b,00100000b,00000000b,00100001b,10000000b                                     
(1)   86/    A57B : 10 C0 00 10 00                      db      00010000b,11000000b,00000000b,00010000b,00000000b                                     
(1)   87/    A580 : 20 83 FC 08 80                      db      00100000b,10000011b,11111100b,00001000b,10000000b                                     
(1)   88/    A585 : 21 06 03 04 40                      db      00100001b,00000110b,00000011b,00000100b,01000000b                                     
(1)   89/    A58A : 43 08 01 84 40                      db      01000011b,00001000b,00000001b,10000100b,01000000b                                     
(1)   90/    A58F : 42 10 00 42 20                      db      01000010b,00010000b,00000000b,01000010b,00100000b                                     
(1)   91/    A594 : 04 20 00 62 20                      db      00000100b,00100000b,00000000b,01100010b,00100000b                                     
(1)   92/    A599 : 44 60 00 22 20                      db      01000100b,01100000b,00000000b,00100010b,00100000b                                     
(1)   93/    A59E : 84 40 00 21 20                      db      10000100b,01000000b,00000000b,00100001b,00100000b                                     
(1)   94/    A5A3 : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   95/    A5A8 : 84 40 00 11 00                      db      10000100b,01000000b,00000000b,00010001b,00000000b                                     
(1)   96/    A5AD : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   97/    A5B2 : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   98/    A5B7 : 04 41 F8 21 20                      db      00000100b,01000001b,11111000b,00100001b,00100000b                                     
(1)   99/    A5BC : 44 47 FE 22 20                      db      01000100b,01000111b,11111110b,00100010b,00100000b                                     
(1)  100/    A5C1 : 42 3F FF E2 40                      db      01000010b,00111111b,11111111b,11100010b,01000000b                                     
(1)  101/    A5C6 : 42 3F FF C4 40                      db      01000010b,00111111b,11111111b,11000100b,01000000b                                     
(1)  102/    A5CB : 23 1C F3 C4 80                      db      00100011b,00011100b,11110011b,11000100b,10000000b                                     
(1)  103/    A5D0 : 21 1C F3 C8 00                      db      00100001b,00011100b,11110011b,11001000b,00000000b                                     
(1)  104/    A5D5 : 10 DF FF D0 80                      db      00010000b,11011111b,11111111b,11010000b,10000000b                                     
(1)  105/    A5DA : 08 5C F3 F3 00                      db      00001000b,01011100b,11110011b,11110011b,00000000b                                     
(1)  106/    A5DF : 08 3C F3 C2 00                      db      00001000b,00111100b,11110011b,11000010b,00000000b                                     
(1)  107/    A5E4 : 04 1C F3 C4 00                      db      00000100b,00011100b,11110011b,11000100b,00000000b                                     
(1)  108/    A5E9 : 03 1F FF C8 00                      db      00000011b,00011111b,11111111b,11001000b,00000000b                                     
(1)  109/    A5EE : 00 9C F3 F0 00                      db      00000000b,10011100b,11110011b,11110000b,00000000b                                     
(1)  110/    A5F3 : 00 7C F3 C0 00                      db      00000000b,01111100b,11110011b,11000000b,00000000b                                     
(1)  111/    A5F8 : 00 1C FB C0 00                      db      00000000b,00011100b,11111011b,11000000b,00000000b                                     
(1)  112/    A5FD : 00 1D F3 C0 00                      db      00000000b,00011101b,11110011b,11000000b,00000000b                                     
(1)  113/    A602 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                                     
(1)  114/    A607 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                                     
(1)  115/    A60C : 00 00 F0 00 00                      db      00000000b,00000000b,11110000b,00000000b,00000000b                                     
(1)  116/    A611 : 00 03 FC 00 00                      db      00000000b,00000011b,11111100b,00000000b,00000000b                                     
(1)  117/    A616 : 00 1F FF 80 00                      db      00000000b,00011111b,11111111b,10000000b,00000000b                                     
(1)  118/    A61B : 00 1F FF 80 00                      db      00000000b,00011111b,11111111b,10000000b,00000000b                                     
(1)  119/    A620 : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b                                     
(1)  120/    A625 : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b                                     
(1)  121/    A62A : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b   
(1)  122/    A62F :                     
(1)  123/    A62F :                     ;------------------------------------------------------------------------------
(1)  124/    A62F :                     
(1)  125/    A62F : 1A                  JU_TE_LOGO:     db      26      ; x
(1)  126/    A630 : 8D                                  db      141     ; y
(1)  127/    A631 : 05                                  db      5       ; xw
(1)  128/    A632 : 2C                                  db      44      ; yw
(1)  129/    A633 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)  130/    A634 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 73 - 11/21/2024 11:26:38


(1)  131/    A634 :                                     ;       5 x 44
(1)  132/    A634 :                                     ;       12345678  12345678  12345678  12345678  12345678
(1)  133/    A634 : 3C 07 80 F0 00                      db      00111100b,00000111b,10000000b,11110000b,00000000b
(1)  134/    A639 : 7E 0F C1 F8 00                      db      01111110b,00001111b,11000001b,11111000b,00000000b
(1)  135/    A63E : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  136/    A643 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  137/    A648 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  138/    A64D : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  139/    A652 : 7F 0F C3 F8 00                      db      01111111b,00001111b,11000011b,11111000b,00000000b
(1)  140/    A657 : 3F 87 87 F0 00                      db      00111111b,10000111b,10000111b,11110000b,00000000b
(1)  141/    A65C : 01 C3 0E 00 00                      db      00000001b,11000011b,00001110b,00000000b,00000000b
(1)  142/    A661 : 00 E3 1C 00 00                      db      00000000b,11100011b,00011100b,00000000b,00000000b
(1)  143/    A666 : 00 73 38 00 00                      db      00000000b,01110011b,00111000b,00000000b,00000000b
(1)  144/    A66B : 3C 3F F0 F0 00                      db      00111100b,00111111b,11110000b,11110000b,00000000b
(1)  145/    A670 : 7E 1F E1 F8 00                      db      01111110b,00011111b,11100001b,11111000b,00000000b
(1)  146/    A675 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  147/    A67A : FF FC FF FC 00                      db      11111111b,11111100b,11111111b,11111100b,00000000b
(1)  148/    A67F : FF FC FF FC 00                      db      11111111b,11111100b,11111111b,11111100b,00000000b
(1)  149/    A684 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  150/    A689 : 7E 1F E1 F8 00                      db      01111110b,00011111b,11100001b,11111000b,00000000b
(1)  151/    A68E : 3C 3F F0 F0 00                      db      00111100b,00111111b,11110000b,11110000b,00000000b
(1)  152/    A693 : 00 73 38 00 00                      db      00000000b,01110011b,00111000b,00000000b,00000000b
(1)  153/    A698 : 00 E3 1C 00 00                      db      00000000b,11100011b,00011100b,00000000b,00000000b
(1)  154/    A69D : 01 C3 0E 00 00                      db      00000001b,11000011b,00001110b,00000000b,00000000b
(1)  155/    A6A2 : 3F 87 87 F0 00                      db      00111111b,10000111b,10000111b,11110000b,00000000b
(1)  156/    A6A7 : 7F 0F C3 F8 00                      db      01111111b,00001111b,11000011b,11111000b,00000000b
(1)  157/    A6AC : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  158/    A6B1 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  159/    A6B6 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  160/    A6BB : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  161/    A6C0 : 7E 0F C1 F8 00                      db      01111110b,00001111b,11000001b,11111000b,00000000b
(1)  162/    A6C5 : 3C 07 80 F0 00                      db      00111100b,00000111b,10000000b,11110000b,00000000b
(1)  163/    A6CA : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                       
(1)  164/    A6CF : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  165/    A6D4 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  166/    A6D9 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  167/    A6DE : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  168/    A6E3 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  169/    A6E8 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  170/    A6ED : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  171/    A6F2 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  172/    A6F7 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  173/    A6FC : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  174/    A701 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  175/    A706 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  176/    A70B : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  177/    A710 :                                     
(1)  178/    A710 :                     ;------------------------------------------------------------------------------
(1)  179/    A710 :                     
(1)  180/    A710 :                                                                                       
(1)  181/    A710 :                     
(1)  182/    A710 :                     
(1)  183/    A710 :                     
(1)  184/    A710 :                     
(1)  185/    A710 :                                     
(1)  186/    A710 :                                             
    1139/    A710 :                                     include ../FGL/FGL.asm
(1)    1/    A710 :                     ;------------------------------------------------------------------------------
(1)    2/    A710 :                     ; Titel:                Ju-Te 6K Fast Graphics Library  (6K-FGL)
(1)    3/    A710 :                     ;
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 74 - 11/21/2024 11:26:38


(1)    4/    A710 :                     ; Erstellt:             10.11.2023
(1)    5/    A710 :                     ; Letzte Ã„nderung:      15.11.2024
(1)    6/    A710 :                     ;------------------------------------------------------------------------------ 
(1)    7/    A710 :                     
(1)    8/    A710 : =>DEFINED                    ifndef  MACROS_INC
(1)    9/    A710 :                                     include ./macros.asm
(1)   10/    A710 : [8]                          endif   
(1)   11/    A710 :                                     
(1)   12/    A710 : =4000H               VRAM            equ     4000h
(1)   13/    A710 : =5FFFH               VRAM_END        equ     5FFFh
(1)   14/    A710 : =1FFFH               VRAM_LEN        equ     VRAM_END - VRAM
(1)   15/    A710 :                     
(1)   16/    A710 : =0AA00H              VRAM_TAB_HI     equ     RAM_START       ; muss xx00-Adr. sein
(1)   17/    A710 : =0AB00H              VRAM_TAB_LO     equ     RAM_START+100h  ; muss xx00-Adr. sein
(1)   18/    A710 :                     
(1)   19/    A710 : =6AH                 saveH           equ     6Ah             ; Hilfs-Register
(1)   20/    A710 : =6BH                 saveL           equ     6Bh             ; Hilfs-Register
(1)   21/    A710 :                     
(1)   22/    A710 :                     ;------------------------------------------------------------------------------
(1)   23/    A710 :                     ; Kopiert Bitmap in den VRAM.
(1)   24/    A710 :                     ;
(1)   25/    A710 :                     ; in:           rr12    = Pointer auf Bitmap
(1)   26/    A710 :                     ;
(1)   27/    A710 :                     ;               db      ?       ; x-Byte-Pos
(1)   28/    A710 :                     ;               db      ?       ; y-Pos
(1)   29/    A710 :                     ;               db      ?       ; xw-Bytes
(1)   30/    A710 :                     ;               db      ?       ; yw-Zeilen
(1)   31/    A710 :                     ;               db      ?       ; Farbe VH
(1)   32/    A710 :                     ;               ds      xw*yw   ; Bitmap
(1)   33/    A710 :                     ;
(1)   34/    A710 :                     ; out:          Bitmap im VRAM
(1)   35/    A710 :                     ;------------------------------------------------------------------------------
(1)   36/    A710 :                     
(1)   37/    A710 :                     FGL_BMP_TO_VRAM:
(1)   38/    A710 :                     
(1)   39/    A710 : 82 0C                               lde     r0, @rr12
(1)   40/    A712 : 09 4F                               ld      var_X_lo, r0    ; x
(1)   41/    A714 : A0 EC                               incw    rr12
(1)   42/    A716 :                     
(1)   43/    A716 : 82 0C                               lde     r0, @rr12
(1)   44/    A718 : 09 51                               ld      var_Y_lo, r0    ; y
(1)   45/    A71A : A0 EC                               incw    rr12
(1)   46/    A71C :                     
(1)   47/    A71C : 82 0C                               lde     r0, @rr12
(1)   48/    A71E : 09 53                               ld      var_Z_lo, r0    ; xw
(1)   49/    A720 : A0 EC                               incw    rr12
(1)   50/    A722 :                     
(1)   51/    A722 : 82 0C                               lde     r0, @rr12
(1)   52/    A724 : 09 52                               ld      var_Z_hi, r0    ; yw
(1)   53/    A726 : A0 EC                               incw    rr12
(1)   54/    A728 :                     
(1)   55/    A728 : 82 0C                               lde     r0, @rr12
(1)   56/    A72A : 09 4D                               ld      var_W_lo, r0    ; Farbe V8
(1)   57/    A72C : A0 EC                               incw    rr12
(1)   58/    A72E :                     
(1)   59/    A72E :                                     ; use: r0,r2,r3,r4,r5,r6,r7 in: var_X_lo, var_Y_lo
(1)   60/    A72E : D6 A9 13                            call    XBY_to_vram
(1)   61/    A731 :                     
(1)   62/    A731 : 38 52                               ld      r3, var_Z_hi
(1)   63/    A733 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 75 - 11/21/2024 11:26:38


(1)   64/    A733 : 28 53                               citv2:  ld      r2, var_Z_lo
(1)   65/    A735 :                     
(1)   66/    A735 :                                             citv1:
(1)   67/    A735 : 82 FC                                               lde     r15, @rr12
(1)   68/    A737 :                                                     ;use: r5-15 in: var_W_lo, rr6, r15
(1)   69/    A737 : D6 A8 87                                            call    setVRAM
(1)   70/    A73A : A0 EC                                               incw    rr12
(1)   71/    A73C : 7E                                                  inc     r7
(1)   72/    A73D : 2A F6                                       djnz    r2, citv1
(1)   73/    A73F :                     
(1)   74/    A73F : 24 53 E7                                    sub     r7, var_Z_lo
(1)   75/    A742 : D6 A9 24                                    call    vram_inc_y_es40
(1)   76/    A745 : 3A EC                               djnz    r3, citv2
(1)   77/    A747 : AF                                  ret
(1)   78/    A748 :                             
(1)   79/    A748 :                     ;------------------------------------------------------------------------------
(1)   80/    A748 :                     ; Gibt eine Zeichenkette mit FGL_CHAROUT aus.
(1)   81/    A748 :                     ;
(1)   82/    A748 :                     ; in:   var_T           = Zeiger auf Zeichensatz        
(1)   83/    A748 :                     ;       var_U           = Warten nach einer Zeichenzeile (ms)
(1)   84/    A748 :                     ;       var_V           = Warten nach einem Zeichen (ms)
(1)   85/    A748 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)   86/    A748 :                     ;       var_X_lo        = x-Byte        (0-39)
(1)   87/    A748 :                     ;       var_Y_lo        = y-Zeile       (0-191)
(1)   88/    A748 :                     ;       var_Z_lo        = ASCII
(1)   89/    A748 :                     ;       var_Z_hi        = N             (Zoom-Faktor)
(1)   90/    A748 :                     ;
(1)   91/    A748 :                     ; out:  Zeichenkette auf dem Bildschirm
(1)   92/    A748 :                     ;------------------------------------------------------------------------------
(1)   93/    A748 :                     
(1)   94/    A748 : 50 EC               FGL_PRISTRI:    pop     r12
(1)   95/    A74A : 50 ED                               pop     r13                     ; SP+2
(1)   96/    A74C : 70 4F                               push    var_X_lo
(1)   97/    A74E : 82 2C               prc1:           lde     r2, @rr12
(1)   98/    A750 :                     
(1)   99/    A750 : A6 E2 00                            cp      r2, #0                  ; Ende ?
(1)  100/    A753 : 6B 1A                               jr      z, prcret
(1)  101/    A755 : 29 53                               ld      var_Z_lo, r2            ; Zeichen laden
(1)  102/    A757 :                     
(1)  103/    A757 : 70 EC                               push    r12
(1)  104/    A759 : 70 ED                               push    r13
(1)  105/    A75B : D6 A7 78                            call    FGL_CHAROUT             ; Zeichen ausgeben
(1)  106/    A75E : 50 ED                               pop     r13
(1)  107/    A760 : 50 EC                               pop     r12
(1)  108/    A762 :                     
(1)  109/    A762 : D6 A8 60                            call    FGL_TIMER               ; nach Zeichen warten 
(1)  110/    A765 :                     
(1)  111/    A765 : 08 52                               ld      r0, var_Z_hi            ; inc X
(1)  112/    A767 : 20 4F               prc2:           inc     var_X_lo
(1)  113/    A769 : 0A FC                               djnz    r0, prc2
(1)  114/    A76B :                     
(1)  115/    A76B : A0 EC                               incw    rr12
(1)  116/    A76D : 8B DF                               jr      prc1
(1)  117/    A76F :                     
(1)  118/    A76F : 50 4F               prcret:         pop     var_X_lo
(1)  119/    A771 : A0 EC                               incw    rr12
(1)  120/    A773 : 70 ED                               push    r13
(1)  121/    A775 : 70 EC                               push    r12
(1)  122/    A777 : AF                                  ret
(1)  123/    A778 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 76 - 11/21/2024 11:26:38


(1)  124/    A778 :                     ;------------------------------------------------------------------------------
(1)  125/    A778 :                     ; Stellt Zeichen auf dem Bildschirm dar.
(1)  126/    A778 :                     ;
(1)  127/    A778 :                     ; in:   var_T           = Zeiger auf Zeichensatz        
(1)  128/    A778 :                     ;       var_U           = Wartezeit nach einer Zeichenzeile
(1)  129/    A778 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)  130/    A778 :                     ;       var_X_lo        = x-Byte        (0-39)
(1)  131/    A778 :                     ;       var_Y_lo        = y-Zeile       (0-191)
(1)  132/    A778 :                     ;       var_Z_lo        = ASCII
(1)  133/    A778 :                     ;       var_Z_hi        = N             (Zoom-Faktor)
(1)  134/    A778 :                     ;
(1)  135/    A778 :                     ; out:  Zeichen auf dem Bildschirm
(1)  136/    A778 :                     ;
(1)  137/    A778 :                     ; intern:
(1)  138/    A778 :                     ;       r0              ASCII->ZG / N
(1)  139/    A778 :                     ;       r1              ASCII->ZG / save FLAGS
(1)  140/    A778 :                     ;       r2              ZG hi
(1)  141/    A778 :                     ;       r3              ZG lo
(1)  142/    A778 :                     ;       r4              ZG-Zeilen-ZÃ¤hler
(1)  143/    A778 :                     ;       r5              ZG-Zeilen-Puffer / setVRAM
(1)  144/    A778 :                     ;       r6              VRAM hi
(1)  145/    A778 :                     ;       r7              VRAM lo
(1)  146/    A778 :                     ;       r8              Puffer-Zeiger / setVRAM
(1)  147/    A778 :                     ;       r9              setVRAM
(1)  148/    A778 :                     ;       r10             setVRAM
(1)  149/    A778 :                     ;       r11             N / setVRAM
(1)  150/    A778 :                     ;       r12             Puffer-Zeiger
(1)  151/    A778 :                     ;       r13             N
(1)  152/    A778 :                     ;       r14             Farb-Register hi / setVRAM
(1)  153/    A778 :                     ;       r15             Farb-Register lo / setVRAM
(1)  154/    A778 :                     ;------------------------------------------------------------------------------
(1)  155/    A778 :                     
(1)  156/    A778 : D6 A9 13            FGL_CHAROUT:    call    XBY_to_vram             ; rr6 -> VRAM
(1)  157/    A77B :                     
(1)  158/    A77B : B0 E0                               clr     r0
(1)  159/    A77D : 18 53                               ld      r1, var_Z_lo            ; rr0 = ASCII
(1)  160/    A77F :                                     
(1)  161/    A77F : 10 E1                               rlc     r1                      ; rr0 x 8 ZG-Zeilen
(1)  162/    A781 : 10 E0                               rlc     r0
(1)  163/    A783 : 10 E1                               rlc     r1
(1)  164/    A785 : 10 E0                               rlc     r0
(1)  165/    A787 : 10 E1                               rlc     r1
(1)  166/    A789 : 10 E0                               rlc     r0
(1)  167/    A78B : 56 E1 F8                            and     r1, #11111000b
(1)  168/    A78E :                     
(1)  169/    A78E : 28 46                               ld      r2, var_T_hi            ; Zeichensatz holen
(1)  170/    A790 : 38 47                               ld      r3, var_T_lo
(1)  171/    A792 :                                     
(1)  172/    A792 : 02 31                               add     r3, r1
(1)  173/    A794 : 12 20                               adc     r2, r0                  ; rr2 -> ZG-Byte (ASCII) 1. Zeile
(1)  174/    A796 :                     
(1)  175/    A796 :                                     ;4
(1)  176/    A796 : 4C 08                               ld      r4, #8;9                ; 8 ZG-Zeilen
(1)  177/    A798 :                     
(1)  178/    A798 :                                     pc1:    ;0,5,2,3
(1)  179/    A798 : 0C 08                                       ld      r0, #8          ; ZG-Pixel-ZÃ¤hler
(1)  180/    A79A : 82 52                                       lde     r5, @rr2        ; ZG-Zeile
(1)  181/    A79C :                                             
(1)  182/    A79C :                                             pc4:    ;5,13,8,11
(1)  183/    A79C : C0 E5                                               rrc     r5
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 77 - 11/21/2024 11:26:38


(1)  184/    A79E : 18 FC                                               ld      r1, FLAGS
(1)  185/    A7A0 : D8 52                                               ld      r13, var_Z_hi           ; N x N Bytes 1 x strecken
(1)  186/    A7A2 :                     
(1)  187/    A7A2 :                                                     pcc2:   
(1)  188/    A7A2 : (MACRO)                                                      ldrr    rr8, #zoom_buffer
(1)  189/    A7A6 : B8 52                                                       ld      r11, var_Z_hi   ; N Bytes 1 x strecken
(1)  190/    A7A8 : 82 A8                                                       pcc1:   lde     r10, @rr8
(1)  191/    A7AA : C0 EA                                                               rrc     r10
(1)  192/    A7AC : 92 A8                                                               lde     @rr8, r10
(1)  193/    A7AE : A0 E8                                                               incw    rr8
(1)  194/    A7B0 : BA F6                                                       djnz    r11, pcc1
(1)  195/    A7B2 :                     
(1)  196/    A7B2 : 19 FC                                                       ld      FLAGS, r1
(1)  197/    A7B4 : DA EC                                               djnz    r13, pcc2
(1)  198/    A7B6 :                     
(1)  199/    A7B6 : 0A E4                                       djnz    r0, pc4                         ; nÃ¤chstes ZG-Pixel
(1)  200/    A7B8 :                                                     
(1)  201/    A7B8 : 08 52                                       ld      r0, var_Z_hi                    ; N ZG-Zeilen (gestreckt)
(1)  202/    A7BA :                                             pcc6:   ;12,13,15,6,7
(1)  203/    A7BA : (MACRO)                                              ldrr    rr12, #zoom_buffer
(1)  204/    A7BE : 18 52                                               ld      r1, var_Z_hi;           ; N Pixel-Bytes (gestreckt)
(1)  205/    A7C0 :                     
(1)  206/    A7C0 :                                                     pcc5:
(1)  207/    A7C0 : 82 FC                                                       lde     r15, @rr12
(1)  208/    A7C2 :                                                             
(1)  209/    A7C2 :                                                             ;5,8,9,10,11,14
(1)  210/    A7C2 : D6 A8 87                                                    call    setVRAM         ; Farb-BÃ¤nke setzen
(1)  211/    A7C5 :                                             
(1)  212/    A7C5 : A6 49 00                                                    cp      var_U_lo, #0    ; Wartezeit nach Zeile = 0 ?
(1)  213/    A7C8 : EB 05                                                       jr      nz, pcc9
(1)  214/    A7CA : A6 4A 00                                                    cp      var_V_hi, #0    ; wirklich 0 ?
(1)  215/    A7CD : 6B 11                                                       jr      z, pcc8                 
(1)  216/    A7CF :                                                     pcc9:   
(1)  217/    A7CF : 70 4A                                                       push    var_V_hi        ; nach Zeile warten     
(1)  218/    A7D1 : 70 4B                                                       push    var_V_lo
(1)  219/    A7D3 : E4 48 4A                                                    ld      var_V_hi, var_U_hi
(1)  220/    A7D6 : E4 49 4B                                                    ld      var_V_lo, var_U_lo
(1)  221/    A7D9 : D6 A8 60                                                    call    FGL_TIMER
(1)  222/    A7DC : 50 4B                                                       pop     var_V_lo
(1)  223/    A7DE : 50 4A                                                       pop     var_V_hi
(1)  224/    A7E0 :                                                     pcc8:
(1)  225/    A7E0 : A0 EC                                                       incw    rr12
(1)  226/    A7E2 : 7E                                                          inc     r7
(1)  227/    A7E3 :                     
(1)  228/    A7E3 : 1A DB                                               djnz    r1, pcc5                ; nÃ¤chstes Byte
(1)  229/    A7E5 :                     
(1)  230/    A7E5 : 24 52 E7                                            sub     r7, var_Z_hi            ; X-Pos korrigieren
(1)  231/    A7E8 : D6 A9 24                                            call    vram_inc_y_es40         ; rr6 -> nÃ¤chste VRAM-Zeile
(1)  232/    A7EB : 0A CD                                       djnz    r0, pcc6
(1)  233/    A7ED :                     
(1)  234/    A7ED : A0 E2                                       incw    rr2                             ; nÃ¤chstes ZG-Byte
(1)  235/    A7EF :                     
(1)  236/    A7EF : 4A A7                               djnz    r4, pc1                                 ; nÃ¤chste ZG-Zeile
(1)  237/    A7F1 : AF                                  ret
(1)  238/    A7F2 :                     
(1)  239/    A7F2 :                     ;------------------------------------------------------------------------------
(1)  240/    A7F2 :                     ; Erstellt die Lookup-Tabelle fÃ¼r die Konvertierung der X,Y Koordinaten in 
(1)  241/    A7F2 :                     ; VRAM-Adressen.
(1)  242/    A7F2 :                     ; 
(1)  243/    A7F2 :                     ; in:   ---
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 78 - 11/21/2024 11:26:38


(1)  244/    A7F2 :                     ;
(1)  245/    A7F2 :                     ; out:  VRAM_TAB_LO/HI im RAM   
(1)  246/    A7F2 :                     
(1)  247/    A7F2 :                     ; int:  r0-r4   
(1)  248/    A7F2 :                     ;------------------------------------------------------------------------------                 
(1)  249/    A7F2 :                     
(1)  250/    A7F2 :                     FGL_INIT:        
(1)  251/    A7F2 :                                     ; Low-Bytes erzeugen
(1)  252/    A7F2 :                     
(1)  253/    A7F2 : 0C AB                               ld      r0, #hi(VRAM_TAB_LO)
(1)  254/    A7F4 : 1C 00                               ld      r1, #0
(1)  255/    A7F6 :                                     
(1)  256/    A7F6 : 3C 40                               ld      r3, #64         ; 64 x 3 Zeilen = 192 Zeilen
(1)  257/    A7F8 :                     
(1)  258/    A7F8 : 4C 00                               ld      r4, #0
(1)  259/    A7FA : 92 40                               lde     @rr0, r4
(1)  260/    A7FC : A0 E0                               incw    rr0
(1)  261/    A7FE :                     
(1)  262/    A7FE : 06 E4 28            make_vt1:       add     r4,#40
(1)  263/    A801 : 92 40                               lde     @rr0, r4
(1)  264/    A803 : A0 E0                               incw    rr0
(1)  265/    A805 :                     
(1)  266/    A805 : 06 E4 28                            add     r4,#40
(1)  267/    A808 : 92 40                               lde     @rr0, r4
(1)  268/    A80A : A0 E0                               incw    rr0
(1)  269/    A80C :                                                     
(1)  270/    A80C : 06 E4 30                            add     r4,#48
(1)  271/    A80F : 92 40                               lde     @rr0, r4
(1)  272/    A811 : A0 E0                               incw    rr0
(1)  273/    A813 :                                     
(1)  274/    A813 : 3A E9                               djnz    r3, make_vt1
(1)  275/    A815 :                                     
(1)  276/    A815 :                                     ; 3 aus 8 Dekoder erzeugen
(1)  277/    A815 :                                     
(1)  278/    A815 : 80 E0                               decw    rr0
(1)  279/    A817 : 3C 08                               ld      r3, #8
(1)  280/    A819 : 48 80                               ld      r4, 10000000b
(1)  281/    A81B : 92 40               make_vt3:       lde     @rr0, r4
(1)  282/    A81D : E0 E4                               rr      r4
(1)  283/    A81F : A0 E0                               incw    rr0
(1)  284/    A821 : 3A F8                               djnz    r3, make_vt3
(1)  285/    A823 :                                     
(1)  286/    A823 :                                     ; High-Bytes erzeugen
(1)  287/    A823 :                     
(1)  288/    A823 : 0C AA                               ld      r0, #hi(VRAM_TAB_HI)
(1)  289/    A825 : 1C 00                               ld      r1, #0
(1)  290/    A827 :                                     
(1)  291/    A827 : 2C 06                               ld      r2, #6
(1)  292/    A829 : 3C 20                               ld      r3, #32         ; 32 x 6 Zeilen = 192 Zeilen
(1)  293/    A82B :                     
(1)  294/    A82B : 4C 40                               ld      r4, #hi(VRAM)
(1)  295/    A82D :                                     
(1)  296/    A82D : 92 40               make_vt2:       lde     @rr0, r4
(1)  297/    A82F : A0 E0                               incw    rr0
(1)  298/    A831 : 2A FA                               djnz    r2, make_vt2    ; 6 x 40h, 41h, 42h, ...
(1)  299/    A833 : 2C 06                               ld      r2, #6
(1)  300/    A835 : 4E                                  inc     r4
(1)  301/    A836 : 3A F5                               djnz    r3, make_vt2    ; 32 BlÃ¶cke
(1)  302/    A838 :                     
(1)  303/    A838 : AF                                  ret     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 79 - 11/21/2024 11:26:38


(1)  304/    A839 :                             
(1)  305/    A839 :                     ;------------------------------------------------------------------------------ 
(1)  306/    A839 :                     ; LÃ¶scht den Bildschirm.
(1)  307/    A839 :                     ;
(1)  308/    A839 :                     ; in:   var_Z_lo = Farbe (low-aktiv)    |R|G|B|V|x|x|x|x|
(1)  309/    A839 :                     ;       var_Z_hi = Pixel (high-aktiv)   |x|x|x|x|x|x|x|x|
(1)  310/    A839 :                     ;
(1)  311/    A839 :                     ; int:  r0-r9
(1)  312/    A839 :                     ;------------------------------------------------------------------------------ 
(1)  313/    A839 :                     
(1)  314/    A839 : 68 52               FGL_CLS:        ld      r6, var_Z_hi
(1)  315/    A83B : 38 53                               ld      r3, var_Z_lo
(1)  316/    A83D :                     
(1)  317/    A83D : E6 F8 B2                            ld      p01m, #0B2h             ; Ports 0-1 mode, langsames Timing fÃ¼r ext. Speicher
(1)  318/    A840 :                     
(1)  319/    A840 : 0C 40                               ld      r0, #hi(VRAM)           ; VRAM
(1)  320/    A842 : 1C 00                               ld      r1, #lo(VRAM)   
(1)  321/    A844 :                                     
(1)  322/    A844 : 8C 1F                               ld      r8, #hi(VRAM_LEN)       ; ZÃ¤hler
(1)  323/    A846 : 9C FF                               ld      r9, #lo(VRAM_LEN)
(1)  324/    A848 :                     
(1)  325/    A848 : 2C 60                               ld      r2, #60h                ; Farb-Register hi
(1)  326/    A84A : 48 E2                               ld      r4, r2
(1)  327/    A84C :                                     
(1)  328/    A84C : 5C 00                               ld      r5, #00h                ; Farb-BÃ¤nke = 0000xxxx (alle BÃ¤nke an)
(1)  329/    A84E :                                                                     ; Pixel      = 00000000
(1)  330/    A84E :                                     
(1)  331/    A84E : 92 54               cls_1:          lde     @rr4, r5                ; Farb-BÃ¤nke = 0000xxxx (alle BÃ¤nke an)
(1)  332/    A850 : 92 50                               lde     @rr0, r5                ; Pixel      = 00000000 -> Bank 1-4
(1)  333/    A852 :                                     
(1)  334/    A852 : 92 32                               lde     @rr2, r3                ; Farb-BÃ¤nke = RGBVxxxx                 
(1)  335/    A854 : 92 60                               lde     @rr0, r6                ; Pixel      = xxxxxxxx 
(1)  336/    A856 :                                     
(1)  337/    A856 : A0 E0                               incw    rr0                     ; NÃ¤chste RAM-Pos.
(1)  338/    A858 : 80 E8                               decw    rr8                     ; ZÃ¤hler -1
(1)  339/    A85A : EB F2                               jr      nz, cls_1
(1)  340/    A85C :                                     
(1)  341/    A85C : E6 F8 92                            ld      p01m, #092h             ; Ports 0-1 mode, schnelles Timing fÃ¼r ext. Speicher    
(1)  342/    A85F : AF                                  ret
(1)  343/    A860 :                     
(1)  344/    A860 :                     ;------------------------------------------------------------------------------ 
(1)  345/    A860 :                     ; Timer
(1)  346/    A860 :                     ;
(1)  347/    A860 :                     ; in:   var_V   = N 
(1)  348/    A860 :                     ;
(1)  349/    A860 :                     ; out:  wartet N * 1 ms
(1)  350/    A860 :                     ;------------------------------------------------------------------------------ 
(1)  351/    A860 :                                     
(1)  352/    A860 : 8F                  FGL_TIMER:      DI
(1)  353/    A861 : A6 4B 00                            cp      var_V_lo, #0
(1)  354/    A864 : EB 05                               jr      nz, tm0
(1)  355/    A866 : A6 4A 00                            cp      var_V_hi, #0
(1)  356/    A869 : 6B 1A                               jr      z, tmend
(1)  357/    A86B :                                     
(1)  358/    A86B : 70 EC               tm0:            push    r12
(1)  359/    A86D : 70 ED                               push    r13
(1)  360/    A86F : 70 E0                               push    r0
(1)  361/    A871 :                                     
(1)  362/    A871 : C8 4A                               ld      r12, var_V_hi
(1)  363/    A873 : D8 4B                               ld      r13, var_V_lo
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 80 - 11/21/2024 11:26:38


(1)  364/    A875 :                                                             
(1)  365/    A875 : 0C DF               tm2:            ld      r0, #0dfh       ; 1 ms
(1)  366/    A877 :                                     
(1)  367/    A877 : 00 E0               tm1:            dec     r0
(1)  368/    A879 : EB FC                               jr      nz, tm1
(1)  369/    A87B :                                     
(1)  370/    A87B : 80 EC                               decw    rr12
(1)  371/    A87D : EB F6                               jr      nz, tm2
(1)  372/    A87F :                     
(1)  373/    A87F : 50 E0                               pop     r0
(1)  374/    A881 : 50 ED                               pop     r13
(1)  375/    A883 : 50 EC                               pop     r12
(1)  376/    A885 :                     
(1)  377/    A885 : 9F                  tmend:          EI
(1)  378/    A886 : AF                                  ret
(1)  379/    A887 :                                     
(1)  380/    A887 :                     ;------------------------------------------------------------------------------
(1)  381/    A887 :                     ; Setzt die Farb-Bytes in den 4 Farb-BÃ¤nken (RGBH)
(1)  382/    A887 :                     ;
(1)  383/    A887 :                     ; in:
(1)  384/    A887 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)  385/    A887 :                     ;       r15             = Pixel-Byte
(1)  386/    A887 :                     ;       rr6             = VRAM
(1)  387/    A887 :                     ;
(1)  388/    A887 :                     ;       R G B H  Hex  Farbe
(1)  389/    A887 :                     ;       ----------------------
(1)  390/    A887 :                     ;       0 0 0 0   0   schwarz
(1)  391/    A887 :                     ;       0 0 0 1   1   grau
(1)  392/    A887 :                     ;       0 0 1 0   2   blau
(1)  393/    A887 :                     ;       0 0 1 1   3   blauH
(1)  394/    A887 :                     ;       0 1 0 0   4   grÃ¼n
(1)  395/    A887 :                     ;       0 1 0 1   5   grÃ¼nH
(1)  396/    A887 :                     ;       0 1 1 0   6   cyan
(1)  397/    A887 :                     ;       0 1 1 1   7   cyanH
(1)  398/    A887 :                     ;       1 0 0 0   8   rot
(1)  399/    A887 :                     ;       1 0 0 1   9   rotH
(1)  400/    A887 :                     ;       1 0 1 0   A   pink
(1)  401/    A887 :                     ;       1 0 1 1   B   pinkH
(1)  402/    A887 :                     ;       1 1 0 0   C   gelb
(1)  403/    A887 :                     ;       1 1 0 1   D   gelbH
(1)  404/    A887 :                     ;       1 1 1 0   E   grauH
(1)  405/    A887 :                     ;       1 1 1 1   F   weiss
(1)  406/    A887 :                     ;
(1)  407/    A887 :                     ; out:  4 Bytes im VRAM (RGBH)
(1)  408/    A887 :                     ;
(1)  409/    A887 :                     ; intern:
(1)  410/    A887 :                     ;       r0              -
(1)  411/    A887 :                     ;       r1              -
(1)  412/    A887 :                     ;       r2              -
(1)  413/    A887 :                     ;       r3              -
(1)  414/    A887 :                     ;       r4              -
(1)  415/    A887 :                     ;       r5              Pixel-ZÃ¤hler
(1)  416/    A887 :                     ;       r6              VRAM hi
(1)  417/    A887 :                     ;       r7              VRAM lo
(1)  418/    A887 :                     ;       r8              R
(1)  419/    A887 :                     ;       r9              G
(1)  420/    A887 :                     ;       r10             B
(1)  421/    A887 :                     ;       r11             H
(1)  422/    A887 :                     ;       r12             -
(1)  423/    A887 :                     ;       r13             -
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 81 - 11/21/2024 11:26:38


(1)  424/    A887 :                     ;       r14             Farbe /      Farb-Register hi
(1)  425/    A887 :                     ;       r15             Pixel-Byte / Farb-Register lo
(1)  426/    A887 :                     ;------------------------------------------------------------------------------
(1)  427/    A887 :                     
(1)  428/    A887 : 5C 08               setVRAM:        ld      r5, #8
(1)  429/    A889 :                                     plv11:
(1)  430/    A889 : E8 4D                                       ld      r14, var_W_lo   ; Farbe
(1)  431/    A88B : 10 EF                                       rlc     r15             ; Pixel-Byte
(1)  432/    A88D : 7B 02                                       jr      c, plv22
(1)  433/    A88F : F0 EE                                       swap    r14             ; 4 Bit Farbe (high nibble) fÃ¼r Pixel
(1)  434/    A891 :                                     plv22:
(1)  435/    A891 : 10 EE                                       rlc     r14
(1)  436/    A893 : 10 E8                                       rlc     r8              ; R
(1)  437/    A895 :                     
(1)  438/    A895 : 10 EE                                       rlc     r14
(1)  439/    A897 : 10 E9                                       rlc     r9              ; G
(1)  440/    A899 :                     
(1)  441/    A899 : 10 EE                                       rlc     r14
(1)  442/    A89B : 10 EA                                       rlc     r10             ; B
(1)  443/    A89D :                     
(1)  444/    A89D : 10 EE                                       rlc     r14
(1)  445/    A89F : 10 EB                                       rlc     r11             ; H
(1)  446/    A8A1 :                     
(1)  447/    A8A1 : 5A E6                               djnz    r5, plv11
(1)  448/    A8A3 :                     
(1)  449/    A8A3 : EC 60                               ld      r14, #60h
(1)  450/    A8A5 : FC 7F                               ld      r15, #01111111b         ;Farb-BÃ¤nke = RGBHxxxx
(1)  451/    A8A7 :                     
(1)  452/    A8A7 : 92 FE                               lde     @rr14, r15              ;R-Bank einschalten
(1)  453/    A8A9 : 92 86                               lde     @rr6, r8
(1)  454/    A8AB :                     
(1)  455/    A8AB : E0 EF                               rr      r15
(1)  456/    A8AD : 92 FE                               lde     @rr14, r15              ;G-Bank einschalten
(1)  457/    A8AF : 92 96                               lde     @rr6, r9
(1)  458/    A8B1 :                     
(1)  459/    A8B1 : E0 EF                               rr      r15
(1)  460/    A8B3 : 92 FE                               lde     @rr14, r15              ;B-Bank einschalten
(1)  461/    A8B5 : 92 A6                               lde     @rr6, r10
(1)  462/    A8B7 :                     
(1)  463/    A8B7 : E0 EF                               rr      r15
(1)  464/    A8B9 : 92 FE                               lde     @rr14, r15              ;H-Bank einschalten
(1)  465/    A8BB : 92 B6                               lde     @rr6, r11
(1)  466/    A8BD :                     
(1)  467/    A8BD : AF                                  ret
(1)  468/    A8BE :                     
(1)  469/    A8BE :                     ;------------------------------------------------------------------------------                         
(1)  470/    A8BE :                     XPY_to_vram:
(1)  471/    A8BE :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  472/    A8BE :                     
(1)  473/    A8BE : 2C AA                               ld      r2, #hi(VRAM_TAB_HI) ;-+
(1)  474/    A8C0 : 4C AB                               ld      r4, #hi(VRAM_TAB_LO) ; |
(1)  475/    A8C2 :                                                             ;      |
(1)  476/    A8C2 : 88 4F                               ld      r8, var_X_lo    ;      | 
(1)  477/    A8C4 :                                                             ;      |
(1)  478/    A8C4 :                                     ;r8 = x / 8 (x = 0-319) ;      |
(1)  479/    A8C4 :                                                             ;      |
(1)  480/    A8C4 : 56 E8 F8                            and     r8, #11111000b  ;      |
(1)  481/    A8C7 : 44 4E E8                            or      r8, var_X_hi    ;      |
(1)  482/    A8CA : 90 E8                               rl      r8              ;      |
(1)  483/    A8CC : F0 E8                               swap    r8              ;      |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 82 - 11/21/2024 11:26:38


(1)  484/    A8CE :                                                             ;      |
(1)  485/    A8CE : 38 51                               ld      r3, var_Y_lo    ;      |
(1)  486/    A8D0 : 58 E3                               ld      r5, r3          ;      |
(1)  487/    A8D2 : 82 62                               lde     r6, @rr2        ;      |
(1)  488/    A8D4 : 82 74                               lde     r7, @rr4        ;      |
(1)  489/    A8D6 :                                                             ;      |
(1)  490/    A8D6 : 02 78                               add     r7, r8          ;      |
(1)  491/    A8D8 :                                                             ;      |
(1)  492/    A8D8 : 58 4F                               ld      r5, var_X_lo    ;      |
(1)  493/    A8DA : 56 E5 07                            and     r5, #00000111b  ;      |
(1)  494/    A8DD :                                     ;or     r5, #11000000b  ;      |   kann entfallen bei align 100h
(1)  495/    A8DD : 82 34                               lde     r3, @rr4        ; -----+-> 122 Takte            
(1)  496/    A8DF : AF                                  ret                     ;   rr6 -> VRAM, r3 -> Bit-Position 
(1)  497/    A8E0 :                     
(1)  498/    A8E0 :                     ;------------------------------------------------------------------------------ 
(1)  499/    A8E0 :                     XPY_to_vram_r013:       
(1)  500/    A8E0 :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  501/    A8E0 :                                     
(1)  502/    A8E0 : 2C AA                               ld      r2,  #hi(VRAM_TAB_HI);-+
(1)  503/    A8E2 : AC AB                               ld      r10, #hi(VRAM_TAB_LO); |
(1)  504/    A8E4 :                                                             ;      |        
(1)  505/    A8E4 : B8 4F                               ld      r11, var_X_lo   ;      | 
(1)  506/    A8E6 :                                                             ;      |
(1)  507/    A8E6 :                                     ;r11 = x / 8 (x = 0-319);      |
(1)  508/    A8E6 :                                                             ;      |
(1)  509/    A8E6 : 56 EB F8                            and     r11, #11111000b ;      |
(1)  510/    A8E9 : 44 4E EB                            or      r11, var_X_hi   ;      |
(1)  511/    A8EC : 90 EB                               rl      r11             ;      |
(1)  512/    A8EE : F0 EB                               swap    r11             ;      |
(1)  513/    A8F0 :                                                             ;      |
(1)  514/    A8F0 : 38 51                               ld      r3, var_Y_lo    ;      |        
(1)  515/    A8F2 : B8 E3                               ld      r11, r3         ;      |
(1)  516/    A8F4 : 82 02                               lde     r0, @rr2        ;      |
(1)  517/    A8F6 : 82 1A                               lde     r1, @rr10       ;      |
(1)  518/    A8F8 :                                                             ;      |
(1)  519/    A8F8 : 02 1B                               add     r1, r11         ;      |
(1)  520/    A8FA :                                                             ;      |
(1)  521/    A8FA : B8 4F                               ld      r11, var_X_lo   ;      |
(1)  522/    A8FC : 56 EB 07                            and     r11, #00000111b ;      |
(1)  523/    A8FF :                                     ;or     r11, #11000000b ;      |   kann entfallen bei align 100h        
(1)  524/    A8FF : 82 3A                               lde     r3, @rr10       ; -----+-> 122 Takte            
(1)  525/    A901 : AF                                  ret                     ;   rr0 -> VRAM, r3 -> Bit-Position 
(1)  526/    A902 :                                     
(1)  527/    A902 :                     ;------------------------------------------------------------------------------ 
(1)  528/    A902 :                     XPY_to_vram_es40:
(1)  529/    A902 :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  530/    A902 :                     
(1)  531/    A902 : 31 60                               srp     #60h            ; -----+
(1)  532/    A904 : D6 0F BB                            call    0FBBh           ;      |
(1)  533/    A907 : E4 60 76                            ld      76h, 60h        ;      |        
(1)  534/    A90A : E4 61 77                            ld      77h, 61h        ;      |
(1)  535/    A90D : E4 63 73                            ld      73h, 63h        ;      |        
(1)  536/    A910 : 31 70                               srp     #70h            ; -----+-> 300 Takte    
(1)  537/    A912 : AF                                  ret                     ;   rr6 -> VRAM, r3 -> Bit-Position
(1)  538/    A913 :                             
(1)  539/    A913 :                     ;------------------------------------------------------------------------------         
(1)  540/    A913 :                     XBY_to_vram:    
(1)  541/    A913 :                                     ; P(xByte,y) to VRAM    ; IN: var_X, var_Y
(1)  542/    A913 :                                     ; r0,r2,r3,r4,r5,r6,r7
(1)  543/    A913 : 2C AA                               ld      r2, #hi(VRAM_TAB_HI) ;-+
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 83 - 11/21/2024 11:26:38


(1)  544/    A915 : 4C AB                               ld      r4, #hi(VRAM_TAB_LO) ; |                
(1)  545/    A917 : 08 4F                               ld      r0, var_X_lo    ; -----+
(1)  546/    A919 : 38 51                               ld      r3, var_Y_lo    ;      |
(1)  547/    A91B : 58 E3                               ld      r5, r3          ;      |
(1)  548/    A91D : 82 62                               lde     r6, @rr2        ;      |        
(1)  549/    A91F : 82 74                               lde     r7, @rr4        ;      |        
(1)  550/    A921 : 02 70                               add     r7, r0          ; -----+-> 48 Takte
(1)  551/    A923 : AF                                  ret                     ;  rr6 -> VRAM
(1)  552/    A924 :                                     
(1)  553/    A924 :                     ;------------------------------------------------------------------------------ 
(1)  554/    A924 :                     vram_inc_y_es40:
(1)  555/    A924 :                                     ; nÃ¤chste VRAM-Adr. in Y-Richtung 
(1)  556/    A924 :                                     
(1)  557/    A924 : 06 E7 28                            add     R7, #28h        ; 10 BWS-lo + 28h (40)
(1)  558/    A927 : 7B 08                               jr      C,  vram1       ; 10/12
(1)  559/    A929 : 4B 07                               jr      OV, vram2       ; 10/12
(1)  560/    A92B : 66 E7 78                            tcm     R7, #78h        ; 10    
(1)  561/    A92E : EB 08                               jr      NZ, vram3       ; 10/12
(1)  562/    A930 : 0B                                  db  0Bh                 ; 10/12 0Bh = JR F (also niemals), irgendwo hin
(1)  563/    A931 :                                                             ;       Distanz (opcode inc r6)                 
(1)  564/    A931 :                                                             ; wenn Z = 0, springe nicht (2 Bytes)
(1)  565/    A931 :                                                             ; wenn Z = 1, Distanz wird als "inc r6" gelesen                         
(1)  566/    A931 : 6E                  vram1:          inc     R6              ; 6
(1)  567/    A932 : 06 E7 08            vram2:          add     R7, #8          ; 10 
(1)  568/    A935 : 16 E6 00                            adc     R6, #0          ; 10
(1)  569/    A938 : AF                  vram3:          ret
(1)  570/    A939 :                             
(1)  571/    A939 :                     
(1)  572/    A939 :                     
(1)  573/    A939 :                     ;------------------------------------------------------------------------------
(1)  574/    A939 :                     
(1)  575/    A939 :                                     align 100h                      ; VRAM-Tab muss XX00-Adr. sein
(1)  576/    AA00 :                                     
(1)  577/    AA00 : =0AA00H              RAM_START       equ     $                       ; 
(1)  578/    AA00 :                                     ds      200h                    ; LÃ¤nge der P(x,y) zu VRAM Tabelle 
(1)  579/    AC00 :                     zoom_buffer     ds      32                      ; Zoom-Buffer fÃ¼r FGL_CHAROUT
(1)  580/    AC20 :                     
(1)  581/    AC20 :                     
(1)  582/    AC20 :                     
(1)  583/    AC20 :                                             
(1)  584/    AC20 :                     
    1140/    AC20 :                     
    1141/    AC20 :                     ;------------------------------------------------------------------------------
    1142/    AC20 :                     
    1143/    AC20 :                                     align 100h
    1144/    AD00 :                     
    1145/    AD00 :                     banner_buffer:  ds      (banner_end - banner_start) * 8
    1146/    B3E0 :                     
    1147/    B3E0 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 84 - 11/21/2024 11:26:38


  Symbol Table (* = unused):
  --------------------------

*ADRE :                        0CA9 - |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
*ATH16 :                       0CD5 - | *ATH4 :                        0CB8 - |
*ATH8 :                        0CDC - |  BANNERTOVRAM :                81BF C |
 BANNER_BUFFER :              0AD00 C |  BANNER_END :                  82C4 - |
 BANNER_LEN :                   0DC - |  BANNER_START :                81E8 - |
 BASE :                        8000 - |  BG :                          92A0 C |
*CASESENSITIVE :                  0 - | *CHARIN :                       815 - |
 CHAROUT :                      818 - |  CHECKKEY :                    8165 C |
 CHEXIT :                      816E C |  CITV1 :                      0A735 C |
 CITV2 :                      0A733 C | *CLINES :                      9100 C |
 CLRLINEG :                    83FC C |  CLRLINEW :                    840C C |
 CLS_1 :                      0A84E C |  CMASK :                         3F - |
 COLORS_PER_LINE :                4 - | *CONSTPI :        3.141592653589793 - |
 CTB1 :                        82EF C |  CTB2 :                        82CE C |
 CTB3 :                        82F9 C |  CTV1 :                        81CD C |
 CTV2 :                        81CB C | *CUPOS :                         5B - |
*C_BS :                           8 - | *C_CLS :                         0C - |
*C_DEL :                          7 - | *C_DOWN :                         4 - |
*C_ENTER :                       0D - | *C_ESC :                         0E - |
*C_HOME :                         5 - | *C_INS :                          9 - |
*C_LDEL :                        0A - | *C_LEFT :                         1 - |
*C_LINS :                        0B - | *C_RIGHT :                        2 - |
*C_SOL :                          6 - | *C_UP :                           3 - |
*DATE :                "11/21/2024" - | *DAXTH16 :                     0A52 - |
 DL2 :                         846F C |  DL22 :                        8ADA C |
 DLN1 :                        846C C |  DLN11 :                       8AD7 C |
 DLN2 :                        8467 C |  DLN22 :                       8AD2 C |
 DLR1 :                        8A84 C |  DLR11 :                       904F C |
 DLRRET :                      8A90 C |  DLRRET2 :                     905B C |
 DLS1 :                        83B8 C |  DLS2 :                        83AA C |
 DLS22 :                       83DF C |  DLS3 :                        83AD C |
 DLS33 :                       83E2 C |  DLS4 :                        83D1 C |
*DRAW :                        17F7 - |  DRAWLINEG :                   842D C |
 DRAWLINES :                   838B C |  DRAWLINEW :                   8A98 C |
*ES40_INC :                    8000 C | *FALSE :                          0 - |
 FGL_BMP_TO_VRAM :            0A710 C |  FGL_CHAROUT :                0A778 C |
 FGL_CLS :                    0A839 C |  FGL_INIT :                   0A7F2 C |
 FGL_PRISTRI :                0A748 C |  FGL_TIMER :                  0A860 C |
 FI1 :                         817B C |  FI2 :                         8180 C |
 FLAGS :                        0FC - | *FULLPMMU :                       1 - |
*HAS64 :                          0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - | *HIDEPLAYER :                   833 - |
*HTA16 :                       0C69 - | *HTA4 :                        0C7B - |
*HTA8 :                        0C72 - | *IMR :                          0FB - |
*INSUPMODE :                      0 - |  INVERTRECT :                  8177 C |
*IPR :                          0F9 - | *IRQ :                          0FA - |
 JU_TE_LOGO :                 0A62F C |  KC_LOGO :                    0A400 C |
 KEY :                          81B - |  KOMMAND :                      812 - |
 LINES :                         0A - | *LISTON :                         1 - |
*LOAD :                         824 - |  MA1 :                         815C C |
*MA2 :                         8155 C | *MA3 :                         8149 C |
*MA4 :                         8146 C | *MACEXP :                         7 - |
*MACROS_INC :                  8000 C |  MAKEMASKMAP :                 9063 C |
 MAKE_VT1 :                   0A7FE C |  MAKE_VT2 :                   0A82D C |
 MAKE_VT3 :                   0A81B C |  MCLINES :                     9200 C |
 MH_LOGO :                    0A54E C |  MMM1 :                        9071 C |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 85 - 11/21/2024 11:26:38


*MOMCPU :                      8601 - | *MOMCPUNAME :               "Z8601" - |
*MONITOR :                      82A - |  MOVEONECHAR :                 81A1 C |
 MOVESCREEN :                  830C C |  MS1 :                         8318 C |
 NCHARS :                        28 - |  NEG :                         8455 C |
 NEG2 :                        8AC0 C | *NESTMAX :                      100 - |
 NUMVAL :                     0AC00 - |  OC1 :                         81B3 C |
*P0 :                             0 - |  P01M :                         0F8 - |
*P1 :                             1 - | *P2 :                             2 - |
*P2M :                          0F6 - | *P3 :                             3 - |
*P3M :                          0F7 - | *PADDING :                        1 - |
 PC1 :                        0A798 C |  PC4 :                        0A79C C |
*PCAS :                        0C9B - |  PCC1 :                       0A7A8 C |
 PCC2 :                       0A7A2 C |  PCC5 :                       0A7C0 C |
 PCC6 :                       0A7BA C |  PCC8 :                       0A7E0 C |
 PCC9 :                       0A7CF C |  PI :                      3.141592 - |
*PLOT :                        17FD - |  PLV11 :                      0A889 C |
 PLV22 :                      0A891 C | *PMON :                        0AF7 - |
*POS :                         844C C | *POS2 :                        8AB7 C |
 PRC1 :                       0A74E C |  PRC2 :                       0A767 C |
 PRCRET :                     0A76F C | *PRE0 :                         0F5 - |
*PRE1 :                         0F3 - |  PREPAREBANNER :               82C4 C |
*PRISTRI :                      82D - | *PRRET :                       0C8D - |
*PTEST :                       17FA - |  RAM_START :                  0AA00 - |
*RELAXED :                        0 - | *RND :                          836 - |
*RP :                           0FD - | *RWCONT :                      0C91 - |
*SAVE :                         821 - |  SAVEH :                         6A - |
 SAVEL :                         6B - | *SCRFUN :                       827 - |
 SETVRAM :                    0A887 C | *SHOWPLAYER :                   830 - |
*SIO :                          0F0 - |  SPH :                          0FE - |
 SPL :                          0FF - | *STA1 :                        8014 C |
*START :                       8000 C |  SWITCHCOLORS :                8343 C |
 SWS1 :                        8349 C |  SWS2 :                        835C C |
 SWS3 :                        837B C |  SWS4 :                        8383 C |
*T0 :                           0F4 - | *T1 :                           0F2 - |
*TIME :                  "11:26:38" - |  TINY_LOGO :                  0A459 C |
 TL1 :                         8422 C |  TL2 :                         841F C |
 TLINE :                       841C C |  TM0 :                        0A86B C |
 TM1 :                        0A877 C |  TM2 :                        0A875 C |
 TMEND :                      0A885 C | *TMR :                          0F1 - |
*TRUE :                           1 - |  VALUE :                         1C - |
*VAR_A_HI :                      20 - |  VAR_A_LO :                      21 - |
 VAR_B_HI :                      22 - |  VAR_B_LO :                      23 - |
*VAR_C_HI :                      24 - | *VAR_C_LO :                      25 - |
*VAR_D_HI :                      26 - | *VAR_D_LO :                      27 - |
*VAR_E_HI :                      28 - | *VAR_E_LO :                      29 - |
*VAR_F_HI :                      2A - | *VAR_F_LO :                      2B - |
*VAR_G_HI :                      2C - | *VAR_G_LO :                      2D - |
*VAR_H_HI :                      2E - | *VAR_H_LO :                      2F - |
*VAR_I_HI :                      30 - | *VAR_I_LO :                      31 - |
*VAR_J_HI :                      32 - | *VAR_J_LO :                      33 - |
*VAR_K_HI :                      34 - | *VAR_K_LO :                      35 - |
 VAR_L_HI :                      36 - | *VAR_L_LO :                      37 - |
*VAR_M_HI :                      38 - | *VAR_M_LO :                      39 - |
*VAR_N_HI :                      3A - | *VAR_N_LO :                      3B - |
*VAR_O_HI :                      3C - | *VAR_O_LO :                      3D - |
*VAR_P_HI :                      3E - | *VAR_P_LO :                      3F - |
*VAR_Q_HI :                      40 - | *VAR_Q_LO :                      41 - |
*VAR_R_HI :                      42 - | *VAR_R_LO :                      43 - |
*VAR_S_HI :                      44 - | *VAR_S_LO :                      45 - |
 VAR_T_HI :                      46 - |  VAR_T_LO :                      47 - |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 86 - 11/21/2024 11:26:38


 VAR_U_HI :                      48 - |  VAR_U_LO :                      49 - |
 VAR_V_HI :                      4A - |  VAR_V_LO :                      4B - |
*VAR_W_HI :                      4C - |  VAR_W_LO :                      4D - |
 VAR_X_HI :                      4E - |  VAR_X_LO :                      4F - |
 VAR_Y_HI :                      50 - |  VAR_Y_LO :                      51 - |
 VAR_Z_HI :                      52 - |  VAR_Z_LO :                      53 - |
*VERSION :                     142F - |  VRAM :                        4000 - |
 VRAM1 :                      0A931 C |  VRAM10 :                      8A78 C |
 VRAM100 :                     9043 C |  VRAM2 :                      0A932 C |
 VRAM20 :                      8A79 C |  VRAM200 :                     9044 C |
 VRAM3 :                      0A938 C |  VRAM30 :                      8A7F C |
 VRAM300 :                     904A C |  VRAM_END :                    5FFF - |
 VRAM_INC_Y_ES40 :            0A924 C |  VRAM_LEN :                    1FFF - |
 VRAM_TAB_HI :                0AA00 - |  VRAM_TAB_LO :                0AB00 - |
*WKEY :                         81E - |  X :                             40 - |
 XBY_TO_VRAM :                0A913 C | *XPY_TO_VRAM :                0A8BE C |
*XPY_TO_VRAM_ES40 :           0A902 C | *XPY_TO_VRAM_R013 :           0A8E0 C |
 XW :                            40 - |  Y_POS_RING_BUFFER :           9300 C |
 ZG_KCC :                      9400 C |  ZG_Z9001 :                    9C00 C |
 ZOOM_BUFFER :                0AC00 C |

    271 symbols
    124 unused symbols

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 87 - 11/21/2024 11:26:38


  Defined Macros:
  ---------------

LDRR{NOEXPIF,NOEXPAND}                |

      1 macro

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 88 - 11/21/2024 11:26:38


  Defined Functions:
  ------------------

LO                                    | HI                                   

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 89 - 11/21/2024 11:26:38


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.07 seconds assembly time

   2213 lines source file
   6751 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
