 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 1 - 11/22/2024 22:53:50


       1/       0 :                     ;------------------------------------------------------------------------------
       2/       0 :                     ; Title:                KCcompact Demo fÃ¼r JuTe 6K
       3/       0 :                     ;
       4/       0 :                     ; Erstellt:             10.10.2024
       5/       0 :                     ; Letzte Ã„nderung:      15.11.2024
       6/       0 :                     ;------------------------------------------------------------------------------ 
       7/       0 :                     
       8/       0 :                                     cpu     z8601
       9/       0 :                                     assume RP:0C0h                  ; Keine Register-Optimierung
      10/       0 :                                     
      11/       0 : =>DEFINED                    ifndef  BASE
      12/       0 :                                     BASE:   set     8000H   
      13/       0 : [11]                         endif   
      14/    8000 :                                     org     BASE
      15/    8000 :                                     
      16/    8000 : =>UNDEFINED                  ifndef  ES40_INC                
      17/    8000 :                                     include ../ES4.0/es40_inc.asm
(1)    1/    8000 :                     ;-----------------------------------------------------------------------------
(1)    2/    8000 :                     ; JU+TE TINY  ES4.0
(1)    3/    8000 :                     ; Include-Datei mit Systemfunktionen, V. Pohlers 12/2022
(1)    4/    8000 :                     ;------------------------------------------------------------------------------
(1)    5/    8000 :                     
(1)    6/    8000 :                     ES40_INC                                ; Flag für include-Anweisungen
(1)    7/    8000 :                     
(1)    8/    8000 :                     ; Prozeduren aus ES40
(1)    9/    8000 :                     
(1)   10/    8000 :                     ; In all diesen Routinen wird vorausgesetzt, daß der Registerpointer auf %10 steht
(1)   11/    8000 : =0AF7H               PMON            equ     0AF7h           ; druckt "Mon" und einen Returncode aus. Wenn ein Befehl nach erfolgreicher Ausführung "Mon" melden soll, dann ist er statt mit RET mit JP %0AF7 zu beenden.
(1)   12/    8000 : =0C69H               HTA16           equ     0C69h           ; druckt die 16 Bit aus %18/19 als 4-Ziffer-Hexzahl aus, %18/19 zerstört
(1)   13/    8000 : =0C72H               HTA8            equ     0C72h           ; druckt die 8 Bit aus %19 als 2-Ziffer-Hexzahl aus, %19 zerstört
(1)   14/    8000 : =0C7BH               HTA4            equ     0C7Bh           ; druckt die niederen 4 Bit aus %19 als Hexziffer aus, %19 zerstört
(1)   15/    8000 : =0C8DH               PRRET           equ     0C8Dh           ; druckt einen Return-Kode aus (%0D)
(1)   16/    8000 : =0C91H               RWCONT          equ     0C91h           ; druckt einen Return-Kode aus und wartet dann auf Tastendruck, wenn die Leertaste gedrückt wurde ist das Z-Flag gesetzt
(1)   17/    8000 : =0C9BH               PCAS            equ     0C9Bh           ; druckt das Zeichen aus %15 aus, dann die 16 Bit aus %1A/1B (%18/19 zerstört) als Hexzahl und noch ein Leerzeichen 
(1)   18/    8000 : =0CA9H               ADRE            equ     0CA9h           ; wandelt die 4 Ziffern ab Adresse (%1E/1F) nach %1C/1D und %lA/1B, bei Wandlungsfehler wird POP POP RET ausgeführt, sonst Rückkehr mit um fünf erhöhtem %1F
(1)   19/    8000 : =0CB8H               ATH4            equ     0CB8h           ; wandelt die Ziffer von (%1E/1F) in niedere 4 Bit von %1D, %1F um eins erhöht
(1)   20/    8000 : =0CD5H               ATH16           equ     0CD5h           ; wandelt 4 Ziffern ab (%1E/1F) nach %1C/1D, %12 zerstört, %1F um vier erhöht
(1)   21/    8000 : =0CDCH               ATH8            equ     0CDCh           ; wandelt 2 Ziffern ab (%1E/1F) nach %1D, %12 zerstört, %1F um zwei erhöht
(1)   22/    8000 : =0A52H               DAXTH16         equ     0A52h           ; wandelt eine 1 bis 5 Ziffern lange Dezimalzahl (0 bis 65535) ab (%1E/1F) nach %14/15, %12/13 und %1C/1D zerstört, %1F um Anzahl der gewandelten Ziffern erhöht
(1)   23/    8000 :                     
(1)   24/    8000 :                     ; RP-unabhängig
(1)   25/    8000 : =812H                KOMMAND         equ     0812h           ; Einsprung nach RESET, Returnadr. f. externe Programme
(1)   26/    8000 : =815H                CHARIN          equ     0815h           ; CHARIN liefert in %13 nacheinander die Zeichen einer vom FSE editierten Zeile, als letztes noch %0D (returncode)
(1)   27/    8000 : =818H                CHAROUT         equ     0818h           ; CHAROUT führt das Zeichen aus %15 auf dem Bildschirm aus und gibt es evt. noch auf den Drucker (siehe Register %55) aus.
(1)   28/    8000 : =81BH                KEY             equ     081Bh           ; KEY liefert den ASCII-Kode der momentan gedrückten Taste in %6D, wenn keine gedrückt, dann %00
(1)   29/    8000 : =81EH                WKEY            equ     081Eh           ; WKEY wartet mit Kursordarstellung auf einen Tastendruck und liefert den ASCII-Kode dann in %13
(1)   30/    8000 : =821H                SAVE            equ     0821h           ; SAVE speichert den Speicherbereich auf Kassette, dessen Anfangsadresse in %20/21 steht mit der in %22/23 angegebenen Anzahl von Bytes ab
(1)   31/    8000 : =824H                LOAD            equ     0824h           ; LOAD lädt ab der in %20/21 stehenden Adresse die Daten von Kassette in den Speicher und gibt in %22/23 die Anzahl der fehlerfrei geladenen Byte zurück
(1)   32/    8000 : =827H                SCRFUN          equ     0827h           ; Spezialfunktionen für den Textbildschirm
(1)   33/    8000 :                                                             ; Z=0 -> liefert in X (Spalte) und in Y (Zeile) die Position des Textkursors.
(1)   34/    8000 :                                                             ; Z=1 -> setzt den Textkursor auf X (Spalte) und in Y (Zeile)
(1)   35/    8000 :                                                             ; Z=2 -> liefert in Z den ASCII-Kode des Zeichens an Position X (Spalte) und Y (Zeile).
(1)   36/    8000 : =82AH                MONITOR         equ     082Ah           ; ruft den Maschinenmonitor MON auf
(1)   37/    8000 : =82DH                PRISTRI         equ     082Dh           ; druckt eine Zeichenkette über CHAROUT aus, die nach dem CALL-Aufruf beginnt und mit einem %00-Kode endet.
(1)   38/    8000 : =830H                SHOWPLAYER      equ     0830h           ; zeichnet Sprite X,Y-Postion, V-Video(Farbe), W-Adr. Sprite (48 Byte), Z-Adr. BG-Buffer (48 Byte)
(1)   39/    8000 : =833H                HIDEPLAYER      equ     0833h           ; löscht Sprite
(1)   40/    8000 : =836H                RND             equ     0836h           ; liefert nach jedem Aufruf in %74/75 eine 16-Bit-Zufallszahl
(1)   41/    8000 :                     
(1)   42/    8000 :                     ; Grafik. Die Farbe wird immer in Z übergeben
(1)   43/    8000 : =17F7H               DRAW            equ     17F7h           ; DRAW verbindet die Punkte (V,W) und (X,Y) durch eine Gerade der Farbe Z
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 2 - 11/22/2024 22:53:50


(1)   44/    8000 : =17FAH               PTEST           equ     17FAh           ; PTEST liefert die Farbe des Punktes (X,Y) in Z
(1)   45/    8000 : =17FDH               PLOT            equ     17FDh           ; PLOT setzt den Punkt (X,Y) mit der Farbe aus Z
(1)   46/    8000 :                     
(1)   47/    8000 :                     ; Systemzellen
(1)   48/    8000 : =5BH                 cupos           equ     5Bh             ; 2 Byte Position (X = 0..39,Y = 0..23)
(1)   49/    8000 :                     ; %56/57        Sprungvektor für IRQ
(1)   50/    8000 :                     ; %58           OSD (Zeilenlänge)   
(1)   51/    8000 :                     ; %67           H-Byte Startadresse Zeichensatz
(1)   52/    8000 :                     ; %6C           Tastaturfu nktionen
(1)   53/    8000 :                     
(1)   54/    8000 :                     ; Speicher
(1)   55/    8000 :                     ; %4000-5FFF    Video-RAM-Bänke
(1)   56/    8000 :                     ; %6000-63FF    Steuerregister für Videorambankauswahl
(1)   57/    8000 :                     ; %E000-F4FF    Std.RAM, frei zur Nutzung
(1)   58/    8000 :                     ; %F500-F511    IRQ-Sprünge
(1)   59/    8000 :                     ; %F600-F6FF    Stack
(1)   60/    8000 :                     ; %F700-F74F    Zeilenspeicher bei Rückkehr aus Routine CHARIN
(1)   61/    8000 :                     ; (%F800-FBFF   zweiter ASCII-Textspeicher)
(1)   62/    8000 :                     ; (%FC00-FFBF   ASCII-Textspeicher)
(1)   63/    8000 :                     ; %FFC0-FFFF    I/O-Vektortabelle
(1)   64/    8000 :                     
(1)   65/    8000 :                     ;------------------------------------------------------------------------------
(1)   66/    8000 :                     ; Speicher 
(1)   67/    8000 :                     ;------------------------------------------------------------------------------
(1)   68/    8000 :                     
(1)   69/    8000 :                     ; Register %67          Zeichensatz (hi-Byte)
(1)   70/    8000 :                     ; 
(1)   71/    8000 :                     ; in Klammern: nach Möglichkeit keine direkten Zugriffe
(1)   72/    8000 :                     ; OS: vom ES4.0 in einigen Routinen genutzt
(1)   73/    8000 :                     ; OSD: vom ES4.0 ständig genutzt
(1)   74/    8000 :                     ; %0000-07FF interner ROM des U883
(1)   75/    8000 :                     ; %0800-1FFF Betriebssystem ES4.0 auf EPROM 2764
(1)   76/    8000 :                     ; %2000-3FFF frei
(1)   77/    8000 :                     ; %4000-5FFF Video-RAM-bänke
(1)   78/    8000 :                     ; %6000-63FF Steuerregister für Videorambankauswahl
(1)   79/    8000 :                     ; %6400-7BFF frei (für IO-Geräte, Ramdisk, ...)
(1)   80/    8000 :                     ; %7000-7FFF Tastaturabfrage
(1)   81/    8000 :                     ; %8000- RAM-Beginn bei 32 KByte Vollausbau
(1)   82/    8000 :                     ; %C000- RAM-Beginn bei 16 KByte
(1)   83/    8000 :                     ; %E000- RAM-Beginn bei 8 KByte
(1)   84/    8000 :                     ; bis F4FF RAM, frei zur Nutzung
(1)   85/    8000 :                     ; %F500-F511 IRQ-Sprünge
(1)   86/    8000 :                     ; %F512-F579 RAM für Druckroutine, siehe 8.
(1)   87/    8000 :                     ; (%F57B-F5FF Kassettenpuffer)
(1)   88/    8000 :                     ; %F600-F6FF Stack
(1)   89/    8000 :                     ; %F700-F74F Zeilenspeicher bei Rückkehr aus Routine CHARIN
(1)   90/    8000 :                     ; (%F750-F76F RAM für Gleitkommaroutinen)
(1)   91/    8000 :                     ; %F770-F77F noch frei
(1)   92/    8000 :                     ; (%F780-F78F Registerspeicher des MON)
(1)   93/    8000 :                     ; %F790-F79F noch frei
(1)   94/    8000 :                     ; %F7A0 Bitmaske für Textzeichen, siehe 11.
(1)   95/    8000 :                     ; %F7A1 Bitmaske für Kursor, siehe 11.
(1)   96/    8000 :                     ; (%F7A2-F7AB OSD)
(1)   97/    8000 :                     ; (%F7AC-F7DF evtl. später OSD)
(1)   98/    8000 :                     ; %F7E0-F7FF Funktionstastenprogramme
(1)   99/    8000 :                     ; (%F800-FBFF zweiter ASCII-Textspeicher)
(1)  100/    8000 :                     ; (%FC00-FFBF ASCII-Textspeicher)
(1)  101/    8000 :                     ; %FFC0-FFFF IO-Vektortabelle, siehe 16
(1)  102/    8000 :                     ; 
(1)  103/    8000 :                     ; %F512 Drucker-Routine
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 3 - 11/22/2024 22:53:50


(1)  104/    8000 :                     ; 
(1)  105/    8000 :                     ; Aufzeichnungsverfahren
(1)  106/    8000 :                     ; Fileaufbau: 5s Vorton, Blöcke mit Pause von 40 ms
(1)  107/    8000 :                     ; Blocksendung: Vorimpuls (eine Phase mit 0.5 ms), %85 Bytes
(1)  108/    8000 :                     ; Blockaufbau: (Adresse im Kassettenpuffer als erste Zahl)
(1)  109/    8000 :                     ; %F57B Blocknummer %00 bis %FF, evt. wieder von vorn
(1)  110/    8000 :                     ; %F57C Kopie von %F57B
(1)  111/    8000 :                     ; %F57D Prüfsumme über Formatbyte und Datenbytes (Byte-Summe mit dazuaddierten Carrys)
(1)  112/    8000 :                     ; %F57E Kopie von %F57D
(1)  113/    8000 :                     ; %F57F Formatbyte: %FA: weniger als 128 Datenbyte. Anzahl der gültigen Datenbyte auf %F5FF
(1)  114/    8000 :                     ;       %FC: 128 Datenbyte
(1)  115/    8000 :                     ;       %FE: End of File Block, ohne sinnvolle Datenbytes
(1)  116/    8000 :                     ; %F580-F5FF Datenbytes
(1)  117/    8000 :                     
(1)  118/    8000 :                     
(1)  119/    8000 :                     ; Control-Codes, Steuerkodes
(1)  120/    8000 :                     ; C_00:         EQU     00h             ; nicht belegt
(1)  121/    8000 : =1H                  C_LEFT:         EQU     01h             ; Kursor links
(1)  122/    8000 : =2H                  C_RIGHT:        EQU     02h             ; Kursor rechts
(1)  123/    8000 : =3H                  C_UP:           EQU     03h             ; Kursor hoch
(1)  124/    8000 : =4H                  C_DOWN:         EQU     04h             ; Kursor runter
(1)  125/    8000 : =5H                  C_HOME:         EQU     05h             ; HOM (home)
(1)  126/    8000 : =6H                  C_SOL:          EQU     06h             ; SOL (start of line)
(1)  127/    8000 : =7H                  C_DEL:          EQU     07h             ; DEL (delete)
(1)  128/    8000 : =8H                  C_BS:           EQU     08h             ; DBS (delete back space)
(1)  129/    8000 : =9H                  C_INS:          EQU     09h             ; INS (insert)
(1)  130/    8000 : =0AH                 C_LDEL:         EQU     0Ah             ; LDE (line delete)
(1)  131/    8000 : =0BH                 C_LINS:         EQU     0Bh             ; LIN (line insert)
(1)  132/    8000 : =0CH                 C_CLS:          EQU     0Ch             ; CLS (clear screen)
(1)  133/    8000 : =0DH                 C_ENTER:        EQU     0Dh             ; RET (return)
(1)  134/    8000 : =0EH                 C_ESC:          EQU     0Eh             ; ESC (return)
(1)  135/    8000 :                     ; C_0F:         EQU     0Fh             ; nicht belegt
(1)  136/    8000 :                     
(1)  137/    8000 :                     
(1)  138/    8000 :                     ;------------------------------------------------------------------------------
(1)  139/    8000 :                     
(1)  140/    8000 :                     ; BASIC-Variablen
(1)  141/    8000 :                     
(1)  142/    8000 : =20H                 var_A_hi        equ     20h
(1)  143/    8000 : =21H                 var_A_lo        equ     21h
(1)  144/    8000 : =22H                 var_B_hi        equ     22h
(1)  145/    8000 : =23H                 var_B_lo        equ     23h
(1)  146/    8000 : =24H                 var_C_hi        equ     24h
(1)  147/    8000 : =25H                 var_C_lo        equ     25h
(1)  148/    8000 : =26H                 var_D_hi        equ     26h
(1)  149/    8000 : =27H                 var_D_lo        equ     27h
(1)  150/    8000 : =28H                 var_E_hi        equ     28h
(1)  151/    8000 : =29H                 var_E_lo        equ     29h
(1)  152/    8000 : =2AH                 var_F_hi        equ     2Ah
(1)  153/    8000 : =2BH                 var_F_lo        equ     2Bh
(1)  154/    8000 : =2CH                 var_G_hi        equ     2Ch
(1)  155/    8000 : =2DH                 var_G_lo        equ     2Dh
(1)  156/    8000 : =2EH                 var_H_hi        equ     2Eh
(1)  157/    8000 : =2FH                 var_H_lo        equ     2Fh
(1)  158/    8000 : =30H                 var_I_hi        equ     30h
(1)  159/    8000 : =31H                 var_I_lo        equ     31h
(1)  160/    8000 : =32H                 var_J_hi        equ     32h
(1)  161/    8000 : =33H                 var_J_lo        equ     33h
(1)  162/    8000 : =34H                 var_K_hi        equ     34h
(1)  163/    8000 : =35H                 var_K_lo        equ     35h
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 4 - 11/22/2024 22:53:50


(1)  164/    8000 : =36H                 var_L_hi        equ     36h
(1)  165/    8000 : =37H                 var_L_lo        equ     37h
(1)  166/    8000 : =38H                 var_M_hi        equ     38h
(1)  167/    8000 : =39H                 var_M_lo        equ     39h
(1)  168/    8000 : =3AH                 var_N_hi        equ     3Ah
(1)  169/    8000 : =3BH                 var_N_lo        equ     3Bh
(1)  170/    8000 : =3CH                 var_O_hi        equ     3Ch
(1)  171/    8000 : =3DH                 var_O_lo        equ     3Dh
(1)  172/    8000 : =3EH                 var_P_hi        equ     3Eh
(1)  173/    8000 : =3FH                 var_P_lo        equ     3Fh
(1)  174/    8000 : =40H                 var_Q_hi        equ     40h
(1)  175/    8000 : =41H                 var_Q_lo        equ     41h
(1)  176/    8000 : =42H                 var_R_hi        equ     42h
(1)  177/    8000 : =43H                 var_R_lo        equ     43h
(1)  178/    8000 : =44H                 var_S_hi        equ     44h
(1)  179/    8000 : =45H                 var_S_lo        equ     45h
(1)  180/    8000 : =46H                 var_T_hi        equ     46h
(1)  181/    8000 : =47H                 var_T_lo        equ     47h
(1)  182/    8000 : =48H                 var_U_hi        equ     48h
(1)  183/    8000 : =49H                 var_U_lo        equ     49h
(1)  184/    8000 : =4AH                 var_V_hi        equ     4Ah
(1)  185/    8000 : =4BH                 var_V_lo        equ     4Bh
(1)  186/    8000 : =4CH                 var_W_hi        equ     4Ch
(1)  187/    8000 : =4DH                 var_W_lo        equ     4Dh
(1)  188/    8000 : =4EH                 var_X_hi        equ     4Eh
(1)  189/    8000 : =4FH                 var_X_lo        equ     4Fh
(1)  190/    8000 : =50H                 var_Y_hi        equ     50h
(1)  191/    8000 : =51H                 var_Y_lo        equ     51h
(1)  192/    8000 : =52H                 var_Z_hi        equ     52h
(1)  193/    8000 : =53H                 var_Z_lo        equ     53h
(1)  194/    8000 :                     
(1)  195/    8000 :                     ;------------------------------------------------------------------------------
(1)  196/    8000 :                     ; Z8-Register
(1)  197/    8000 :                     
(1)  198/    8000 : =0H                  P0              EQU     00H             ; Port 0
(1)  199/    8000 : =1H                  P1              EQU     01H             ; Port 1
(1)  200/    8000 : =2H                  P2              EQU     02H             ; Port 2
(1)  201/    8000 : =3H                  P3              EQU     03H             ; Port 3
(1)  202/    8000 : =0F0H                SIO             EQU     0F0H            ; serielles Ein-Ausgaberegister
(1)  203/    8000 : =0FCH                FLAGS           EQU     0FCH            ; Flagregister
(1)  204/    8000 : =0FEH                SPH             EQU     0FEH            ; Stackpointer, Highteil
(1)  205/    8000 : =0FFH                SPL             EQU     0FFH            ; Stackpointer, Lowteil
(1)  206/    8000 : =0F1H                TMR             EQU     0F1H            ; Zähler/Zeitgeberbetriebsart
(1)  207/    8000 : =0F4H                T0              EQU     0F4H            ; Zähler/Zeitgeberregister Kanal 0
(1)  208/    8000 : =0F2H                T1              EQU     0F2H            ; Zähler/Zeitgeberregister Kanal 1
(1)  209/    8000 : =0F5H                PRE0            EQU     0F5H            ; T0-Vorteilerregister
(1)  210/    8000 : =0F3H                PRE1            EQU     0F3H            ; T1-Vorteilerregister
(1)  211/    8000 : =0F8H                P01M            EQU     0F8H            ; Tor 0, Tor 1 Betriebsart
(1)  212/    8000 : =0F6H                P2M             EQU     0F6H            ; Tor 2 Betriebsart
(1)  213/    8000 : =0F7H                P3M             EQU     0F7H            ; Tor 3 Betriebsart
(1)  214/    8000 : =0FBH                IMR             EQU     0FBH            ; Interrupt-Maskierungsregister
(1)  215/    8000 : =0F9H                IPR             EQU     0F9H            ; Interrupt-Prioritätsregister
(1)  216/    8000 : =0FAH                IRQ             EQU     0FAH            ; Interrupt-Anmelderegister
(1)  217/    8000 : =0FDH                RP              EQU     0FDH            ; Registerpointer
(1)  218/    8000 :                     
(1)  219/    8000 :                     ;------------------------------------------------------------------------------
(1)  220/    8000 :                     ; AS-Funktionen
(1)  221/    8000 :                     hi      function x,(x>>8)&255
(1)  222/    8000 :                     lo      function x, x&255
(1)  223/    8000 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../ES4.0/es40_inc.asm) - Page 5 - 11/22/2024 22:53:50


(1)  224/    8000 :                     
(1)  225/    8000 :                     
(1)  226/    8000 :                     
      18/    8000 : [16]                         endif
      19/    8000 :                             
      20/    8000 : =>UNDEFINED                  ifndef  MACROS_INC
      21/    8000 :                                     include ../FGL/macros.asm
(1)    1/    8000 :                     ;------------------------------------------------------------------------------
(1)    2/    8000 :                     ; ASM-Macros
(1)    3/    8000 :                     ;------------------------------------------------------------------------------
(1)    4/    8000 :                     
(1)    5/    8000 :                     MACROS_INC                                ; Flag fÃ¼r include-Anweisungen
(1)    6/    8000 :                     
(1)    7/    8000 :                     ;------------------------------------------------------------------------------
(1)    8/    8000 :                     ; Macro zum Laden von Doppelregistern in Z8 Assembler
(1)    9/    8000 :                     ; 
(1)   10/    8000 :                     ; ldrr <Register>, <Wert>
(1)   11/    8000 :                     ;
(1)   12/    8000 :                     ; Register [rr0,2,4,6,8,10,12,14 | var_A-Z]
(1)   13/    8000 :                     ; Wert	   #[0-65535]
(1)   14/    8000 :                     ;
(1)   15/    8000 :                     ; Bsp.:    ldrr	rr0, #5555h
(1)   16/    8000 :                     ;	   ldrr var_A, #65535
(1)   17/    8000 :                     ;						
(1)   18/    8000 :                     ;------------------------------------------------------------------------------
(1)   19/    8000 :                     
(1)   20/    8000 :                     
(1)   21/    8000 :                     ldrr    MACRO    RRX, VALUE, {NOEXPIF}, {NOEXPAND}
(1)   22/    8000 :                     
(1)   23/    8000 :                     numval	set	val(substr(upstring("VALUE"), 1, 0))
(1)   24/    8000 :                     
(1)   25/    8000 :                     	if substr(upstring("RRX"),0,2) == "RR"
(1)   26/    8000 :                     
(1)   27/    8000 :                     		;message "Zielregister = RRX:  \{substr( upstring("RRX"), 1, 0)}"
(1)   28/    8000 :                     		if upstring("rrx") == "RR0"
(1)   29/    8000 :                     			ld	r0, #hi(numval)
(1)   30/    8000 :                     			ld	r1, #lo(numval)
(1)   31/    8000 :                     
(1)   32/    8000 :                     		elseif upstring("rrx") == "RR2"
(1)   33/    8000 :                     			ld	r2, #hi(numval)
(1)   34/    8000 :                     			ld	r3, #lo(numval)
(1)   35/    8000 :                     
(1)   36/    8000 :                     		elseif upstring("rrx") == "RR4"
(1)   37/    8000 :                     			ld	r4, #hi(numval)
(1)   38/    8000 :                     			ld	r5, #lo(numval)
(1)   39/    8000 :                     
(1)   40/    8000 :                     		elseif upstring("rrx") == "RR6"
(1)   41/    8000 :                     			ld	r6, #hi(numval)
(1)   42/    8000 :                     			ld	r7, #lo(numval)
(1)   43/    8000 :                     
(1)   44/    8000 :                     		elseif upstring("rrx") == "RR8"
(1)   45/    8000 :                     			ld	r8, #hi(numval)
(1)   46/    8000 :                     			ld	r9, #lo(numval)
(1)   47/    8000 :                     
(1)   48/    8000 :                     		elseif upstring("rrx") == "RR10"
(1)   49/    8000 :                     			ld	r10, #hi(numval)
(1)   50/    8000 :                     			ld	r11, #lo(numval)
(1)   51/    8000 :                     
(1)   52/    8000 :                     		elseif upstring("rrx") == "RR12"
(1)   53/    8000 :                     			ld	r12, #hi(numval)
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/macros.asm) - Page 6 - 11/22/2024 22:53:50


(1)   54/    8000 :                     			ld	r13, #lo(numval)
(1)   55/    8000 :                     
(1)   56/    8000 :                     		elseif upstring("rrx") == "RR14"
(1)   57/    8000 :                     			ld	r14, #hi(numval)
(1)   58/    8000 :                     			ld	r15, #lo(numval)
(1)   59/    8000 :                     		endif
(1)   60/    8000 :                     
(1)   61/    8000 :                     	elseif substr(upstring("RRX"), 0, 4) == "VAR_"
(1)   62/    8000 :                     
(1)   63/    8000 :                     		;message "Zielregister = RRX: RRX_HI"
(1)   64/    8000 :                     		ld	RRX_HI,   #hi(numval)
(1)   65/    8000 :                     		ld	RRX_HI+1, #lo(numval)
(1)   66/    8000 :                     
(1)   67/    8000 :                     	endif
(1)   68/    8000 :                     
(1)   69/    8000 :                      	ENDM
(1)   70/    8000 :                     
      22/    8000 : [20]                         endif                   
      23/    8000 :                     
      24/    8000 :                     ;------------------------------------------------------------------------------
      25/    8000 :                     ; main
      26/    8000 :                     ;------------------------------------------------------------------------------
      27/    8000 :                     
      28/    8000 : 31 70               start:          srp     #70h
      29/    8002 : D6 A7 F2                            call    FGL_INIT                 ; FGL initialisieren
      30/    8005 :                     
      31/    8005 :                                     ; Banner vorbereiten
      32/    8005 :                     
      33/    8005 : D6 82 C4                            call    prepareBanner
      34/    8008 : (MACRO)                              ldrr    var_B, #banner_buffer
      35/    800E : (MACRO)                              ldrr    var_L, #banner_len - nChars
      36/    8014 :                     
      37/    8014 :                                     ; Bildschirm lÃ¶schen
      38/    8014 :                     
      39/    8014 : E6 53 00                    sta1:   ld      var_Z_lo, #00000000b    ; alle FarbbÃ¤nke (RGBHxxxx) an
      40/    8017 : E6 52 00                            ld      var_Z_hi, #000h         ; alle Pixel 0 = schwarz
      41/    801A : D6 A8 39                            call    FGL_CLS
      42/    801D :                     
      43/    801D :                                     ; Texte und Logos
      44/    801D :                     
      45/    801D : (MACRO)                              ldrr    var_T, #zg_KCC          ; Zeichensatz (KCcompact) fÃ¼r FGL_PRISTRI 
      46/    8023 :                                     
      47/    8023 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      48/    8029 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      49/    802F : E6 4D F0                            ld      var_W_lo, #0F0h         ; Farbe ws/sw
      50/    8032 : E6 4F 00                            ld      var_X_lo, #0            ; x-Byte-Pos
      51/    8035 : E6 51 00                            ld      var_Y_lo, #0            ; y-Pos
      52/    8038 : E6 52 01                            ld      var_Z_hi, #1            ; Zoom-Faktor
      53/    803B : D6 A7 48                            call    FGL_PRISTRI             ; normal
      54/    803E : 4B 43 63 6F 6D 70                   db      'KCcompact',0
             8044 : 61 63 74 00       
      55/    8048 :                     
      56/    8048 : (MACRO)                              ldrr    rr12, #KC_LOGO          ; KC-Logo
      57/    804C : D6 A7 10                            call    FGL_BMP_TO_VRAM
      58/    804F :                                     
      59/    804F : (MACRO)                              ldrr    rr12, #MH_LOGO          ; MÃ¼hlhausen-Logo
      60/    8053 : D6 A7 10                            call    FGL_BMP_TO_VRAM
      61/    8056 :                                     
      62/    8056 : (MACRO)                              ldrr    var_U, #5               ; warten Zeile
      63/    805C : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 7 - 11/22/2024 22:53:50


      64/    8062 : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
      65/    8065 : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
      66/    8068 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
      67/    806B : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
      68/    806E : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
      69/    8071 : 4B 43 63 6F 6D 70                   db      'KCcompact',0
             8077 : 61 63 74 00       
      70/    807B :                                     
      71/    807B : (MACRO)                              ldrr    var_V, #2000            ; 2s
      72/    8081 : D6 A8 60                            call    FGL_TIMER
      73/    8084 :                                     
      74/    8084 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      75/    808A : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      76/    8090 : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
      77/    8093 : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
      78/    8096 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
      79/    8099 : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
      80/    809C : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
      81/    809F : 20 20 20 3F 3F 3F                   db      '   ???   ',0
             80A5 : 20 20 20 00       
      82/    80A9 :                     
      83/    80A9 : (MACRO)                              ldrr    var_V, #2000            ; 2s
      84/    80AF : D6 A8 60                            call    FGL_TIMER
      85/    80B2 :                     
      86/    80B2 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
      87/    80B8 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
      88/    80BE : E6 4D F0                            ld      var_W_lo, #0F0h         ; Farbe ws/sw
      89/    80C1 : E6 4F 00                            ld      var_X_lo, #0            ; x-Byte-Pos
      90/    80C4 : E6 51 00                            ld      var_Y_lo, #0            ; y-Pos
      91/    80C7 : E6 52 01                            ld      var_Z_hi, #1            ; Zoom-Faktor
      92/    80CA : D6 A7 48                            call    FGL_PRISTRI             ; normal
      93/    80CD : 4A 54 6B 6F 6D 70                   db      'JTkompakt',0           
             80D3 : 61 6B 74 00       
      94/    80D7 :                     
      95/    80D7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
      96/    80DD : D6 A8 60                            call    FGL_TIMER               
      97/    80E0 :                                     
      98/    80E0 : (MACRO)                              ldrr    rr12, #TINY_LOGO        ; TINY-Logo
      99/    80E4 : D6 A7 10                            call    FGL_BMP_TO_VRAM
     100/    80E7 :                     
     101/    80E7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
     102/    80ED : D6 A8 60                            call    FGL_TIMER
     103/    80F0 :                     
     104/    80F0 : (MACRO)                              ldrr    rr12, #JU_TE_LOGO       ; JuTe-Logo
     105/    80F4 : D6 A7 10                            call    FGL_BMP_TO_VRAM         
     106/    80F7 :                     
     107/    80F7 : (MACRO)                              ldrr    var_V, #1000             ; 1s
     108/    80FD : D6 A8 60                            call    FGL_TIMER
     109/    8100 :                                     
     110/    8100 : (MACRO)                              ldrr    var_U, #0               ; warten Zeile
     111/    8106 : (MACRO)                              ldrr    var_V, #0               ; warten Zeichen
     112/    810C : E6 4D 80                            ld      var_W_lo, #080h         ; Farbe rot/sw
     113/    810F : E6 4F 02                            ld      var_X_lo, #40/2-9*4/2   ; x-Byte-Pos
     114/    8112 : E6 51 3A                            ld      var_Y_lo, #54 + 4       ; y-Pos
     115/    8115 : E6 52 04                            ld      var_Z_hi, #4            ; Zoom-Faktor
     116/    8118 : D6 A7 48                            call    FGL_PRISTRI             ; 4-fach vergrÃ¶ssert
     117/    811B : 4A 54 6B 6F 6D 70                   db      'JTkompakt',0
             8121 : 61 6B 74 00       
     118/    8125 :                     
     119/    8125 : (MACRO)                              ldrr    var_V, #500             ; 0,5s
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 8 - 11/22/2024 22:53:50


     120/    812B : D6 A8 60                            call    FGL_TIMER
     121/    812E :                                     
     122/    812E : E6 4F 01                            ld      var_X_lo, #40/2-18-1;-1
     123/    8131 : E6 4E 26                            ld      var_X_hi, #3*10+6+2;+2
     124/    8134 : E6 51 5A                            ld      var_Y_lo, #96-5+1-2      
     125/    8137 : E6 50 25                            ld      var_Y_hi, #4*8+4+1
     126/    813A : D6 81 77                            call    invertRect              ; rote, 4-fach-vergrÃ¶sserte Schrift invertieren 
     127/    813D :                                                                     ; (fÃ¼llen von unten)
     128/    813D :                                                                     
     129/    813D : (MACRO)                              ldrr    var_V, #1000            ; 1s
     130/    8143 : D6 A8 60                            call    FGL_TIMER
     131/    8146 :                                     
     132/    8146 : D6 83 0C                    ma4:    call    moveScreen              ; 9 Zeilen nach oben schieben
     133/    8149 :                     
     134/    8149 : (MACRO)                      ma3:    ldrr    var_V, #500             ; 0,5s
     135/    814F : D6 A8 60                            call    FGL_TIMER
     136/    8152 :                     
     137/    8152 : D6 83 43                            call    switchColors            ; Farben umschalten
     138/    8155 : D6 90 47                    ma2:    call    makeMaskMap             ; VRAM-Maske erstellen
     139/    8158 :                     
     140/    8158 :                     ;------------------------------------------------------------------------------
     141/    8158 :                     
     142/    8158 :                                     ; Start Animation
     143/    8158 :                     
     144/    8158 : (MACRO)                              ldrr    rr0, #Y_POS_RING_BUFFER
     145/    815C :                     
     146/    815C : D6 83 8B                    ma1:    call    drawLines               ; Linien in VRAM schreiben
     147/    815F : 1E                                  inc     r1                      ; next Y pos
     148/    8160 : 56 E1 3F                            and     r1, #cmask              ; 
     149/    8163 : 8B F7                               jr      ma1                     ; fÃ¼r immer ...
     150/    8165 :                     
     151/    8165 :                     
     152/    8165 :                     ;------------------------------------------------------------------------------
     153/    8165 :                     ; Auf ESC-Taste prÃ¼fen.
     154/    8165 :                     ;------------------------------------------------------------------------------
     155/    8165 : D6 08 1B            checkKey:       call    KEY
     156/    8168 : A6 6D 0E                            cp      6Dh, #0Eh               ; ESC ?
     157/    816B : 6B 01                               jr      z, chexit
     158/    816D : AF                                  ret
     159/    816E :                                     
     160/    816E : E6 15 0C            chexit:         ld      15h, #12                ; CLS
     161/    8171 : D6 08 18                            call    CHAROUT
     162/    8174 : 8D 08 12                            JP      KOMMAND                 ; Bye ...
     163/    8177 :                     
     164/    8177 :                     ;------------------------------------------------------------------------------
     165/    8177 :                     ; Rechteckigen Bereich (sw/rot) invertieren (fÃ¼llen von unten).
     166/    8177 :                     ;
     167/    8177 :                     ; in:           var_X_lo        = X-Byte-Pos    (0-39)
     168/    8177 :                     ;               var_X_hi        = X-LÃ¤nge
     169/    8177 :                     ;               var_Y_lo        = Y-Zeilen-Pos  (0-191)
     170/    8177 :                     ;               var_Y_hi        = Y-LÃ¤nge
     171/    8177 :                     ;
     172/    8177 :                     ; out:          FlÃ¤che invertiert (rot/sw)
     173/    8177 :                     ;------------------------------------------------------------------------------
     174/    8177 :                     
     175/    8177 : 70 51               invertRect:     push    var_Y_lo
     176/    8179 : 18 50                               ld      r1, var_Y_hi                    ; Y-ZÃ¤hler
     177/    817B :                     
     178/    817B : C8 4E                               fi1:    ld      r12, var_X_hi           ; X-ZÃ¤hler
     179/    817D :                                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 9 - 11/22/2024 22:53:50


     180/    817D :                                             ; r0,r2,r3,r4,r5,r6,r7
     181/    817D : D6 A9 13                                    call    XBY_to_vram             ; rr6 -> VRAM
     182/    8180 :                     
     183/    8180 : FC FF                                       fi2:    ld      r15, #0FFh
     184/    8182 :                                             
     185/    8182 :                                                     ; r5,r8,r9,r10,r11
     186/    8182 :                     
     187/    8182 : EC 60                                               ld      r14, #60h
     188/    8184 : FC 7F                                               ld      r15, #01111111b         ;Farb-BÃ¤nke = RGBHxxxx
     189/    8186 :                     
     190/    8186 : 92 FE                                               lde     @rr14, r15              ;R-Bank einschalten
     191/    8188 : 82 56                                               lde     r5, @rr6
     192/    818A : 60 E5                                               com     r5
     193/    818C : 92 56                                               lde     @rr6, r5
     194/    818E :                     
     195/    818E : 7E                                                  inc     r7
     196/    818F : CA EF                                       djnz    r12, fi2
     197/    8191 : 00 51                                       dec     var_Y_lo
     198/    8193 :                     
     199/    8193 : (MACRO)                                      ldrr    var_V, #20                      ; 20 ms warten
     200/    8199 : D6 A8 60                                    call    FGL_TIMER
     201/    819C :                     
     202/    819C : 1A DD                               djnz    r1, fi1
     203/    819E :                     
     204/    819E : 50 51                               pop     var_Y_lo
     205/    81A0 : AF                                  ret
     206/    81A1 :                     
     207/    81A1 :                     ;------------------------------------------------------------------------------
     208/    81A1 :                     ; Schiebt Banner um 1 Zeichen nach links auf dem Bildschirm.
     209/    81A1 :                     ;
     210/    81A1 :                     ; in:           var_L   -> Banner-LÃ¤nge
     211/    81A1 :                     ;               var_B   -> Zeiger auf Banner-Puffer
     212/    81A1 :                     ;
     213/    81A1 :                     ;------------------------------------------------------------------------------
     214/    81A1 :                     
     215/    81A1 : 80 36               moveOneChar:    decw    var_L_hi
     216/    81A3 : 80 36               		decw    var_L_hi
     217/    81A5 : EB 0C                               jr      nz, oc1
     218/    81A7 :                     
     219/    81A7 : (MACRO)                              ldrr    var_B, #banner_buffer
     220/    81AD : (MACRO)                              ldrr    var_L, #banner_len-nChars
     221/    81B3 :                             oc1:
     222/    81B3 : 88 22                               ld      r8, var_B_hi
     223/    81B5 : 98 23                               ld      r9, var_B_lo
     224/    81B7 : D6 81 BF                            call    bannerToVRAM
     225/    81BA :                     
     226/    81BA : A0 22                               incw    var_B_hi
     227/    81BC : A0 22               		incw    var_B_hi
     228/    81BE :                     		
     229/    81BE : AF                                  ret
     230/    81BF :                     
     231/    81BF :                     ;------------------------------------------------------------------------------
     232/    81BF :                     ; Stellt eine komplette Banner-Zeile auf dem Bildschirm dar.
     233/    81BF :                     ;
     234/    81BF :                     ; in:           rr8     -> Zeiger auf Banner-Puffer-Position
     235/    81BF :                     ;
     236/    81BF :                     ; out:          Banner auf Bildschirm
     237/    81BF :                     ;------------------------------------------------------------------------------
     238/    81BF :                     
     239/    81BF :                     bannerToVRAM:
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 10 - 11/22/2024 22:53:50


     240/    81BF : EC 60                               ld      r14, #60h
     241/    81C1 : FC 20                               ld      r15, #00100000b
     242/    81C3 : 92 FE                               lde     @rr14, r15
     243/    81C5 :                     
     244/    81C5 : (MACRO)                              ldrr    rr6, #5EA8h                     ; VRAM-Pos
     245/    81C9 : 1C 08                               ld      r1, #8                          ; 8 ASCII-Zeilen
     246/    81CB :                     
     247/    81CB :                                     ctv2:
     248/    81CB : 0C 28                                       ld      r0, #nChars             ; Banner = 40 ASCII-Zeichen
     249/    81CD :                     
     250/    81CD : 82 38                                       ctv1:   lde     r3, @rr8        ; banner_buffer
     251/    81CF : 92 36                                               lde     @rr6, r3        ; VRAM
     252/    81D1 : A0 E8                                               incw    rr8
     253/    81D3 : 7E                                                  inc     r7
     254/    81D4 : 0A F7                                       djnz    r0, ctv1
     255/    81D6 :                     
     256/    81D6 : 26 E7 28                                    sub     r7, #lo(nChars)
     257/    81D9 : 36 E6 00                                    sbc     r6, #hi(nChars)
     258/    81DC :                     
     259/    81DC : 06 E9 B4                                    add     r9, #lo(banner_len-nChars)
     260/    81DF : 16 E8 00                                    adc     r8, #hi(banner_len-nChars)
     261/    81E2 :                     
     262/    81E2 : D6 A9 24                                    call    vram_inc_y_es40
     263/    81E5 :                     
     264/    81E5 : 1A E4                               djnz    r1, ctv2        ; 8 Zeilen
     265/    81E7 :                     
     266/    81E7 : AF                                  ret
     267/    81E8 :                     
     268/    81E8 :                     ;------------------------------------------------------------------------------
     269/    81E8 :                     ; Erzeugt aus einem String mit dem Bannertext eine Datenstruktur, aus der sehr
     270/    81E8 :                     ; schnell, zeilenweise der gesamte Text in den VRAM kopiert werden kann.
     271/    81E8 :                     ;
     272/    81E8 :                     ; in:           banner_start    -> Zeiger auf ASCII_Banner-Text
     273/    81E8 :                     ;               banner_len      -> Banner-LÃ¤nge (ASCII)
     274/    81E8 :                     ;
     275/    81E8 :                     ; out:          banner_buffer   -> Zeiger auf Banner-Puffer zur Ausgabe in VRAM
     276/    81E8 :                     ;
     277/    81E8 :                     ;------------------------------------------------------------------------------
     278/    81E8 :                     
     279/    81E8 : =28H                 nChars          equ     40
     280/    81E8 :                     
     281/    81E8 : =81E8H               banner_start            equ     $
     282/    81E8 :                     
     283/    81E8 :                                             REPT    nChars
     284/    81E8 :                                             db      ' '
     285/    81E8 :                                             ENDM
     284/    81E8 : 20                                          db      ' '
     284/    81E9 : 20                                          db      ' '
     284/    81EA : 20                                          db      ' '
     284/    81EB : 20                                          db      ' '
     284/    81EC : 20                                          db      ' '
     284/    81ED : 20                                          db      ' '
     284/    81EE : 20                                          db      ' '
     284/    81EF : 20                                          db      ' '
     284/    81F0 : 20                                          db      ' '
     284/    81F1 : 20                                          db      ' '
     284/    81F2 : 20                                          db      ' '
     284/    81F3 : 20                                          db      ' '
     284/    81F4 : 20                                          db      ' '
     284/    81F5 : 20                                          db      ' '
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 11 - 11/22/2024 22:53:50


     284/    81F6 : 20                                          db      ' '
     284/    81F7 : 20                                          db      ' '
     284/    81F8 : 20                                          db      ' '
     284/    81F9 : 20                                          db      ' '
     284/    81FA : 20                                          db      ' '
     284/    81FB : 20                                          db      ' '
     284/    81FC : 20                                          db      ' '
     284/    81FD : 20                                          db      ' '
     284/    81FE : 20                                          db      ' '
     284/    81FF : 20                                          db      ' '
     284/    8200 : 20                                          db      ' '
     284/    8201 : 20                                          db      ' '
     284/    8202 : 20                                          db      ' '
     284/    8203 : 20                                          db      ' '
     284/    8204 : 20                                          db      ' '
     284/    8205 : 20                                          db      ' '
     284/    8206 : 20                                          db      ' '
     284/    8207 : 20                                          db      ' '
     284/    8208 : 20                                          db      ' '
     284/    8209 : 20                                          db      ' '
     284/    820A : 20                                          db      ' '
     284/    820B : 20                                          db      ' '
     284/    820C : 20                                          db      ' '
     284/    820D : 20                                          db      ' '
     284/    820E : 20                                          db      ' '
     284/    820F : 20                                          db      ' '
     286/    8210 :                     
     287/    8210 : 2A 2A 2A 2A 2A 2A                           db      '******    JUGEND + TECHNIK Computer 6K System ES 4.0,    '
             8216 : 20 20 20 20 4A 55 
             821C : 47 45 4E 44 20 2B 
             8222 : 20 54 45 43 48 4E 
             8228 : 49 4B 20 43 6F 6D 
             822E : 70 75 74 65 72 20 
             8234 : 36 4B 20 53 79 73 
             823A : 74 65 6D 20 45 53 
             8240 : 20 34 2E 30 2C 20 
             8246 : 20 20 20          
     288/    8249 : 44 72 2E 20 48 65                           db      'Dr. Helmut Hoyer, Harun Scheutzow,    '
             824F : 6C 6D 75 74 20 48 
             8255 : 6F 79 65 72 2C 20 
             825B : 48 61 72 75 6E 20 
             8261 : 53 63 68 65 75 74 
             8267 : 7A 6F 77 2C 20 20 
             826D : 20 20             
     289/    826F : 56 65 72 6C 61 67                           db      'Verlag Junge Welt, PF 43 Berlin 1026   ******'
             8275 : 20 4A 75 6E 67 65 
             827B : 20 57 65 6C 74 2C 
             8281 : 20 50 46 20 34 33 
             8287 : 20 42 65 72 6C 69 
             828D : 6E 20 31 30 32 36 
             8293 : 20 20 20 2A 2A 2A 
             8299 : 2A 2A 2A          
     290/    829C :                                             
     291/    829C :                                             ;db     '******    VEB   Mikroelektronik   M',01Ch,'hlhausen    ******'
     292/    829C :                     
     293/    829C :                                             REPT    nChars
     294/    829C :                                             db      ' '
     295/    829C :                                             ENDM
     294/    829C : 20                                          db      ' '
     294/    829D : 20                                          db      ' '
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 12 - 11/22/2024 22:53:50


     294/    829E : 20                                          db      ' '
     294/    829F : 20                                          db      ' '
     294/    82A0 : 20                                          db      ' '
     294/    82A1 : 20                                          db      ' '
     294/    82A2 : 20                                          db      ' '
     294/    82A3 : 20                                          db      ' '
     294/    82A4 : 20                                          db      ' '
     294/    82A5 : 20                                          db      ' '
     294/    82A6 : 20                                          db      ' '
     294/    82A7 : 20                                          db      ' '
     294/    82A8 : 20                                          db      ' '
     294/    82A9 : 20                                          db      ' '
     294/    82AA : 20                                          db      ' '
     294/    82AB : 20                                          db      ' '
     294/    82AC : 20                                          db      ' '
     294/    82AD : 20                                          db      ' '
     294/    82AE : 20                                          db      ' '
     294/    82AF : 20                                          db      ' '
     294/    82B0 : 20                                          db      ' '
     294/    82B1 : 20                                          db      ' '
     294/    82B2 : 20                                          db      ' '
     294/    82B3 : 20                                          db      ' '
     294/    82B4 : 20                                          db      ' '
     294/    82B5 : 20                                          db      ' '
     294/    82B6 : 20                                          db      ' '
     294/    82B7 : 20                                          db      ' '
     294/    82B8 : 20                                          db      ' '
     294/    82B9 : 20                                          db      ' '
     294/    82BA : 20                                          db      ' '
     294/    82BB : 20                                          db      ' '
     294/    82BC : 20                                          db      ' '
     294/    82BD : 20                                          db      ' '
     294/    82BE : 20                                          db      ' '
     294/    82BF : 20                                          db      ' '
     294/    82C0 : 20                                          db      ' '
     294/    82C1 : 20                                          db      ' '
     294/    82C2 : 20                                          db      ' '
     294/    82C3 : 20                                          db      ' '
     296/    82C4 :                     
     297/    82C4 : =82C4H               banner_end              equ     $
     298/    82C4 :                     
     299/    82C4 : =0DCH                banner_len              equ     (banner_end - banner_start)
     300/    82C4 :                     
     301/    82C4 :                     ;------------------------------------------------------------------------------
     302/    82C4 :                     
     303/    82C4 : (MACRO)              prepareBanner:  ldrr    rr6,  #banner_start
     304/    82C8 : (MACRO)                              ldrr    rr10, #banner_buffer
     305/    82CC : CC DC                               ld      r12,  #banner_len
     306/    82CE :                     
     307/    82CE : 88 EA                               ctb2:   ld      r8, r10
     308/    82D0 : 98 EB                                       ld      r9, r11
     309/    82D2 :                     
     310/    82D2 : 82 16                                       lde     r1, @rr6                ; Zeichen holen
     311/    82D4 : B0 E0                                       clr     r0
     312/    82D6 :                     
     313/    82D6 : 10 E1                                       rlc     r1                      ; rr0 x 8 ZG-Zeilen
     314/    82D8 : 10 E0                                       rlc     r0
     315/    82DA : 10 E1                                       rlc     r1
     316/    82DC : 10 E0                                       rlc     r0
     317/    82DE : 10 E1                                       rlc     r1
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 13 - 11/22/2024 22:53:50


     318/    82E0 : 10 E0                                       rlc     r0
     319/    82E2 :                     
     320/    82E2 : 56 E1 F8                                    and     r1, #11111000b
     321/    82E5 :                     
     322/    82E5 : (MACRO)                                      ldrr    rr2, #zg_Z9001          ; rr2 -> ZG Start
     323/    82E9 : 02 31                                       add     r3, r1
     324/    82EB : 12 20                                       adc     r2, r0                  ; rr2 -> ZG-Byte (ASCII) 1. Zeile
     325/    82ED :                     
     326/    82ED : 4C 08                                       ld      r4, #8
     327/    82EF :                     
     328/    82EF :                                             ctb1:
     329/    82EF : 82 52                                               lde     r5, @rr2        ; ZG-Byte
     330/    82F1 : A6 E4 05                                            cp      r4, #5          ; kursiv ?
     331/    82F4 : 7B 03                                               jr      c, ctb3
     332/    82F6 : CF                                                  rcf                     ; Zeichen kursiv machen
     333/    82F7 : C0 E5                                               rrc     r5
     334/    82F9 :                                             ctb3:
     335/    82F9 : 92 58                                               lde     @rr8, r5        ;
     336/    82FB : 06 E9 DC                                            add     r9, #lo(banner_len)
     337/    82FE : 16 E8 00                                            adc     r8, #hi(banner_len)
     338/    8301 : A0 E2                                               incw    rr2             ; nÃ¤chste ZG-Zeile
     339/    8303 : 4A EA                                       djnz    r4, ctb1
     340/    8305 :                     
     341/    8305 : A0 E6                                       incw    rr6
     342/    8307 : A0 EA                                       incw    rr10
     343/    8309 :                     
     344/    8309 : CA C3                               djnz    r12, ctb2
     345/    830B :                     
     346/    830B : AF                                  ret
     347/    830C :                                     
     348/    830C :                     ;------------------------------------------------------------------------------
     349/    830C :                     ; Verschieben des Bildschirms nach oben um 9 Zeilen.
     350/    830C :                     ;
     351/    830C :                     ;------------------------------------------------------------------------------
     352/    830C :                     
     353/    830C : (MACRO)              moveScreen:     ldrr    rr0, #VRAM + 180h
     354/    8310 : (MACRO)                              ldrr    rr2, #VRAM
     355/    8314 : (MACRO)                              ldrr    rr4, #VRAM_LEN - 180h
     356/    8318 :                     
     357/    8318 : EC 60                               ms1:    ld      r14, #60h
     358/    831A : FC 7F                                       ld      r15, #01111111b
     359/    831C :                     
     360/    831C : 92 FE                                       lde     @rr14, r15
     361/    831E : 82 60                                       lde     r6, @rr0
     362/    8320 : 92 62                                       lde     @rr2, r6
     363/    8322 :                     
     364/    8322 : E0 EF                                       rr      r15
     365/    8324 : 92 FE                                       lde     @rr14, r15
     366/    8326 : 82 60                                       lde     r6, @rr0
     367/    8328 : 92 62                                       lde     @rr2, r6
     368/    832A :                     
     369/    832A : E0 EF                                       rr      r15
     370/    832C : 92 FE                                       lde     @rr14, r15
     371/    832E : 82 60                                       lde     r6, @rr0
     372/    8330 : 92 62                                       lde     @rr2, r6
     373/    8332 :                     
     374/    8332 : E0 EF                                       rr      r15
     375/    8334 : 92 FE                                       lde     @rr14, r15
     376/    8336 : 82 60                                       lde     r6, @rr0
     377/    8338 : 92 62                                       lde     @rr2, r6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 14 - 11/22/2024 22:53:50


     378/    833A :                     
     379/    833A : A0 E0                                       incw    rr0
     380/    833C : A0 E2                                       incw    rr2
     381/    833E : 80 E4                                       decw    rr4
     382/    8340 : EB D6                               jr      nz, ms1
     383/    8342 :                     
     384/    8342 : AF                                  ret
     385/    8343 :                     
     386/    8343 :                     ;------------------------------------------------------------------------------
     387/    8343 :                     ; Umschalten der Farben vor der Animation.
     388/    8343 :                     ;
     389/    8343 :                     ;               Hintergrund     -> blau
     390/    8343 :                     ;               grÃ¼nH           -> ws
     391/    8343 :                     ;               rot             -> grÃ¼nH
     392/    8343 :                     ;------------------------------------------------------------------------------
     393/    8343 :                     
     394/    8343 : (MACRO)              switchColors:   ldrr    rr6, #VRAM
     395/    8347 : EC 60                               ld      r14, #60h
     396/    8349 :                     
     397/    8349 : FC B0                               sws1:   ld      r15, #10110000b         ; Farbbank grÃ¼n
     398/    834B : 92 FE                                       lde     @rr14, r15
     399/    834D :                     
     400/    834D : 82 06                                       lde     r0, @rr6
     401/    834F : A6 E0 00                                    cp      r0, #0                  ; grÃ¼n ?
     402/    8352 : 6B 08                                       jr      z, sws2                 ; nein
     403/    8354 :                     
     404/    8354 :                                             ; grÃ¼n/sw -> ws/blau
     405/    8354 :                     
     406/    8354 : FC 00                                       ld      r15, #00000000b         ; Farbbank ws
     407/    8356 : 92 FE                                       lde     @rr14, r15
     408/    8358 : 92 06                                       lde     @rr6, r0                ; grÃ¼n => ws
     409/    835A :                     
     410/    835A : 8B 1F                                       jr      sws3
     411/    835C :                     
     412/    835C : FC 70                               sws2:   ld      r15, #01110000b         ; Farbbank rot
     413/    835E : 92 FE                                       lde     @rr14, r15
     414/    8360 :                     
     415/    8360 : 82 06                                       lde     r0, @rr6
     416/    8362 : A6 E0 00                                    cp      r0, #0                  ; rot ?
     417/    8365 : 6B 14                                       jr      z, sws3                 ; nein
     418/    8367 :                     
     419/    8367 :                                             ; rot/sw -> grÃ¼nH/blau
     420/    8367 :                     
     421/    8367 : B0 E1                                       clr     r1
     422/    8369 : 92 16                                       lde     @rr6, r1                ; rot => 0
     423/    836B :                     
     424/    836B : FC A0                                       ld      r15, #10100000b         ; Farbbank grÃ¼nH
     425/    836D : 92 FE                                       lde     @rr14, r15
     426/    836F : 92 06                                       lde     @rr6, r0                ; rot => grÃ¼nH
     427/    8371 :                     
     428/    8371 : FC D0                                       ld      r15, #11010000b         ; Farbbank blau
     429/    8373 : 92 FE                                       lde     @rr14, r15
     430/    8375 : 60 E0                                       com     r0
     431/    8377 : 92 06                                       lde     @rr6, r0                ; sw => blau
     432/    8379 :                     
     433/    8379 : 8B 08                                       jr      sws4
     434/    837B :                     
     435/    837B :                                             ; sw -> blau
     436/    837B :                     
     437/    837B : FC D0                               sws3:   ld      r15, #11010000b         ; Farbbank blau
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 15 - 11/22/2024 22:53:50


     438/    837D : 92 FE                                       lde     @rr14, r15
     439/    837F : FC FF                                       ld      r15, #0FFh              ; blau => 1
     440/    8381 : 92 F6                                       lde     @rr6, r15
     441/    8383 :                     
     442/    8383 : A0 E6                               sws4:   incw    rr6
     443/    8385 : A6 E6 60                                    cp      r6, #60h
     444/    8388 : EB BF                               jr      nz, sws1
     445/    838A :                     
     446/    838A : AF                                  ret
     447/    838B :                     
     448/    838B :                     ;------------------------------------------------------------------------------
     449/    838B :                     ; Stellt Linien auf dem Bildschirm dar.
     450/    838B :                     ;
     451/    838B :                     ; in:           rr0              = Zeiger auf Y-Koordinaten (Ring-Puffer)
     452/    838B :                     ;
     453/    838B :                     ;               LINES            = Anzahl animierter Linien
     454/    838B :                     ;               COLORS_PER_LINE  = Anzahl Zeilen pro Linie
     455/    838B :                     ;
     456/    838B :                     ;               mcLines          = Zeiger auf Farbdefinition der Linien
     457/    838B :                     ;                                  (mc = mehrfarbig)
     458/    838B :                     ;
     459/    838B :                     ;------------------------------------------------------------------------------
     460/    838B :                     
     461/    838B : =0AH                 LINES           EQU     10                      ; Anzahl animierter Linien
     462/    838B :                     
     463/    838B : 70 E0               drawLines:      push    r0
     464/    838D : 70 E1                               push    r1
     465/    838F :                     
     466/    838F : 1E                                  inc     r1
     467/    8390 : 56 E1 3F                            and     r1, #cmask
     468/    8393 : 82 80                               lde     r8, @rr0
     469/    8395 : 89 50                               ld      var_Y_hi, r8            ; Nachfolger holen
     470/    8397 :                     
     471/    8397 : 00 E1                               dec     r1
     472/    8399 : 56 E1 3F                            and     r1, #cmask
     473/    839C : 82 80                               lde     r8, @rr0
     474/    839E : 89 51                               ld      var_Y_lo, r8
     475/    83A0 :                     
     476/    83A0 : CC 92               		ld      r12, #hi(bg)
     477/    83A2 : DC A0               		ld      r13, #lo(bg)                
     478/    83A4 :                     		
     479/    83A4 : A6 E8 60            		cp      r8, #192/2
     480/    83A7 : 7B 05                               jr      c, dls2
     481/    83A9 : D6 8A 7C                            call    drawLineW
     482/    83AC : 8B 03                               jr      dls3
     483/    83AE : D6 84 11                    dls2:   call    drawLineG
     484/    83B1 :                             dls3:
     485/    83B1 : 1E                                  inc     r1
     486/    83B2 : 56 E1 3F                            and     r1, #cmask
     487/    83B5 :                     
     488/    83B5 : CC 92                               ld      r12, #hi(mcLines)       ; Zeiger auf mehrfarbige Linien
     489/    83B7 : DC 00                               ld      r13, #lo(mcLines)
     490/    83B9 :                     
     491/    83B9 : E6 21 0A                            ld      var_A_lo, #LINES
     492/    83BC :                     
     493/    83BC : 82 80                       dls1:   lde     r8, @rr0
     494/    83BE : 89 51                               ld      var_Y_lo, r8
     495/    83C0 : 1E                                  inc     r1
     496/    83C1 : 56 E1 3F                            and     r1, #cmask
     497/    83C4 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 16 - 11/22/2024 22:53:50


     498/    83C4 : 82 80                               lde     r8, @rr0
     499/    83C6 : 89 50                               ld      var_Y_hi, r8            ; Nachfolger holen
     500/    83C8 : 00 E1                               dec     r1
     501/    83CA : 56 E1 3F                            and     r1, #cmask
     502/    83CD :                     
     503/    83CD : A6 21 01                            cp      var_A_lo, #1            ; letzte Linie ? -> alle Zeilen schreiben
     504/    83D0 : EB 03                               jr      nz, dls4
     505/    83D2 : E6 50 80                            ld      var_Y_hi, #128          ; 128 = Code fÃ¼r "alle Zeilen"
     506/    83D5 :                             dls4:
     507/    83D5 : 70 EC                               push    r12
     508/    83D7 : 70 ED                               push    r13
     509/    83D9 :                     
     510/    83D9 : A6 E8 60                            cp      r8, #192/2
     511/    83DC : 7B 05                               jr      c, dls22
     512/    83DE : D6 8A 7C                            call    drawLineW
     513/    83E1 : 8B 03                               jr      dls33
     514/    83E3 : D6 84 11                    dls22:  call    drawLineG
     515/    83E6 :                             dls33:
     516/    83E6 : 50 ED                               pop     r13
     517/    83E8 : 50 EC                               pop     r12
     518/    83EA :                     
     519/    83EA : 06 ED 10                            add     r13, #4*COLORS_PER_LINE ; nÃ¤chste Farbe, 4 Bytes * Zeilen
     520/    83ED :                     
     521/    83ED : 1E                                  inc     r1
     522/    83EE : 56 E1 3F                            and     r1, #cmask
     523/    83F1 :                     
     524/    83F1 : 00 21                               dec     var_A_lo
     525/    83F3 : EB C7                               jr      nz, dls1
     526/    83F5 :                     
     527/    83F5 : D6 81 A1                            call    moveOneChar             ; Banner schieben
     528/    83F8 : D6 81 65                            call    checkKey                ; ESC ?
     529/    83FB :                                     
     530/    83FB : 50 E1                               pop     r1
     531/    83FD : 50 E0                               pop     r0
     532/    83FF :                     
     533/    83FF : AF                                  ret
     534/    8400 :                     
     535/    8400 :                     ;------------------------------------------------------------------------------
     536/    8400 :                     ; Wartet N-mal 1,6 ms (eine Zeile).
     537/    8400 :                     ;
     538/    8400 :                     ; in:           var_T_hi = N
     539/    8400 :                     ;------------------------------------------------------------------------------
     540/    8400 :                     
     541/    8400 : 06 46 01            tLine:          add     var_T_hi, #1            ; etwas verlangsamen an Wendepunkten    
     542/    8403 : E6 47 E2            tl2:            ld      var_T_lo, #0e2h         ; 6788 Takte = 1,6 ms
     543/    8406 : 00 47               tl1:            dec     var_T_lo
     544/    8408 : FF                                  nop
     545/    8409 : FF                                  nop
     546/    840A : EB FA                               jr      nz, tl1
     547/    840C : 00 46                               dec     var_T_hi
     548/    840E : EB F3                               jr      nz, tl2
     549/    8410 : AF                                  ret
     550/    8411 :                     
     551/    8411 :                     ;------------------------------------------------------------------------------
     552/    8411 :                     ; drawLineR/W   Schreibt eine Linie.
     553/    8411 :                     ;
     554/    8411 :                     ;               G = grÃ¼ne  Objekte werden nicht Ã¼berschrieben
     555/    8411 :                     ;               W = weisse Objekte werden nicht Ã¼berschrieben
     556/    8411 :                     ;
     557/    8411 :                     ; in:           var_Y_lo        = Y-Pos
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 17 - 11/22/2024 22:53:50


     558/    8411 :                     ;               rr12            = Zeiger auf Farbdefinition der Linien
     559/    8411 :                     ;                                 Z1(R,G,B,H) ... ZN(R,G,B,H)
     560/    8411 :                     ;
     561/    8411 :                     ; out:          Linie auf Bildschirm
     562/    8411 :                     ;
     563/    8411 :                     ; intern:
     564/    8411 :                     ;       r0      -
     565/    8411 :                     ;       r1      Farbe
     566/    8411 :                     ;       r2      -
     567/    8411 :                     ;       r3      -
     568/    8411 :                     ;       r4      Mask hi
     569/    8411 :                     ;       r5      Mask lo
     570/    8411 :                     ;       r6      VRAM hi
     571/    8411 :                     ;       r7      VRAM lo
     572/    8411 :                     ;       r8      -
     573/    8411 :                     ;       r9      Farb-Bank-ZÃ¤hler
     574/    8411 :                     ;       r10     Zeilen-ZÃ¤hler
     575/    8411 :                     ;       r11     Byte-ZÃ¤hler
     576/    8411 :                     ;       r12     Farbe HI
     577/    8411 :                     ;       r13     Farbe LO
     578/    8411 :                     ;       r14     Farb-Register hi
     579/    8411 :                     ;       r15     Farb-Register lo
     580/    8411 :                     ;
     581/    8411 :                     ;------------------------------------------------------------------------------
     582/    8411 :                     
     583/    8411 : =4H                  COLORS_PER_LINE EQU     4                               ; Anzahl Farben pro Linie
     584/    8411 :                     
     585/    8411 : 8F                  drawLineG:      DI
     586/    8412 : 70 E0                               push    r0
     587/    8414 : 70 E1                               push    r1
     588/    8416 : E4 FE 6A                            ld      saveH, SPH
     589/    8419 : E4 FF 6B                            ld      saveL, SPL
     590/    841C :                                     
     591/    841C : AC 04                               ld      r10, #COLORS_PER_LINE           ; Zeilen-ZÃ¤hler
     592/    841E : 4C 60                               ld      r4, #60h
     593/    8420 : E6 4F 27                            ld      var_X_lo, #39   
     594/    8423 :                     
     595/    8423 : A6 50 80                            cp      var_Y_hi, #128                  ; alle Zeilen schreiben ?
     596/    8426 : 6B 28                               jr      z, dln1
     597/    8428 :                     
     598/    8428 : 24 51 50                            sub     var_Y_hi, var_Y_lo              ; Anzahl Zeilen sichtbar berechnen
     599/    842B : 6D 8A 74                            jp      z, dlrret
     600/    842E : 5B 09                               jr      mi, neg                         ; neg/pos ?
     601/    8430 :                             pos:
     602/    8430 : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     603/    8433 : FB 1B                               jr      nc, dln1
     604/    8435 :                     
     605/    8435 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     606/    8437 : 8B 12                               jr      dln2
     607/    8439 :                             neg:
     608/    8439 : 60 50                               com     var_Y_hi                        ; Zweierkomplement
     609/    843B : 06 50 01                            add     var_Y_hi, #1
     610/    843E :                     
     611/    843E : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     612/    8441 : FB 0D                               jr      nc, dln1
     613/    8443 :                     
     614/    8443 : 06 51 04                            add     var_Y_lo, #COLORS_PER_LINE
     615/    8446 : 24 50 51                            sub     var_Y_lo, var_Y_hi
     616/    8449 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     617/    844B :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 18 - 11/22/2024 22:53:50


     618/    844B : A9 46                       dln2:   ld      var_T_hi, r10                   ; Ausgleich Zeit fÃ¼r fehlende Zeilen
     619/    844D : D6 84 00                            call    tLine
     620/    8450 :                     
     621/    8450 :                             dln1:
     622/    8450 :                                     ; r0,r2,r3,r4,r5,r6,r7
     623/    8450 : D6 A9 13                            call    XBY_to_vram
     624/    8453 :                     
     625/    8453 : 9C 05                               dl2:    ld      r9,  #5                 ; Farb-Bank-ZÃ¤hler
     626/    8455 : FC 7F                                       ld      r15, #01111111b         ; rot: Farb-BÃ¤nke = RGBHxxxx
     627/    8457 :                     
     628/    8457 : A0 E6                                       incw    rr6                     ; wegen PUSH -> SP=SP-1
     629/    8459 :                                                                     
     630/    8459 : 69 FE                                               ld      SPH, r6
     631/    845B : 79 FF                                               ld      SPL, r7
     632/    845D : 48 E6                                               ld      r4, r6
     633/    845F : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     634/    8462 : 58 E7                                               ld      r5, r7
     635/    8464 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     636/    8466 :                     
     637/    8466 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     638/    8468 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     639/    846A :                                                     
     640/    846A :                                                                                     
     641/    846A :                                                     rept    40
     642/    846A :                                                             lde     r0, @rr4        ; 12
     643/    846A :                                                             com     r0              ;  6
     644/    846A :                                                             and     r0, r1          ;  6
     645/    846A :                                                             ;or     r0, r1          ;  
     646/    846A :                                                             push    r0              ; 12
     647/    846A :                                                             dec     r5              ;  6
     648/    846A :                                                     endm                            ; --
     642/    846A : 82 04                                                       lde     r0, @rr4        ; 12
     643/    846C : 60 E0                                                       com     r0              ;  6
     644/    846E : 52 01                                                       and     r0, r1          ;  6
     645/    8470 :                                                             ;or     r0, r1          ;  
     646/    8470 : 70 E0                                                       push    r0              ; 12
     647/    8472 : 00 E5                                                       dec     r5              ;  6
     642/    8474 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8476 : 60 E0                                                       com     r0              ;  6
     644/    8478 : 52 01                                                       and     r0, r1          ;  6
     645/    847A :                                                             ;or     r0, r1          ;  
     646/    847A : 70 E0                                                       push    r0              ; 12
     647/    847C : 00 E5                                                       dec     r5              ;  6
     642/    847E : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8480 : 60 E0                                                       com     r0              ;  6
     644/    8482 : 52 01                                                       and     r0, r1          ;  6
     645/    8484 :                                                             ;or     r0, r1          ;  
     646/    8484 : 70 E0                                                       push    r0              ; 12
     647/    8486 : 00 E5                                                       dec     r5              ;  6
     642/    8488 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    848A : 60 E0                                                       com     r0              ;  6
     644/    848C : 52 01                                                       and     r0, r1          ;  6
     645/    848E :                                                             ;or     r0, r1          ;  
     646/    848E : 70 E0                                                       push    r0              ; 12
     647/    8490 : 00 E5                                                       dec     r5              ;  6
     642/    8492 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8494 : 60 E0                                                       com     r0              ;  6
     644/    8496 : 52 01                                                       and     r0, r1          ;  6
     645/    8498 :                                                             ;or     r0, r1          ;  
     646/    8498 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 19 - 11/22/2024 22:53:50


     647/    849A : 00 E5                                                       dec     r5              ;  6
     642/    849C : 82 04                                                       lde     r0, @rr4        ; 12
     643/    849E : 60 E0                                                       com     r0              ;  6
     644/    84A0 : 52 01                                                       and     r0, r1          ;  6
     645/    84A2 :                                                             ;or     r0, r1          ;  
     646/    84A2 : 70 E0                                                       push    r0              ; 12
     647/    84A4 : 00 E5                                                       dec     r5              ;  6
     642/    84A6 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84A8 : 60 E0                                                       com     r0              ;  6
     644/    84AA : 52 01                                                       and     r0, r1          ;  6
     645/    84AC :                                                             ;or     r0, r1          ;  
     646/    84AC : 70 E0                                                       push    r0              ; 12
     647/    84AE : 00 E5                                                       dec     r5              ;  6
     642/    84B0 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84B2 : 60 E0                                                       com     r0              ;  6
     644/    84B4 : 52 01                                                       and     r0, r1          ;  6
     645/    84B6 :                                                             ;or     r0, r1          ;  
     646/    84B6 : 70 E0                                                       push    r0              ; 12
     647/    84B8 : 00 E5                                                       dec     r5              ;  6
     642/    84BA : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84BC : 60 E0                                                       com     r0              ;  6
     644/    84BE : 52 01                                                       and     r0, r1          ;  6
     645/    84C0 :                                                             ;or     r0, r1          ;  
     646/    84C0 : 70 E0                                                       push    r0              ; 12
     647/    84C2 : 00 E5                                                       dec     r5              ;  6
     642/    84C4 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84C6 : 60 E0                                                       com     r0              ;  6
     644/    84C8 : 52 01                                                       and     r0, r1          ;  6
     645/    84CA :                                                             ;or     r0, r1          ;  
     646/    84CA : 70 E0                                                       push    r0              ; 12
     647/    84CC : 00 E5                                                       dec     r5              ;  6
     642/    84CE : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84D0 : 60 E0                                                       com     r0              ;  6
     644/    84D2 : 52 01                                                       and     r0, r1          ;  6
     645/    84D4 :                                                             ;or     r0, r1          ;  
     646/    84D4 : 70 E0                                                       push    r0              ; 12
     647/    84D6 : 00 E5                                                       dec     r5              ;  6
     642/    84D8 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84DA : 60 E0                                                       com     r0              ;  6
     644/    84DC : 52 01                                                       and     r0, r1          ;  6
     645/    84DE :                                                             ;or     r0, r1          ;  
     646/    84DE : 70 E0                                                       push    r0              ; 12
     647/    84E0 : 00 E5                                                       dec     r5              ;  6
     642/    84E2 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84E4 : 60 E0                                                       com     r0              ;  6
     644/    84E6 : 52 01                                                       and     r0, r1          ;  6
     645/    84E8 :                                                             ;or     r0, r1          ;  
     646/    84E8 : 70 E0                                                       push    r0              ; 12
     647/    84EA : 00 E5                                                       dec     r5              ;  6
     642/    84EC : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84EE : 60 E0                                                       com     r0              ;  6
     644/    84F0 : 52 01                                                       and     r0, r1          ;  6
     645/    84F2 :                                                             ;or     r0, r1          ;  
     646/    84F2 : 70 E0                                                       push    r0              ; 12
     647/    84F4 : 00 E5                                                       dec     r5              ;  6
     642/    84F6 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    84F8 : 60 E0                                                       com     r0              ;  6
     644/    84FA : 52 01                                                       and     r0, r1          ;  6
     645/    84FC :                                                             ;or     r0, r1          ;  
     646/    84FC : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 20 - 11/22/2024 22:53:50


     647/    84FE : 00 E5                                                       dec     r5              ;  6
     642/    8500 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8502 : 60 E0                                                       com     r0              ;  6
     644/    8504 : 52 01                                                       and     r0, r1          ;  6
     645/    8506 :                                                             ;or     r0, r1          ;  
     646/    8506 : 70 E0                                                       push    r0              ; 12
     647/    8508 : 00 E5                                                       dec     r5              ;  6
     642/    850A : 82 04                                                       lde     r0, @rr4        ; 12
     643/    850C : 60 E0                                                       com     r0              ;  6
     644/    850E : 52 01                                                       and     r0, r1          ;  6
     645/    8510 :                                                             ;or     r0, r1          ;  
     646/    8510 : 70 E0                                                       push    r0              ; 12
     647/    8512 : 00 E5                                                       dec     r5              ;  6
     642/    8514 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8516 : 60 E0                                                       com     r0              ;  6
     644/    8518 : 52 01                                                       and     r0, r1          ;  6
     645/    851A :                                                             ;or     r0, r1          ;  
     646/    851A : 70 E0                                                       push    r0              ; 12
     647/    851C : 00 E5                                                       dec     r5              ;  6
     642/    851E : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8520 : 60 E0                                                       com     r0              ;  6
     644/    8522 : 52 01                                                       and     r0, r1          ;  6
     645/    8524 :                                                             ;or     r0, r1          ;  
     646/    8524 : 70 E0                                                       push    r0              ; 12
     647/    8526 : 00 E5                                                       dec     r5              ;  6
     642/    8528 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    852A : 60 E0                                                       com     r0              ;  6
     644/    852C : 52 01                                                       and     r0, r1          ;  6
     645/    852E :                                                             ;or     r0, r1          ;  
     646/    852E : 70 E0                                                       push    r0              ; 12
     647/    8530 : 00 E5                                                       dec     r5              ;  6
     642/    8532 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8534 : 60 E0                                                       com     r0              ;  6
     644/    8536 : 52 01                                                       and     r0, r1          ;  6
     645/    8538 :                                                             ;or     r0, r1          ;  
     646/    8538 : 70 E0                                                       push    r0              ; 12
     647/    853A : 00 E5                                                       dec     r5              ;  6
     642/    853C : 82 04                                                       lde     r0, @rr4        ; 12
     643/    853E : 60 E0                                                       com     r0              ;  6
     644/    8540 : 52 01                                                       and     r0, r1          ;  6
     645/    8542 :                                                             ;or     r0, r1          ;  
     646/    8542 : 70 E0                                                       push    r0              ; 12
     647/    8544 : 00 E5                                                       dec     r5              ;  6
     642/    8546 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8548 : 60 E0                                                       com     r0              ;  6
     644/    854A : 52 01                                                       and     r0, r1          ;  6
     645/    854C :                                                             ;or     r0, r1          ;  
     646/    854C : 70 E0                                                       push    r0              ; 12
     647/    854E : 00 E5                                                       dec     r5              ;  6
     642/    8550 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8552 : 60 E0                                                       com     r0              ;  6
     644/    8554 : 52 01                                                       and     r0, r1          ;  6
     645/    8556 :                                                             ;or     r0, r1          ;  
     646/    8556 : 70 E0                                                       push    r0              ; 12
     647/    8558 : 00 E5                                                       dec     r5              ;  6
     642/    855A : 82 04                                                       lde     r0, @rr4        ; 12
     643/    855C : 60 E0                                                       com     r0              ;  6
     644/    855E : 52 01                                                       and     r0, r1          ;  6
     645/    8560 :                                                             ;or     r0, r1          ;  
     646/    8560 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 21 - 11/22/2024 22:53:50


     647/    8562 : 00 E5                                                       dec     r5              ;  6
     642/    8564 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8566 : 60 E0                                                       com     r0              ;  6
     644/    8568 : 52 01                                                       and     r0, r1          ;  6
     645/    856A :                                                             ;or     r0, r1          ;  
     646/    856A : 70 E0                                                       push    r0              ; 12
     647/    856C : 00 E5                                                       dec     r5              ;  6
     642/    856E : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8570 : 60 E0                                                       com     r0              ;  6
     644/    8572 : 52 01                                                       and     r0, r1          ;  6
     645/    8574 :                                                             ;or     r0, r1          ;  
     646/    8574 : 70 E0                                                       push    r0              ; 12
     647/    8576 : 00 E5                                                       dec     r5              ;  6
     642/    8578 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    857A : 60 E0                                                       com     r0              ;  6
     644/    857C : 52 01                                                       and     r0, r1          ;  6
     645/    857E :                                                             ;or     r0, r1          ;  
     646/    857E : 70 E0                                                       push    r0              ; 12
     647/    8580 : 00 E5                                                       dec     r5              ;  6
     642/    8582 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8584 : 60 E0                                                       com     r0              ;  6
     644/    8586 : 52 01                                                       and     r0, r1          ;  6
     645/    8588 :                                                             ;or     r0, r1          ;  
     646/    8588 : 70 E0                                                       push    r0              ; 12
     647/    858A : 00 E5                                                       dec     r5              ;  6
     642/    858C : 82 04                                                       lde     r0, @rr4        ; 12
     643/    858E : 60 E0                                                       com     r0              ;  6
     644/    8590 : 52 01                                                       and     r0, r1          ;  6
     645/    8592 :                                                             ;or     r0, r1          ;  
     646/    8592 : 70 E0                                                       push    r0              ; 12
     647/    8594 : 00 E5                                                       dec     r5              ;  6
     642/    8596 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    8598 : 60 E0                                                       com     r0              ;  6
     644/    859A : 52 01                                                       and     r0, r1          ;  6
     645/    859C :                                                             ;or     r0, r1          ;  
     646/    859C : 70 E0                                                       push    r0              ; 12
     647/    859E : 00 E5                                                       dec     r5              ;  6
     642/    85A0 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85A2 : 60 E0                                                       com     r0              ;  6
     644/    85A4 : 52 01                                                       and     r0, r1          ;  6
     645/    85A6 :                                                             ;or     r0, r1          ;  
     646/    85A6 : 70 E0                                                       push    r0              ; 12
     647/    85A8 : 00 E5                                                       dec     r5              ;  6
     642/    85AA : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85AC : 60 E0                                                       com     r0              ;  6
     644/    85AE : 52 01                                                       and     r0, r1          ;  6
     645/    85B0 :                                                             ;or     r0, r1          ;  
     646/    85B0 : 70 E0                                                       push    r0              ; 12
     647/    85B2 : 00 E5                                                       dec     r5              ;  6
     642/    85B4 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85B6 : 60 E0                                                       com     r0              ;  6
     644/    85B8 : 52 01                                                       and     r0, r1          ;  6
     645/    85BA :                                                             ;or     r0, r1          ;  
     646/    85BA : 70 E0                                                       push    r0              ; 12
     647/    85BC : 00 E5                                                       dec     r5              ;  6
     642/    85BE : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85C0 : 60 E0                                                       com     r0              ;  6
     644/    85C2 : 52 01                                                       and     r0, r1          ;  6
     645/    85C4 :                                                             ;or     r0, r1          ;  
     646/    85C4 : 70 E0                                                       push    r0              ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 22 - 11/22/2024 22:53:50


     647/    85C6 : 00 E5                                                       dec     r5              ;  6
     642/    85C8 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85CA : 60 E0                                                       com     r0              ;  6
     644/    85CC : 52 01                                                       and     r0, r1          ;  6
     645/    85CE :                                                             ;or     r0, r1          ;  
     646/    85CE : 70 E0                                                       push    r0              ; 12
     647/    85D0 : 00 E5                                                       dec     r5              ;  6
     642/    85D2 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85D4 : 60 E0                                                       com     r0              ;  6
     644/    85D6 : 52 01                                                       and     r0, r1          ;  6
     645/    85D8 :                                                             ;or     r0, r1          ;  
     646/    85D8 : 70 E0                                                       push    r0              ; 12
     647/    85DA : 00 E5                                                       dec     r5              ;  6
     642/    85DC : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85DE : 60 E0                                                       com     r0              ;  6
     644/    85E0 : 52 01                                                       and     r0, r1          ;  6
     645/    85E2 :                                                             ;or     r0, r1          ;  
     646/    85E2 : 70 E0                                                       push    r0              ; 12
     647/    85E4 : 00 E5                                                       dec     r5              ;  6
     642/    85E6 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85E8 : 60 E0                                                       com     r0              ;  6
     644/    85EA : 52 01                                                       and     r0, r1          ;  6
     645/    85EC :                                                             ;or     r0, r1          ;  
     646/    85EC : 70 E0                                                       push    r0              ; 12
     647/    85EE : 00 E5                                                       dec     r5              ;  6
     642/    85F0 : 82 04                                                       lde     r0, @rr4        ; 12
     643/    85F2 : 60 E0                                                       com     r0              ;  6
     644/    85F4 : 52 01                                                       and     r0, r1          ;  6
     645/    85F6 :                                                             ;or     r0, r1          ;  
     646/    85F6 : 70 E0                                                       push    r0              ; 12
     647/    85F8 : 00 E5                                                       dec     r5              ;  6
     649/    85FA :                                                                                     ; 40
     650/    85FA : A0 EC                                               incw    rr12            ; next Farb-Byte
     651/    85FC : E0 EF                                               rr      r15             ; next Farb-Bank
     652/    85FE :                     
     653/    85FE :                     
     654/    85FE : 69 FE                                               ld      SPH, r6
     655/    8600 : 79 FF                                               ld      SPL, r7
     656/    8602 : 48 E6                                               ld      r4, r6
     657/    8604 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     658/    8607 : 58 E7                                               ld      r5, r7
     659/    8609 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     660/    860B :                     
     661/    860B : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     662/    860D : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     663/    860F :                                                                                     
     664/    860F :                                                     rept    40
     665/    860F :                                                             lde     r0, @rr4        ; 12
     666/    860F :                                                             ;com    r0              ; 
     667/    860F :                                                             or      r0, r1          ;  6
     668/    860F :                                                             ;and    r0, r1                                  
     669/    860F :                                                             push    r0              ; 12
     670/    860F :                                                             dec     r5              ;  6
     671/    860F :                                                     endm                            ; --
     665/    860F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8611 :                                                             ;com    r0              ; 
     667/    8611 : 42 01                                                       or      r0, r1          ;  6
     668/    8613 :                                                             ;and    r0, r1                                  
     669/    8613 : 70 E0                                                       push    r0              ; 12
     670/    8615 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 23 - 11/22/2024 22:53:50


     665/    8617 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8619 :                                                             ;com    r0              ; 
     667/    8619 : 42 01                                                       or      r0, r1          ;  6
     668/    861B :                                                             ;and    r0, r1                                  
     669/    861B : 70 E0                                                       push    r0              ; 12
     670/    861D : 00 E5                                                       dec     r5              ;  6
     665/    861F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8621 :                                                             ;com    r0              ; 
     667/    8621 : 42 01                                                       or      r0, r1          ;  6
     668/    8623 :                                                             ;and    r0, r1                                  
     669/    8623 : 70 E0                                                       push    r0              ; 12
     670/    8625 : 00 E5                                                       dec     r5              ;  6
     665/    8627 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8629 :                                                             ;com    r0              ; 
     667/    8629 : 42 01                                                       or      r0, r1          ;  6
     668/    862B :                                                             ;and    r0, r1                                  
     669/    862B : 70 E0                                                       push    r0              ; 12
     670/    862D : 00 E5                                                       dec     r5              ;  6
     665/    862F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8631 :                                                             ;com    r0              ; 
     667/    8631 : 42 01                                                       or      r0, r1          ;  6
     668/    8633 :                                                             ;and    r0, r1                                  
     669/    8633 : 70 E0                                                       push    r0              ; 12
     670/    8635 : 00 E5                                                       dec     r5              ;  6
     665/    8637 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8639 :                                                             ;com    r0              ; 
     667/    8639 : 42 01                                                       or      r0, r1          ;  6
     668/    863B :                                                             ;and    r0, r1                                  
     669/    863B : 70 E0                                                       push    r0              ; 12
     670/    863D : 00 E5                                                       dec     r5              ;  6
     665/    863F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8641 :                                                             ;com    r0              ; 
     667/    8641 : 42 01                                                       or      r0, r1          ;  6
     668/    8643 :                                                             ;and    r0, r1                                  
     669/    8643 : 70 E0                                                       push    r0              ; 12
     670/    8645 : 00 E5                                                       dec     r5              ;  6
     665/    8647 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8649 :                                                             ;com    r0              ; 
     667/    8649 : 42 01                                                       or      r0, r1          ;  6
     668/    864B :                                                             ;and    r0, r1                                  
     669/    864B : 70 E0                                                       push    r0              ; 12
     670/    864D : 00 E5                                                       dec     r5              ;  6
     665/    864F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8651 :                                                             ;com    r0              ; 
     667/    8651 : 42 01                                                       or      r0, r1          ;  6
     668/    8653 :                                                             ;and    r0, r1                                  
     669/    8653 : 70 E0                                                       push    r0              ; 12
     670/    8655 : 00 E5                                                       dec     r5              ;  6
     665/    8657 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8659 :                                                             ;com    r0              ; 
     667/    8659 : 42 01                                                       or      r0, r1          ;  6
     668/    865B :                                                             ;and    r0, r1                                  
     669/    865B : 70 E0                                                       push    r0              ; 12
     670/    865D : 00 E5                                                       dec     r5              ;  6
     665/    865F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8661 :                                                             ;com    r0              ; 
     667/    8661 : 42 01                                                       or      r0, r1          ;  6
     668/    8663 :                                                             ;and    r0, r1                                  
     669/    8663 : 70 E0                                                       push    r0              ; 12
     670/    8665 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 24 - 11/22/2024 22:53:50


     665/    8667 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8669 :                                                             ;com    r0              ; 
     667/    8669 : 42 01                                                       or      r0, r1          ;  6
     668/    866B :                                                             ;and    r0, r1                                  
     669/    866B : 70 E0                                                       push    r0              ; 12
     670/    866D : 00 E5                                                       dec     r5              ;  6
     665/    866F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8671 :                                                             ;com    r0              ; 
     667/    8671 : 42 01                                                       or      r0, r1          ;  6
     668/    8673 :                                                             ;and    r0, r1                                  
     669/    8673 : 70 E0                                                       push    r0              ; 12
     670/    8675 : 00 E5                                                       dec     r5              ;  6
     665/    8677 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8679 :                                                             ;com    r0              ; 
     667/    8679 : 42 01                                                       or      r0, r1          ;  6
     668/    867B :                                                             ;and    r0, r1                                  
     669/    867B : 70 E0                                                       push    r0              ; 12
     670/    867D : 00 E5                                                       dec     r5              ;  6
     665/    867F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8681 :                                                             ;com    r0              ; 
     667/    8681 : 42 01                                                       or      r0, r1          ;  6
     668/    8683 :                                                             ;and    r0, r1                                  
     669/    8683 : 70 E0                                                       push    r0              ; 12
     670/    8685 : 00 E5                                                       dec     r5              ;  6
     665/    8687 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8689 :                                                             ;com    r0              ; 
     667/    8689 : 42 01                                                       or      r0, r1          ;  6
     668/    868B :                                                             ;and    r0, r1                                  
     669/    868B : 70 E0                                                       push    r0              ; 12
     670/    868D : 00 E5                                                       dec     r5              ;  6
     665/    868F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8691 :                                                             ;com    r0              ; 
     667/    8691 : 42 01                                                       or      r0, r1          ;  6
     668/    8693 :                                                             ;and    r0, r1                                  
     669/    8693 : 70 E0                                                       push    r0              ; 12
     670/    8695 : 00 E5                                                       dec     r5              ;  6
     665/    8697 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8699 :                                                             ;com    r0              ; 
     667/    8699 : 42 01                                                       or      r0, r1          ;  6
     668/    869B :                                                             ;and    r0, r1                                  
     669/    869B : 70 E0                                                       push    r0              ; 12
     670/    869D : 00 E5                                                       dec     r5              ;  6
     665/    869F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86A1 :                                                             ;com    r0              ; 
     667/    86A1 : 42 01                                                       or      r0, r1          ;  6
     668/    86A3 :                                                             ;and    r0, r1                                  
     669/    86A3 : 70 E0                                                       push    r0              ; 12
     670/    86A5 : 00 E5                                                       dec     r5              ;  6
     665/    86A7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86A9 :                                                             ;com    r0              ; 
     667/    86A9 : 42 01                                                       or      r0, r1          ;  6
     668/    86AB :                                                             ;and    r0, r1                                  
     669/    86AB : 70 E0                                                       push    r0              ; 12
     670/    86AD : 00 E5                                                       dec     r5              ;  6
     665/    86AF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86B1 :                                                             ;com    r0              ; 
     667/    86B1 : 42 01                                                       or      r0, r1          ;  6
     668/    86B3 :                                                             ;and    r0, r1                                  
     669/    86B3 : 70 E0                                                       push    r0              ; 12
     670/    86B5 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 25 - 11/22/2024 22:53:50


     665/    86B7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86B9 :                                                             ;com    r0              ; 
     667/    86B9 : 42 01                                                       or      r0, r1          ;  6
     668/    86BB :                                                             ;and    r0, r1                                  
     669/    86BB : 70 E0                                                       push    r0              ; 12
     670/    86BD : 00 E5                                                       dec     r5              ;  6
     665/    86BF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86C1 :                                                             ;com    r0              ; 
     667/    86C1 : 42 01                                                       or      r0, r1          ;  6
     668/    86C3 :                                                             ;and    r0, r1                                  
     669/    86C3 : 70 E0                                                       push    r0              ; 12
     670/    86C5 : 00 E5                                                       dec     r5              ;  6
     665/    86C7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86C9 :                                                             ;com    r0              ; 
     667/    86C9 : 42 01                                                       or      r0, r1          ;  6
     668/    86CB :                                                             ;and    r0, r1                                  
     669/    86CB : 70 E0                                                       push    r0              ; 12
     670/    86CD : 00 E5                                                       dec     r5              ;  6
     665/    86CF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86D1 :                                                             ;com    r0              ; 
     667/    86D1 : 42 01                                                       or      r0, r1          ;  6
     668/    86D3 :                                                             ;and    r0, r1                                  
     669/    86D3 : 70 E0                                                       push    r0              ; 12
     670/    86D5 : 00 E5                                                       dec     r5              ;  6
     665/    86D7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86D9 :                                                             ;com    r0              ; 
     667/    86D9 : 42 01                                                       or      r0, r1          ;  6
     668/    86DB :                                                             ;and    r0, r1                                  
     669/    86DB : 70 E0                                                       push    r0              ; 12
     670/    86DD : 00 E5                                                       dec     r5              ;  6
     665/    86DF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86E1 :                                                             ;com    r0              ; 
     667/    86E1 : 42 01                                                       or      r0, r1          ;  6
     668/    86E3 :                                                             ;and    r0, r1                                  
     669/    86E3 : 70 E0                                                       push    r0              ; 12
     670/    86E5 : 00 E5                                                       dec     r5              ;  6
     665/    86E7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86E9 :                                                             ;com    r0              ; 
     667/    86E9 : 42 01                                                       or      r0, r1          ;  6
     668/    86EB :                                                             ;and    r0, r1                                  
     669/    86EB : 70 E0                                                       push    r0              ; 12
     670/    86ED : 00 E5                                                       dec     r5              ;  6
     665/    86EF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86F1 :                                                             ;com    r0              ; 
     667/    86F1 : 42 01                                                       or      r0, r1          ;  6
     668/    86F3 :                                                             ;and    r0, r1                                  
     669/    86F3 : 70 E0                                                       push    r0              ; 12
     670/    86F5 : 00 E5                                                       dec     r5              ;  6
     665/    86F7 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    86F9 :                                                             ;com    r0              ; 
     667/    86F9 : 42 01                                                       or      r0, r1          ;  6
     668/    86FB :                                                             ;and    r0, r1                                  
     669/    86FB : 70 E0                                                       push    r0              ; 12
     670/    86FD : 00 E5                                                       dec     r5              ;  6
     665/    86FF : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8701 :                                                             ;com    r0              ; 
     667/    8701 : 42 01                                                       or      r0, r1          ;  6
     668/    8703 :                                                             ;and    r0, r1                                  
     669/    8703 : 70 E0                                                       push    r0              ; 12
     670/    8705 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 26 - 11/22/2024 22:53:50


     665/    8707 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8709 :                                                             ;com    r0              ; 
     667/    8709 : 42 01                                                       or      r0, r1          ;  6
     668/    870B :                                                             ;and    r0, r1                                  
     669/    870B : 70 E0                                                       push    r0              ; 12
     670/    870D : 00 E5                                                       dec     r5              ;  6
     665/    870F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8711 :                                                             ;com    r0              ; 
     667/    8711 : 42 01                                                       or      r0, r1          ;  6
     668/    8713 :                                                             ;and    r0, r1                                  
     669/    8713 : 70 E0                                                       push    r0              ; 12
     670/    8715 : 00 E5                                                       dec     r5              ;  6
     665/    8717 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8719 :                                                             ;com    r0              ; 
     667/    8719 : 42 01                                                       or      r0, r1          ;  6
     668/    871B :                                                             ;and    r0, r1                                  
     669/    871B : 70 E0                                                       push    r0              ; 12
     670/    871D : 00 E5                                                       dec     r5              ;  6
     665/    871F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8721 :                                                             ;com    r0              ; 
     667/    8721 : 42 01                                                       or      r0, r1          ;  6
     668/    8723 :                                                             ;and    r0, r1                                  
     669/    8723 : 70 E0                                                       push    r0              ; 12
     670/    8725 : 00 E5                                                       dec     r5              ;  6
     665/    8727 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8729 :                                                             ;com    r0              ; 
     667/    8729 : 42 01                                                       or      r0, r1          ;  6
     668/    872B :                                                             ;and    r0, r1                                  
     669/    872B : 70 E0                                                       push    r0              ; 12
     670/    872D : 00 E5                                                       dec     r5              ;  6
     665/    872F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8731 :                                                             ;com    r0              ; 
     667/    8731 : 42 01                                                       or      r0, r1          ;  6
     668/    8733 :                                                             ;and    r0, r1                                  
     669/    8733 : 70 E0                                                       push    r0              ; 12
     670/    8735 : 00 E5                                                       dec     r5              ;  6
     665/    8737 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8739 :                                                             ;com    r0              ; 
     667/    8739 : 42 01                                                       or      r0, r1          ;  6
     668/    873B :                                                             ;and    r0, r1                                  
     669/    873B : 70 E0                                                       push    r0              ; 12
     670/    873D : 00 E5                                                       dec     r5              ;  6
     665/    873F : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8741 :                                                             ;com    r0              ; 
     667/    8741 : 42 01                                                       or      r0, r1          ;  6
     668/    8743 :                                                             ;and    r0, r1                                  
     669/    8743 : 70 E0                                                       push    r0              ; 12
     670/    8745 : 00 E5                                                       dec     r5              ;  6
     665/    8747 : 82 04                                                       lde     r0, @rr4        ; 12
     666/    8749 :                                                             ;com    r0              ; 
     667/    8749 : 42 01                                                       or      r0, r1          ;  6
     668/    874B :                                                             ;and    r0, r1                                  
     669/    874B : 70 E0                                                       push    r0              ; 12
     670/    874D : 00 E5                                                       dec     r5              ;  6
     672/    874F :                                                                                     ; 36
     673/    874F : A0 EC                                               incw    rr12            ; next Farb-Byte
     674/    8751 : E0 EF                                               rr      r15             ; next Farb-Bank
     675/    8753 :                     
     676/    8753 : 69 FE                                               ld      SPH, r6
     677/    8755 : 79 FF                                               ld      SPL, r7
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 27 - 11/22/2024 22:53:50


     678/    8757 : 48 E6                                               ld      r4, r6
     679/    8759 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     680/    875C : 58 E7                                               ld      r5, r7
     681/    875E : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     682/    8760 :                     
     683/    8760 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     684/    8762 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     685/    8764 :                     
     686/    8764 :                                                                                    
     687/    8764 :                                                     rept    40
     688/    8764 :                                                             lde     r0, @rr4        ; 12
     689/    8764 :                                                             com     r0              ;  6
     690/    8764 :                                                             and     r0, r1          ;  6
     691/    8764 :                                                             ;or     r0, r1          ;  
     692/    8764 :                                                             push    r0              ; 12
     693/    8764 :                                                             dec     r5              ;  6
     694/    8764 :                                                     endm                            ; --
     688/    8764 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8766 : 60 E0                                                       com     r0              ;  6
     690/    8768 : 52 01                                                       and     r0, r1          ;  6
     691/    876A :                                                             ;or     r0, r1          ;  
     692/    876A : 70 E0                                                       push    r0              ; 12
     693/    876C : 00 E5                                                       dec     r5              ;  6
     688/    876E : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8770 : 60 E0                                                       com     r0              ;  6
     690/    8772 : 52 01                                                       and     r0, r1          ;  6
     691/    8774 :                                                             ;or     r0, r1          ;  
     692/    8774 : 70 E0                                                       push    r0              ; 12
     693/    8776 : 00 E5                                                       dec     r5              ;  6
     688/    8778 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    877A : 60 E0                                                       com     r0              ;  6
     690/    877C : 52 01                                                       and     r0, r1          ;  6
     691/    877E :                                                             ;or     r0, r1          ;  
     692/    877E : 70 E0                                                       push    r0              ; 12
     693/    8780 : 00 E5                                                       dec     r5              ;  6
     688/    8782 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8784 : 60 E0                                                       com     r0              ;  6
     690/    8786 : 52 01                                                       and     r0, r1          ;  6
     691/    8788 :                                                             ;or     r0, r1          ;  
     692/    8788 : 70 E0                                                       push    r0              ; 12
     693/    878A : 00 E5                                                       dec     r5              ;  6
     688/    878C : 82 04                                                       lde     r0, @rr4        ; 12
     689/    878E : 60 E0                                                       com     r0              ;  6
     690/    8790 : 52 01                                                       and     r0, r1          ;  6
     691/    8792 :                                                             ;or     r0, r1          ;  
     692/    8792 : 70 E0                                                       push    r0              ; 12
     693/    8794 : 00 E5                                                       dec     r5              ;  6
     688/    8796 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8798 : 60 E0                                                       com     r0              ;  6
     690/    879A : 52 01                                                       and     r0, r1          ;  6
     691/    879C :                                                             ;or     r0, r1          ;  
     692/    879C : 70 E0                                                       push    r0              ; 12
     693/    879E : 00 E5                                                       dec     r5              ;  6
     688/    87A0 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87A2 : 60 E0                                                       com     r0              ;  6
     690/    87A4 : 52 01                                                       and     r0, r1          ;  6
     691/    87A6 :                                                             ;or     r0, r1          ;  
     692/    87A6 : 70 E0                                                       push    r0              ; 12
     693/    87A8 : 00 E5                                                       dec     r5              ;  6
     688/    87AA : 82 04                                                       lde     r0, @rr4        ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 28 - 11/22/2024 22:53:50


     689/    87AC : 60 E0                                                       com     r0              ;  6
     690/    87AE : 52 01                                                       and     r0, r1          ;  6
     691/    87B0 :                                                             ;or     r0, r1          ;  
     692/    87B0 : 70 E0                                                       push    r0              ; 12
     693/    87B2 : 00 E5                                                       dec     r5              ;  6
     688/    87B4 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87B6 : 60 E0                                                       com     r0              ;  6
     690/    87B8 : 52 01                                                       and     r0, r1          ;  6
     691/    87BA :                                                             ;or     r0, r1          ;  
     692/    87BA : 70 E0                                                       push    r0              ; 12
     693/    87BC : 00 E5                                                       dec     r5              ;  6
     688/    87BE : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87C0 : 60 E0                                                       com     r0              ;  6
     690/    87C2 : 52 01                                                       and     r0, r1          ;  6
     691/    87C4 :                                                             ;or     r0, r1          ;  
     692/    87C4 : 70 E0                                                       push    r0              ; 12
     693/    87C6 : 00 E5                                                       dec     r5              ;  6
     688/    87C8 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87CA : 60 E0                                                       com     r0              ;  6
     690/    87CC : 52 01                                                       and     r0, r1          ;  6
     691/    87CE :                                                             ;or     r0, r1          ;  
     692/    87CE : 70 E0                                                       push    r0              ; 12
     693/    87D0 : 00 E5                                                       dec     r5              ;  6
     688/    87D2 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87D4 : 60 E0                                                       com     r0              ;  6
     690/    87D6 : 52 01                                                       and     r0, r1          ;  6
     691/    87D8 :                                                             ;or     r0, r1          ;  
     692/    87D8 : 70 E0                                                       push    r0              ; 12
     693/    87DA : 00 E5                                                       dec     r5              ;  6
     688/    87DC : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87DE : 60 E0                                                       com     r0              ;  6
     690/    87E0 : 52 01                                                       and     r0, r1          ;  6
     691/    87E2 :                                                             ;or     r0, r1          ;  
     692/    87E2 : 70 E0                                                       push    r0              ; 12
     693/    87E4 : 00 E5                                                       dec     r5              ;  6
     688/    87E6 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87E8 : 60 E0                                                       com     r0              ;  6
     690/    87EA : 52 01                                                       and     r0, r1          ;  6
     691/    87EC :                                                             ;or     r0, r1          ;  
     692/    87EC : 70 E0                                                       push    r0              ; 12
     693/    87EE : 00 E5                                                       dec     r5              ;  6
     688/    87F0 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87F2 : 60 E0                                                       com     r0              ;  6
     690/    87F4 : 52 01                                                       and     r0, r1          ;  6
     691/    87F6 :                                                             ;or     r0, r1          ;  
     692/    87F6 : 70 E0                                                       push    r0              ; 12
     693/    87F8 : 00 E5                                                       dec     r5              ;  6
     688/    87FA : 82 04                                                       lde     r0, @rr4        ; 12
     689/    87FC : 60 E0                                                       com     r0              ;  6
     690/    87FE : 52 01                                                       and     r0, r1          ;  6
     691/    8800 :                                                             ;or     r0, r1          ;  
     692/    8800 : 70 E0                                                       push    r0              ; 12
     693/    8802 : 00 E5                                                       dec     r5              ;  6
     688/    8804 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8806 : 60 E0                                                       com     r0              ;  6
     690/    8808 : 52 01                                                       and     r0, r1          ;  6
     691/    880A :                                                             ;or     r0, r1          ;  
     692/    880A : 70 E0                                                       push    r0              ; 12
     693/    880C : 00 E5                                                       dec     r5              ;  6
     688/    880E : 82 04                                                       lde     r0, @rr4        ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 29 - 11/22/2024 22:53:50


     689/    8810 : 60 E0                                                       com     r0              ;  6
     690/    8812 : 52 01                                                       and     r0, r1          ;  6
     691/    8814 :                                                             ;or     r0, r1          ;  
     692/    8814 : 70 E0                                                       push    r0              ; 12
     693/    8816 : 00 E5                                                       dec     r5              ;  6
     688/    8818 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    881A : 60 E0                                                       com     r0              ;  6
     690/    881C : 52 01                                                       and     r0, r1          ;  6
     691/    881E :                                                             ;or     r0, r1          ;  
     692/    881E : 70 E0                                                       push    r0              ; 12
     693/    8820 : 00 E5                                                       dec     r5              ;  6
     688/    8822 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8824 : 60 E0                                                       com     r0              ;  6
     690/    8826 : 52 01                                                       and     r0, r1          ;  6
     691/    8828 :                                                             ;or     r0, r1          ;  
     692/    8828 : 70 E0                                                       push    r0              ; 12
     693/    882A : 00 E5                                                       dec     r5              ;  6
     688/    882C : 82 04                                                       lde     r0, @rr4        ; 12
     689/    882E : 60 E0                                                       com     r0              ;  6
     690/    8830 : 52 01                                                       and     r0, r1          ;  6
     691/    8832 :                                                             ;or     r0, r1          ;  
     692/    8832 : 70 E0                                                       push    r0              ; 12
     693/    8834 : 00 E5                                                       dec     r5              ;  6
     688/    8836 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8838 : 60 E0                                                       com     r0              ;  6
     690/    883A : 52 01                                                       and     r0, r1          ;  6
     691/    883C :                                                             ;or     r0, r1          ;  
     692/    883C : 70 E0                                                       push    r0              ; 12
     693/    883E : 00 E5                                                       dec     r5              ;  6
     688/    8840 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8842 : 60 E0                                                       com     r0              ;  6
     690/    8844 : 52 01                                                       and     r0, r1          ;  6
     691/    8846 :                                                             ;or     r0, r1          ;  
     692/    8846 : 70 E0                                                       push    r0              ; 12
     693/    8848 : 00 E5                                                       dec     r5              ;  6
     688/    884A : 82 04                                                       lde     r0, @rr4        ; 12
     689/    884C : 60 E0                                                       com     r0              ;  6
     690/    884E : 52 01                                                       and     r0, r1          ;  6
     691/    8850 :                                                             ;or     r0, r1          ;  
     692/    8850 : 70 E0                                                       push    r0              ; 12
     693/    8852 : 00 E5                                                       dec     r5              ;  6
     688/    8854 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8856 : 60 E0                                                       com     r0              ;  6
     690/    8858 : 52 01                                                       and     r0, r1          ;  6
     691/    885A :                                                             ;or     r0, r1          ;  
     692/    885A : 70 E0                                                       push    r0              ; 12
     693/    885C : 00 E5                                                       dec     r5              ;  6
     688/    885E : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8860 : 60 E0                                                       com     r0              ;  6
     690/    8862 : 52 01                                                       and     r0, r1          ;  6
     691/    8864 :                                                             ;or     r0, r1          ;  
     692/    8864 : 70 E0                                                       push    r0              ; 12
     693/    8866 : 00 E5                                                       dec     r5              ;  6
     688/    8868 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    886A : 60 E0                                                       com     r0              ;  6
     690/    886C : 52 01                                                       and     r0, r1          ;  6
     691/    886E :                                                             ;or     r0, r1          ;  
     692/    886E : 70 E0                                                       push    r0              ; 12
     693/    8870 : 00 E5                                                       dec     r5              ;  6
     688/    8872 : 82 04                                                       lde     r0, @rr4        ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 30 - 11/22/2024 22:53:50


     689/    8874 : 60 E0                                                       com     r0              ;  6
     690/    8876 : 52 01                                                       and     r0, r1          ;  6
     691/    8878 :                                                             ;or     r0, r1          ;  
     692/    8878 : 70 E0                                                       push    r0              ; 12
     693/    887A : 00 E5                                                       dec     r5              ;  6
     688/    887C : 82 04                                                       lde     r0, @rr4        ; 12
     689/    887E : 60 E0                                                       com     r0              ;  6
     690/    8880 : 52 01                                                       and     r0, r1          ;  6
     691/    8882 :                                                             ;or     r0, r1          ;  
     692/    8882 : 70 E0                                                       push    r0              ; 12
     693/    8884 : 00 E5                                                       dec     r5              ;  6
     688/    8886 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8888 : 60 E0                                                       com     r0              ;  6
     690/    888A : 52 01                                                       and     r0, r1          ;  6
     691/    888C :                                                             ;or     r0, r1          ;  
     692/    888C : 70 E0                                                       push    r0              ; 12
     693/    888E : 00 E5                                                       dec     r5              ;  6
     688/    8890 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    8892 : 60 E0                                                       com     r0              ;  6
     690/    8894 : 52 01                                                       and     r0, r1          ;  6
     691/    8896 :                                                             ;or     r0, r1          ;  
     692/    8896 : 70 E0                                                       push    r0              ; 12
     693/    8898 : 00 E5                                                       dec     r5              ;  6
     688/    889A : 82 04                                                       lde     r0, @rr4        ; 12
     689/    889C : 60 E0                                                       com     r0              ;  6
     690/    889E : 52 01                                                       and     r0, r1          ;  6
     691/    88A0 :                                                             ;or     r0, r1          ;  
     692/    88A0 : 70 E0                                                       push    r0              ; 12
     693/    88A2 : 00 E5                                                       dec     r5              ;  6
     688/    88A4 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88A6 : 60 E0                                                       com     r0              ;  6
     690/    88A8 : 52 01                                                       and     r0, r1          ;  6
     691/    88AA :                                                             ;or     r0, r1          ;  
     692/    88AA : 70 E0                                                       push    r0              ; 12
     693/    88AC : 00 E5                                                       dec     r5              ;  6
     688/    88AE : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88B0 : 60 E0                                                       com     r0              ;  6
     690/    88B2 : 52 01                                                       and     r0, r1          ;  6
     691/    88B4 :                                                             ;or     r0, r1          ;  
     692/    88B4 : 70 E0                                                       push    r0              ; 12
     693/    88B6 : 00 E5                                                       dec     r5              ;  6
     688/    88B8 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88BA : 60 E0                                                       com     r0              ;  6
     690/    88BC : 52 01                                                       and     r0, r1          ;  6
     691/    88BE :                                                             ;or     r0, r1          ;  
     692/    88BE : 70 E0                                                       push    r0              ; 12
     693/    88C0 : 00 E5                                                       dec     r5              ;  6
     688/    88C2 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88C4 : 60 E0                                                       com     r0              ;  6
     690/    88C6 : 52 01                                                       and     r0, r1          ;  6
     691/    88C8 :                                                             ;or     r0, r1          ;  
     692/    88C8 : 70 E0                                                       push    r0              ; 12
     693/    88CA : 00 E5                                                       dec     r5              ;  6
     688/    88CC : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88CE : 60 E0                                                       com     r0              ;  6
     690/    88D0 : 52 01                                                       and     r0, r1          ;  6
     691/    88D2 :                                                             ;or     r0, r1          ;  
     692/    88D2 : 70 E0                                                       push    r0              ; 12
     693/    88D4 : 00 E5                                                       dec     r5              ;  6
     688/    88D6 : 82 04                                                       lde     r0, @rr4        ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 31 - 11/22/2024 22:53:50


     689/    88D8 : 60 E0                                                       com     r0              ;  6
     690/    88DA : 52 01                                                       and     r0, r1          ;  6
     691/    88DC :                                                             ;or     r0, r1          ;  
     692/    88DC : 70 E0                                                       push    r0              ; 12
     693/    88DE : 00 E5                                                       dec     r5              ;  6
     688/    88E0 : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88E2 : 60 E0                                                       com     r0              ;  6
     690/    88E4 : 52 01                                                       and     r0, r1          ;  6
     691/    88E6 :                                                             ;or     r0, r1          ;  
     692/    88E6 : 70 E0                                                       push    r0              ; 12
     693/    88E8 : 00 E5                                                       dec     r5              ;  6
     688/    88EA : 82 04                                                       lde     r0, @rr4        ; 12
     689/    88EC : 60 E0                                                       com     r0              ;  6
     690/    88EE : 52 01                                                       and     r0, r1          ;  6
     691/    88F0 :                                                             ;or     r0, r1          ;  
     692/    88F0 : 70 E0                                                       push    r0              ; 12
     693/    88F2 : 00 E5                                                       dec     r5              ;  6
     695/    88F4 :                                                                                     ; 40
     696/    88F4 : A0 EC                                               incw    rr12            ; next Farb-Byte
     697/    88F6 : E0 EF                                               rr      r15             ; next Farb-Bank
     698/    88F8 :                     
     699/    88F8 :                     
     700/    88F8 : 69 FE                                               ld      SPH, r6
     701/    88FA : 79 FF                                               ld      SPL, r7
     702/    88FC : 48 E6                                               ld      r4, r6
     703/    88FE : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     704/    8901 : 58 E7                                               ld      r5, r7
     705/    8903 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     706/    8905 :                     
     707/    8905 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     708/    8907 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     709/    8909 :                                                                                    
     710/    8909 :                                                     rept    40
     711/    8909 :                                                             lde     r0, @rr4        ; 12
     712/    8909 :                                                             ;com    r0              ;   
     713/    8909 :                                                             or      r0, r1          ;  6
     714/    8909 :                                                             ;and    r0, r1
     715/    8909 :                                                             push    r0              ; 12
     716/    8909 :                                                             dec     r5              ;  6
     717/    8909 :                                                     endm                            ; --
     711/    8909 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    890B :                                                             ;com    r0              ;   
     713/    890B : 42 01                                                       or      r0, r1          ;  6
     714/    890D :                                                             ;and    r0, r1
     715/    890D : 70 E0                                                       push    r0              ; 12
     716/    890F : 00 E5                                                       dec     r5              ;  6
     711/    8911 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8913 :                                                             ;com    r0              ;   
     713/    8913 : 42 01                                                       or      r0, r1          ;  6
     714/    8915 :                                                             ;and    r0, r1
     715/    8915 : 70 E0                                                       push    r0              ; 12
     716/    8917 : 00 E5                                                       dec     r5              ;  6
     711/    8919 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    891B :                                                             ;com    r0              ;   
     713/    891B : 42 01                                                       or      r0, r1          ;  6
     714/    891D :                                                             ;and    r0, r1
     715/    891D : 70 E0                                                       push    r0              ; 12
     716/    891F : 00 E5                                                       dec     r5              ;  6
     711/    8921 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8923 :                                                             ;com    r0              ;   
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 32 - 11/22/2024 22:53:50


     713/    8923 : 42 01                                                       or      r0, r1          ;  6
     714/    8925 :                                                             ;and    r0, r1
     715/    8925 : 70 E0                                                       push    r0              ; 12
     716/    8927 : 00 E5                                                       dec     r5              ;  6
     711/    8929 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    892B :                                                             ;com    r0              ;   
     713/    892B : 42 01                                                       or      r0, r1          ;  6
     714/    892D :                                                             ;and    r0, r1
     715/    892D : 70 E0                                                       push    r0              ; 12
     716/    892F : 00 E5                                                       dec     r5              ;  6
     711/    8931 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8933 :                                                             ;com    r0              ;   
     713/    8933 : 42 01                                                       or      r0, r1          ;  6
     714/    8935 :                                                             ;and    r0, r1
     715/    8935 : 70 E0                                                       push    r0              ; 12
     716/    8937 : 00 E5                                                       dec     r5              ;  6
     711/    8939 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    893B :                                                             ;com    r0              ;   
     713/    893B : 42 01                                                       or      r0, r1          ;  6
     714/    893D :                                                             ;and    r0, r1
     715/    893D : 70 E0                                                       push    r0              ; 12
     716/    893F : 00 E5                                                       dec     r5              ;  6
     711/    8941 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8943 :                                                             ;com    r0              ;   
     713/    8943 : 42 01                                                       or      r0, r1          ;  6
     714/    8945 :                                                             ;and    r0, r1
     715/    8945 : 70 E0                                                       push    r0              ; 12
     716/    8947 : 00 E5                                                       dec     r5              ;  6
     711/    8949 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    894B :                                                             ;com    r0              ;   
     713/    894B : 42 01                                                       or      r0, r1          ;  6
     714/    894D :                                                             ;and    r0, r1
     715/    894D : 70 E0                                                       push    r0              ; 12
     716/    894F : 00 E5                                                       dec     r5              ;  6
     711/    8951 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8953 :                                                             ;com    r0              ;   
     713/    8953 : 42 01                                                       or      r0, r1          ;  6
     714/    8955 :                                                             ;and    r0, r1
     715/    8955 : 70 E0                                                       push    r0              ; 12
     716/    8957 : 00 E5                                                       dec     r5              ;  6
     711/    8959 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    895B :                                                             ;com    r0              ;   
     713/    895B : 42 01                                                       or      r0, r1          ;  6
     714/    895D :                                                             ;and    r0, r1
     715/    895D : 70 E0                                                       push    r0              ; 12
     716/    895F : 00 E5                                                       dec     r5              ;  6
     711/    8961 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8963 :                                                             ;com    r0              ;   
     713/    8963 : 42 01                                                       or      r0, r1          ;  6
     714/    8965 :                                                             ;and    r0, r1
     715/    8965 : 70 E0                                                       push    r0              ; 12
     716/    8967 : 00 E5                                                       dec     r5              ;  6
     711/    8969 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    896B :                                                             ;com    r0              ;   
     713/    896B : 42 01                                                       or      r0, r1          ;  6
     714/    896D :                                                             ;and    r0, r1
     715/    896D : 70 E0                                                       push    r0              ; 12
     716/    896F : 00 E5                                                       dec     r5              ;  6
     711/    8971 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8973 :                                                             ;com    r0              ;   
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 33 - 11/22/2024 22:53:50


     713/    8973 : 42 01                                                       or      r0, r1          ;  6
     714/    8975 :                                                             ;and    r0, r1
     715/    8975 : 70 E0                                                       push    r0              ; 12
     716/    8977 : 00 E5                                                       dec     r5              ;  6
     711/    8979 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    897B :                                                             ;com    r0              ;   
     713/    897B : 42 01                                                       or      r0, r1          ;  6
     714/    897D :                                                             ;and    r0, r1
     715/    897D : 70 E0                                                       push    r0              ; 12
     716/    897F : 00 E5                                                       dec     r5              ;  6
     711/    8981 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8983 :                                                             ;com    r0              ;   
     713/    8983 : 42 01                                                       or      r0, r1          ;  6
     714/    8985 :                                                             ;and    r0, r1
     715/    8985 : 70 E0                                                       push    r0              ; 12
     716/    8987 : 00 E5                                                       dec     r5              ;  6
     711/    8989 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    898B :                                                             ;com    r0              ;   
     713/    898B : 42 01                                                       or      r0, r1          ;  6
     714/    898D :                                                             ;and    r0, r1
     715/    898D : 70 E0                                                       push    r0              ; 12
     716/    898F : 00 E5                                                       dec     r5              ;  6
     711/    8991 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8993 :                                                             ;com    r0              ;   
     713/    8993 : 42 01                                                       or      r0, r1          ;  6
     714/    8995 :                                                             ;and    r0, r1
     715/    8995 : 70 E0                                                       push    r0              ; 12
     716/    8997 : 00 E5                                                       dec     r5              ;  6
     711/    8999 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    899B :                                                             ;com    r0              ;   
     713/    899B : 42 01                                                       or      r0, r1          ;  6
     714/    899D :                                                             ;and    r0, r1
     715/    899D : 70 E0                                                       push    r0              ; 12
     716/    899F : 00 E5                                                       dec     r5              ;  6
     711/    89A1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89A3 :                                                             ;com    r0              ;   
     713/    89A3 : 42 01                                                       or      r0, r1          ;  6
     714/    89A5 :                                                             ;and    r0, r1
     715/    89A5 : 70 E0                                                       push    r0              ; 12
     716/    89A7 : 00 E5                                                       dec     r5              ;  6
     711/    89A9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89AB :                                                             ;com    r0              ;   
     713/    89AB : 42 01                                                       or      r0, r1          ;  6
     714/    89AD :                                                             ;and    r0, r1
     715/    89AD : 70 E0                                                       push    r0              ; 12
     716/    89AF : 00 E5                                                       dec     r5              ;  6
     711/    89B1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89B3 :                                                             ;com    r0              ;   
     713/    89B3 : 42 01                                                       or      r0, r1          ;  6
     714/    89B5 :                                                             ;and    r0, r1
     715/    89B5 : 70 E0                                                       push    r0              ; 12
     716/    89B7 : 00 E5                                                       dec     r5              ;  6
     711/    89B9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89BB :                                                             ;com    r0              ;   
     713/    89BB : 42 01                                                       or      r0, r1          ;  6
     714/    89BD :                                                             ;and    r0, r1
     715/    89BD : 70 E0                                                       push    r0              ; 12
     716/    89BF : 00 E5                                                       dec     r5              ;  6
     711/    89C1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89C3 :                                                             ;com    r0              ;   
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 34 - 11/22/2024 22:53:50


     713/    89C3 : 42 01                                                       or      r0, r1          ;  6
     714/    89C5 :                                                             ;and    r0, r1
     715/    89C5 : 70 E0                                                       push    r0              ; 12
     716/    89C7 : 00 E5                                                       dec     r5              ;  6
     711/    89C9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89CB :                                                             ;com    r0              ;   
     713/    89CB : 42 01                                                       or      r0, r1          ;  6
     714/    89CD :                                                             ;and    r0, r1
     715/    89CD : 70 E0                                                       push    r0              ; 12
     716/    89CF : 00 E5                                                       dec     r5              ;  6
     711/    89D1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89D3 :                                                             ;com    r0              ;   
     713/    89D3 : 42 01                                                       or      r0, r1          ;  6
     714/    89D5 :                                                             ;and    r0, r1
     715/    89D5 : 70 E0                                                       push    r0              ; 12
     716/    89D7 : 00 E5                                                       dec     r5              ;  6
     711/    89D9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89DB :                                                             ;com    r0              ;   
     713/    89DB : 42 01                                                       or      r0, r1          ;  6
     714/    89DD :                                                             ;and    r0, r1
     715/    89DD : 70 E0                                                       push    r0              ; 12
     716/    89DF : 00 E5                                                       dec     r5              ;  6
     711/    89E1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89E3 :                                                             ;com    r0              ;   
     713/    89E3 : 42 01                                                       or      r0, r1          ;  6
     714/    89E5 :                                                             ;and    r0, r1
     715/    89E5 : 70 E0                                                       push    r0              ; 12
     716/    89E7 : 00 E5                                                       dec     r5              ;  6
     711/    89E9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89EB :                                                             ;com    r0              ;   
     713/    89EB : 42 01                                                       or      r0, r1          ;  6
     714/    89ED :                                                             ;and    r0, r1
     715/    89ED : 70 E0                                                       push    r0              ; 12
     716/    89EF : 00 E5                                                       dec     r5              ;  6
     711/    89F1 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89F3 :                                                             ;com    r0              ;   
     713/    89F3 : 42 01                                                       or      r0, r1          ;  6
     714/    89F5 :                                                             ;and    r0, r1
     715/    89F5 : 70 E0                                                       push    r0              ; 12
     716/    89F7 : 00 E5                                                       dec     r5              ;  6
     711/    89F9 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    89FB :                                                             ;com    r0              ;   
     713/    89FB : 42 01                                                       or      r0, r1          ;  6
     714/    89FD :                                                             ;and    r0, r1
     715/    89FD : 70 E0                                                       push    r0              ; 12
     716/    89FF : 00 E5                                                       dec     r5              ;  6
     711/    8A01 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A03 :                                                             ;com    r0              ;   
     713/    8A03 : 42 01                                                       or      r0, r1          ;  6
     714/    8A05 :                                                             ;and    r0, r1
     715/    8A05 : 70 E0                                                       push    r0              ; 12
     716/    8A07 : 00 E5                                                       dec     r5              ;  6
     711/    8A09 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A0B :                                                             ;com    r0              ;   
     713/    8A0B : 42 01                                                       or      r0, r1          ;  6
     714/    8A0D :                                                             ;and    r0, r1
     715/    8A0D : 70 E0                                                       push    r0              ; 12
     716/    8A0F : 00 E5                                                       dec     r5              ;  6
     711/    8A11 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A13 :                                                             ;com    r0              ;   
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 35 - 11/22/2024 22:53:50


     713/    8A13 : 42 01                                                       or      r0, r1          ;  6
     714/    8A15 :                                                             ;and    r0, r1
     715/    8A15 : 70 E0                                                       push    r0              ; 12
     716/    8A17 : 00 E5                                                       dec     r5              ;  6
     711/    8A19 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A1B :                                                             ;com    r0              ;   
     713/    8A1B : 42 01                                                       or      r0, r1          ;  6
     714/    8A1D :                                                             ;and    r0, r1
     715/    8A1D : 70 E0                                                       push    r0              ; 12
     716/    8A1F : 00 E5                                                       dec     r5              ;  6
     711/    8A21 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A23 :                                                             ;com    r0              ;   
     713/    8A23 : 42 01                                                       or      r0, r1          ;  6
     714/    8A25 :                                                             ;and    r0, r1
     715/    8A25 : 70 E0                                                       push    r0              ; 12
     716/    8A27 : 00 E5                                                       dec     r5              ;  6
     711/    8A29 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A2B :                                                             ;com    r0              ;   
     713/    8A2B : 42 01                                                       or      r0, r1          ;  6
     714/    8A2D :                                                             ;and    r0, r1
     715/    8A2D : 70 E0                                                       push    r0              ; 12
     716/    8A2F : 00 E5                                                       dec     r5              ;  6
     711/    8A31 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A33 :                                                             ;com    r0              ;   
     713/    8A33 : 42 01                                                       or      r0, r1          ;  6
     714/    8A35 :                                                             ;and    r0, r1
     715/    8A35 : 70 E0                                                       push    r0              ; 12
     716/    8A37 : 00 E5                                                       dec     r5              ;  6
     711/    8A39 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A3B :                                                             ;com    r0              ;   
     713/    8A3B : 42 01                                                       or      r0, r1          ;  6
     714/    8A3D :                                                             ;and    r0, r1
     715/    8A3D : 70 E0                                                       push    r0              ; 12
     716/    8A3F : 00 E5                                                       dec     r5              ;  6
     711/    8A41 : 82 04                                                       lde     r0, @rr4        ; 12
     712/    8A43 :                                                             ;com    r0              ;   
     713/    8A43 : 42 01                                                       or      r0, r1          ;  6
     714/    8A45 :                                                             ;and    r0, r1
     715/    8A45 : 70 E0                                                       push    r0              ; 12
     716/    8A47 : 00 E5                                                       dec     r5              ;  6
     718/    8A49 :                                                                                     ; 36
     719/    8A49 : A0 EC                                               incw    rr12            ; next Farb-Byte
     720/    8A4B : E0 EF                                               rr      r15             ; next Farb-Bank
     721/    8A4D :                                                     
     722/    8A4D :                                                     
     723/    8A4D : 80 E6                                       decw    rr6
     724/    8A4F :                                             ;-----------------------
     725/    8A4F : 06 E7 28                                    add     R7, #28h        ; 10 BWS-lo + 28h (40)
     726/    8A52 : 7B 08                                       jr      C,  vram10      ; 10/12
     727/    8A54 : 4B 07                                       jr      OV, vram20      ; 10/12
     728/    8A56 : 66 E7 78                                    tcm     R7, #78h        ; 10
     729/    8A59 : EB 08                                       jr      NZ, vram30      ; 10/12
     730/    8A5B : 0B                                          db      0Bh             ; 10/12 0Bh = JR F (also niemals), irgendwo hin
     731/    8A5C :                                                                     ;       Distanz (opcode inc r6)
     732/    8A5C :                                                                     ; wenn Z = 0, springe nicht (2 Bytes)
     733/    8A5C :                                                                     ; wenn Z = 1, Distanz wird als "inc r6" gelesen
     734/    8A5C : 6E                                  vram10: inc     R6              ; 6
     735/    8A5D : 06 E7 08                            vram20: add     R7, #8          ; 10
     736/    8A60 : 16 E6 00                                    adc     R6, #0          ; 10
     737/    8A63 :                                     vram30: ;-----------------------
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 36 - 11/22/2024 22:53:50


     738/    8A63 :                     
     739/    8A63 : 00 EA                               dec     r10
     740/    8A65 : ED 84 53                            jp      nz, dl2
     741/    8A68 :                     
     742/    8A68 : E4 6A FE                    dlr1:   ld      SPH, saveH
     743/    8A6B : E4 6B FF                            ld      SPL, saveL
     744/    8A6E :                     
     745/    8A6E : 50 E1                               pop     r1
     746/    8A70 : 50 E0                               pop     r0
     747/    8A72 :                     
     748/    8A72 : 9F                                  EI
     749/    8A73 : AF                                  ret
     750/    8A74 :                     
     751/    8A74 : E6 46 04            dlrret:         ld      var_T_hi, #4
     752/    8A77 : D6 84 00                            call    tLine
     753/    8A7A : 8B EC                               jr      dlr1
     754/    8A7C :                     
     755/    8A7C :                     ;------------------------------------------------------------------------------
     756/    8A7C :                     
     757/    8A7C : 8F                  drawLineW:      DI
     758/    8A7D : 70 E0                               push    r0
     759/    8A7F : 70 E1                               push    r1
     760/    8A81 : E4 FE 6A                            ld      saveH, SPH
     761/    8A84 : E4 FF 6B                            ld      saveL, SPL
     762/    8A87 :                     
     763/    8A87 : AC 04                               ld      r10, #COLORS_PER_LINE           ; Zeilen-ZÃ¤hler
     764/    8A89 : 4C 60                               ld      r4, #60h
     765/    8A8B : E6 4F 27                            ld      var_X_lo, #39
     766/    8A8E :                     
     767/    8A8E : A6 50 80                            cp      var_Y_hi, #128                  ; alle Zeilen schreiben ?
     768/    8A91 : 6B 28                               jr      z, dln11
     769/    8A93 :                     
     770/    8A93 : 24 51 50                            sub     var_Y_hi, var_Y_lo              ; Anzahl Zeilen sichtbar berechnen
     771/    8A96 : 6D 90 3F                            jp      z, dlrret2
     772/    8A99 : 5B 09                               jr      mi, neg2                                ; neg/pos ?
     773/    8A9B :                             pos2:
     774/    8A9B : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     775/    8A9E : FB 1B                               jr      nc, dln11
     776/    8AA0 :                     
     777/    8AA0 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     778/    8AA2 : 8B 12                               jr      dln22
     779/    8AA4 :                             neg2:
     780/    8AA4 : 60 50                               com     var_Y_hi                        ; Zweierkomplement
     781/    8AA6 : 06 50 01                            add     var_Y_hi, #1
     782/    8AA9 :                     
     783/    8AA9 : A6 50 04                            cp      var_Y_hi, #COLORS_PER_LINE      ; Anzahl Zeilen begrenzen ?
     784/    8AAC : FB 0D                               jr      nc, dln11
     785/    8AAE :                     
     786/    8AAE : 06 51 04                            add     var_Y_lo, #COLORS_PER_LINE
     787/    8AB1 : 24 50 51                            sub     var_Y_lo, var_Y_hi
     788/    8AB4 : A8 50                               ld      r10, var_Y_hi                   ; Anzahl Zeilen neu
     789/    8AB6 :                     
     790/    8AB6 : A9 46                       dln22:  ld      var_T_hi, r10                   ; Ausgleich Zeit fÃ¼r fehlende Zeilen
     791/    8AB8 : D6 84 00                            call    tLine
     792/    8ABB :                     
     793/    8ABB :                             dln11:
     794/    8ABB :                                     ; r0,r2,r3,r4,r5,r6,r7
     795/    8ABB : D6 A9 13                            call    XBY_to_vram
     796/    8ABE :                     
     797/    8ABE : 9C 04                               dl22:   ld      r9,  #4                 ; Farb-Bank-ZÃ¤hler
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 37 - 11/22/2024 22:53:50


     798/    8AC0 : FC 7F                                       ld      r15, #01111111b         ; rot: Farb-BÃ¤nke = RGBHxxxx
     799/    8AC2 :                     
     800/    8AC2 : A0 E6                                       incw    rr6                     ; wegen PUSH -> SP=SP-1
     801/    8AC4 :                                                                     
     802/    8AC4 : 69 FE                                               ld      SPH, r6
     803/    8AC6 : 79 FF                                               ld      SPL, r7
     804/    8AC8 : 48 E6                                               ld      r4, r6
     805/    8ACA : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     806/    8ACD : 58 E7                                               ld      r5, r7
     807/    8ACF : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     808/    8AD1 :                     
     809/    8AD1 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     810/    8AD3 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     811/    8AD5 :                     
     812/    8AD5 :                                                     rept    40
     813/    8AD5 :                                                             lde     r0, @rr4        ; 12
     814/    8AD5 :                                                             ;com    r0
     815/    8AD5 :                                                             ;and    r0, r1          ;  
     816/    8AD5 :                                                             or      r0, r1          ;  6
     817/    8AD5 :                                                             push    r0              ; 12
     818/    8AD5 :                                                             dec     r5              ;  6
     819/    8AD5 :                                                     endm                            ; --
     813/    8AD5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8AD7 :                                                             ;com    r0
     815/    8AD7 :                                                             ;and    r0, r1          ;  
     816/    8AD7 : 42 01                                                       or      r0, r1          ;  6
     817/    8AD9 : 70 E0                                                       push    r0              ; 12
     818/    8ADB : 00 E5                                                       dec     r5              ;  6
     813/    8ADD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8ADF :                                                             ;com    r0
     815/    8ADF :                                                             ;and    r0, r1          ;  
     816/    8ADF : 42 01                                                       or      r0, r1          ;  6
     817/    8AE1 : 70 E0                                                       push    r0              ; 12
     818/    8AE3 : 00 E5                                                       dec     r5              ;  6
     813/    8AE5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8AE7 :                                                             ;com    r0
     815/    8AE7 :                                                             ;and    r0, r1          ;  
     816/    8AE7 : 42 01                                                       or      r0, r1          ;  6
     817/    8AE9 : 70 E0                                                       push    r0              ; 12
     818/    8AEB : 00 E5                                                       dec     r5              ;  6
     813/    8AED : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8AEF :                                                             ;com    r0
     815/    8AEF :                                                             ;and    r0, r1          ;  
     816/    8AEF : 42 01                                                       or      r0, r1          ;  6
     817/    8AF1 : 70 E0                                                       push    r0              ; 12
     818/    8AF3 : 00 E5                                                       dec     r5              ;  6
     813/    8AF5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8AF7 :                                                             ;com    r0
     815/    8AF7 :                                                             ;and    r0, r1          ;  
     816/    8AF7 : 42 01                                                       or      r0, r1          ;  6
     817/    8AF9 : 70 E0                                                       push    r0              ; 12
     818/    8AFB : 00 E5                                                       dec     r5              ;  6
     813/    8AFD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8AFF :                                                             ;com    r0
     815/    8AFF :                                                             ;and    r0, r1          ;  
     816/    8AFF : 42 01                                                       or      r0, r1          ;  6
     817/    8B01 : 70 E0                                                       push    r0              ; 12
     818/    8B03 : 00 E5                                                       dec     r5              ;  6
     813/    8B05 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B07 :                                                             ;com    r0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 38 - 11/22/2024 22:53:50


     815/    8B07 :                                                             ;and    r0, r1          ;  
     816/    8B07 : 42 01                                                       or      r0, r1          ;  6
     817/    8B09 : 70 E0                                                       push    r0              ; 12
     818/    8B0B : 00 E5                                                       dec     r5              ;  6
     813/    8B0D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B0F :                                                             ;com    r0
     815/    8B0F :                                                             ;and    r0, r1          ;  
     816/    8B0F : 42 01                                                       or      r0, r1          ;  6
     817/    8B11 : 70 E0                                                       push    r0              ; 12
     818/    8B13 : 00 E5                                                       dec     r5              ;  6
     813/    8B15 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B17 :                                                             ;com    r0
     815/    8B17 :                                                             ;and    r0, r1          ;  
     816/    8B17 : 42 01                                                       or      r0, r1          ;  6
     817/    8B19 : 70 E0                                                       push    r0              ; 12
     818/    8B1B : 00 E5                                                       dec     r5              ;  6
     813/    8B1D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B1F :                                                             ;com    r0
     815/    8B1F :                                                             ;and    r0, r1          ;  
     816/    8B1F : 42 01                                                       or      r0, r1          ;  6
     817/    8B21 : 70 E0                                                       push    r0              ; 12
     818/    8B23 : 00 E5                                                       dec     r5              ;  6
     813/    8B25 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B27 :                                                             ;com    r0
     815/    8B27 :                                                             ;and    r0, r1          ;  
     816/    8B27 : 42 01                                                       or      r0, r1          ;  6
     817/    8B29 : 70 E0                                                       push    r0              ; 12
     818/    8B2B : 00 E5                                                       dec     r5              ;  6
     813/    8B2D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B2F :                                                             ;com    r0
     815/    8B2F :                                                             ;and    r0, r1          ;  
     816/    8B2F : 42 01                                                       or      r0, r1          ;  6
     817/    8B31 : 70 E0                                                       push    r0              ; 12
     818/    8B33 : 00 E5                                                       dec     r5              ;  6
     813/    8B35 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B37 :                                                             ;com    r0
     815/    8B37 :                                                             ;and    r0, r1          ;  
     816/    8B37 : 42 01                                                       or      r0, r1          ;  6
     817/    8B39 : 70 E0                                                       push    r0              ; 12
     818/    8B3B : 00 E5                                                       dec     r5              ;  6
     813/    8B3D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B3F :                                                             ;com    r0
     815/    8B3F :                                                             ;and    r0, r1          ;  
     816/    8B3F : 42 01                                                       or      r0, r1          ;  6
     817/    8B41 : 70 E0                                                       push    r0              ; 12
     818/    8B43 : 00 E5                                                       dec     r5              ;  6
     813/    8B45 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B47 :                                                             ;com    r0
     815/    8B47 :                                                             ;and    r0, r1          ;  
     816/    8B47 : 42 01                                                       or      r0, r1          ;  6
     817/    8B49 : 70 E0                                                       push    r0              ; 12
     818/    8B4B : 00 E5                                                       dec     r5              ;  6
     813/    8B4D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B4F :                                                             ;com    r0
     815/    8B4F :                                                             ;and    r0, r1          ;  
     816/    8B4F : 42 01                                                       or      r0, r1          ;  6
     817/    8B51 : 70 E0                                                       push    r0              ; 12
     818/    8B53 : 00 E5                                                       dec     r5              ;  6
     813/    8B55 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B57 :                                                             ;com    r0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 39 - 11/22/2024 22:53:50


     815/    8B57 :                                                             ;and    r0, r1          ;  
     816/    8B57 : 42 01                                                       or      r0, r1          ;  6
     817/    8B59 : 70 E0                                                       push    r0              ; 12
     818/    8B5B : 00 E5                                                       dec     r5              ;  6
     813/    8B5D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B5F :                                                             ;com    r0
     815/    8B5F :                                                             ;and    r0, r1          ;  
     816/    8B5F : 42 01                                                       or      r0, r1          ;  6
     817/    8B61 : 70 E0                                                       push    r0              ; 12
     818/    8B63 : 00 E5                                                       dec     r5              ;  6
     813/    8B65 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B67 :                                                             ;com    r0
     815/    8B67 :                                                             ;and    r0, r1          ;  
     816/    8B67 : 42 01                                                       or      r0, r1          ;  6
     817/    8B69 : 70 E0                                                       push    r0              ; 12
     818/    8B6B : 00 E5                                                       dec     r5              ;  6
     813/    8B6D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B6F :                                                             ;com    r0
     815/    8B6F :                                                             ;and    r0, r1          ;  
     816/    8B6F : 42 01                                                       or      r0, r1          ;  6
     817/    8B71 : 70 E0                                                       push    r0              ; 12
     818/    8B73 : 00 E5                                                       dec     r5              ;  6
     813/    8B75 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B77 :                                                             ;com    r0
     815/    8B77 :                                                             ;and    r0, r1          ;  
     816/    8B77 : 42 01                                                       or      r0, r1          ;  6
     817/    8B79 : 70 E0                                                       push    r0              ; 12
     818/    8B7B : 00 E5                                                       dec     r5              ;  6
     813/    8B7D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B7F :                                                             ;com    r0
     815/    8B7F :                                                             ;and    r0, r1          ;  
     816/    8B7F : 42 01                                                       or      r0, r1          ;  6
     817/    8B81 : 70 E0                                                       push    r0              ; 12
     818/    8B83 : 00 E5                                                       dec     r5              ;  6
     813/    8B85 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B87 :                                                             ;com    r0
     815/    8B87 :                                                             ;and    r0, r1          ;  
     816/    8B87 : 42 01                                                       or      r0, r1          ;  6
     817/    8B89 : 70 E0                                                       push    r0              ; 12
     818/    8B8B : 00 E5                                                       dec     r5              ;  6
     813/    8B8D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B8F :                                                             ;com    r0
     815/    8B8F :                                                             ;and    r0, r1          ;  
     816/    8B8F : 42 01                                                       or      r0, r1          ;  6
     817/    8B91 : 70 E0                                                       push    r0              ; 12
     818/    8B93 : 00 E5                                                       dec     r5              ;  6
     813/    8B95 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B97 :                                                             ;com    r0
     815/    8B97 :                                                             ;and    r0, r1          ;  
     816/    8B97 : 42 01                                                       or      r0, r1          ;  6
     817/    8B99 : 70 E0                                                       push    r0              ; 12
     818/    8B9B : 00 E5                                                       dec     r5              ;  6
     813/    8B9D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8B9F :                                                             ;com    r0
     815/    8B9F :                                                             ;and    r0, r1          ;  
     816/    8B9F : 42 01                                                       or      r0, r1          ;  6
     817/    8BA1 : 70 E0                                                       push    r0              ; 12
     818/    8BA3 : 00 E5                                                       dec     r5              ;  6
     813/    8BA5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BA7 :                                                             ;com    r0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 40 - 11/22/2024 22:53:50


     815/    8BA7 :                                                             ;and    r0, r1          ;  
     816/    8BA7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BA9 : 70 E0                                                       push    r0              ; 12
     818/    8BAB : 00 E5                                                       dec     r5              ;  6
     813/    8BAD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BAF :                                                             ;com    r0
     815/    8BAF :                                                             ;and    r0, r1          ;  
     816/    8BAF : 42 01                                                       or      r0, r1          ;  6
     817/    8BB1 : 70 E0                                                       push    r0              ; 12
     818/    8BB3 : 00 E5                                                       dec     r5              ;  6
     813/    8BB5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BB7 :                                                             ;com    r0
     815/    8BB7 :                                                             ;and    r0, r1          ;  
     816/    8BB7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BB9 : 70 E0                                                       push    r0              ; 12
     818/    8BBB : 00 E5                                                       dec     r5              ;  6
     813/    8BBD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BBF :                                                             ;com    r0
     815/    8BBF :                                                             ;and    r0, r1          ;  
     816/    8BBF : 42 01                                                       or      r0, r1          ;  6
     817/    8BC1 : 70 E0                                                       push    r0              ; 12
     818/    8BC3 : 00 E5                                                       dec     r5              ;  6
     813/    8BC5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BC7 :                                                             ;com    r0
     815/    8BC7 :                                                             ;and    r0, r1          ;  
     816/    8BC7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BC9 : 70 E0                                                       push    r0              ; 12
     818/    8BCB : 00 E5                                                       dec     r5              ;  6
     813/    8BCD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BCF :                                                             ;com    r0
     815/    8BCF :                                                             ;and    r0, r1          ;  
     816/    8BCF : 42 01                                                       or      r0, r1          ;  6
     817/    8BD1 : 70 E0                                                       push    r0              ; 12
     818/    8BD3 : 00 E5                                                       dec     r5              ;  6
     813/    8BD5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BD7 :                                                             ;com    r0
     815/    8BD7 :                                                             ;and    r0, r1          ;  
     816/    8BD7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BD9 : 70 E0                                                       push    r0              ; 12
     818/    8BDB : 00 E5                                                       dec     r5              ;  6
     813/    8BDD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BDF :                                                             ;com    r0
     815/    8BDF :                                                             ;and    r0, r1          ;  
     816/    8BDF : 42 01                                                       or      r0, r1          ;  6
     817/    8BE1 : 70 E0                                                       push    r0              ; 12
     818/    8BE3 : 00 E5                                                       dec     r5              ;  6
     813/    8BE5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BE7 :                                                             ;com    r0
     815/    8BE7 :                                                             ;and    r0, r1          ;  
     816/    8BE7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BE9 : 70 E0                                                       push    r0              ; 12
     818/    8BEB : 00 E5                                                       dec     r5              ;  6
     813/    8BED : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BEF :                                                             ;com    r0
     815/    8BEF :                                                             ;and    r0, r1          ;  
     816/    8BEF : 42 01                                                       or      r0, r1          ;  6
     817/    8BF1 : 70 E0                                                       push    r0              ; 12
     818/    8BF3 : 00 E5                                                       dec     r5              ;  6
     813/    8BF5 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BF7 :                                                             ;com    r0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 41 - 11/22/2024 22:53:50


     815/    8BF7 :                                                             ;and    r0, r1          ;  
     816/    8BF7 : 42 01                                                       or      r0, r1          ;  6
     817/    8BF9 : 70 E0                                                       push    r0              ; 12
     818/    8BFB : 00 E5                                                       dec     r5              ;  6
     813/    8BFD : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8BFF :                                                             ;com    r0
     815/    8BFF :                                                             ;and    r0, r1          ;  
     816/    8BFF : 42 01                                                       or      r0, r1          ;  6
     817/    8C01 : 70 E0                                                       push    r0              ; 12
     818/    8C03 : 00 E5                                                       dec     r5              ;  6
     813/    8C05 : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8C07 :                                                             ;com    r0
     815/    8C07 :                                                             ;and    r0, r1          ;  
     816/    8C07 : 42 01                                                       or      r0, r1          ;  6
     817/    8C09 : 70 E0                                                       push    r0              ; 12
     818/    8C0B : 00 E5                                                       dec     r5              ;  6
     813/    8C0D : 82 04                                                       lde     r0, @rr4        ; 12
     814/    8C0F :                                                             ;com    r0
     815/    8C0F :                                                             ;and    r0, r1          ;  
     816/    8C0F : 42 01                                                       or      r0, r1          ;  6
     817/    8C11 : 70 E0                                                       push    r0              ; 12
     818/    8C13 : 00 E5                                                       dec     r5              ;  6
     820/    8C15 :                                                                                     ; 36
     821/    8C15 : A0 EC                                               incw    rr12            ; next Farb-Byte
     822/    8C17 : E0 EF                                               rr      r15             ; next Farb-Bank
     823/    8C19 :                     
     824/    8C19 : 69 FE                                               ld      SPH, r6
     825/    8C1B : 79 FF                                               ld      SPL, r7
     826/    8C1D : 48 E6                                               ld      r4, r6
     827/    8C1F : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     828/    8C22 : 58 E7                                               ld      r5, r7
     829/    8C24 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     830/    8C26 :                     
     831/    8C26 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     832/    8C28 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     833/    8C2A :                                                                                     
     834/    8C2A :                                                     rept    40
     835/    8C2A :                                                             lde     r0, @rr4        ; 12
     836/    8C2A :                                                             ;com    r0              ; 
     837/    8C2A :                                                             or      r0, r1          ;  6
     838/    8C2A :                                                             ;and    r0, r1                                  
     839/    8C2A :                                                             push    r0              ; 12
     840/    8C2A :                                                             dec     r5              ;  6
     841/    8C2A :                                                     endm                            ; --
     835/    8C2A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C2C :                                                             ;com    r0              ; 
     837/    8C2C : 42 01                                                       or      r0, r1          ;  6
     838/    8C2E :                                                             ;and    r0, r1                                  
     839/    8C2E : 70 E0                                                       push    r0              ; 12
     840/    8C30 : 00 E5                                                       dec     r5              ;  6
     835/    8C32 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C34 :                                                             ;com    r0              ; 
     837/    8C34 : 42 01                                                       or      r0, r1          ;  6
     838/    8C36 :                                                             ;and    r0, r1                                  
     839/    8C36 : 70 E0                                                       push    r0              ; 12
     840/    8C38 : 00 E5                                                       dec     r5              ;  6
     835/    8C3A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C3C :                                                             ;com    r0              ; 
     837/    8C3C : 42 01                                                       or      r0, r1          ;  6
     838/    8C3E :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 42 - 11/22/2024 22:53:50


     839/    8C3E : 70 E0                                                       push    r0              ; 12
     840/    8C40 : 00 E5                                                       dec     r5              ;  6
     835/    8C42 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C44 :                                                             ;com    r0              ; 
     837/    8C44 : 42 01                                                       or      r0, r1          ;  6
     838/    8C46 :                                                             ;and    r0, r1                                  
     839/    8C46 : 70 E0                                                       push    r0              ; 12
     840/    8C48 : 00 E5                                                       dec     r5              ;  6
     835/    8C4A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C4C :                                                             ;com    r0              ; 
     837/    8C4C : 42 01                                                       or      r0, r1          ;  6
     838/    8C4E :                                                             ;and    r0, r1                                  
     839/    8C4E : 70 E0                                                       push    r0              ; 12
     840/    8C50 : 00 E5                                                       dec     r5              ;  6
     835/    8C52 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C54 :                                                             ;com    r0              ; 
     837/    8C54 : 42 01                                                       or      r0, r1          ;  6
     838/    8C56 :                                                             ;and    r0, r1                                  
     839/    8C56 : 70 E0                                                       push    r0              ; 12
     840/    8C58 : 00 E5                                                       dec     r5              ;  6
     835/    8C5A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C5C :                                                             ;com    r0              ; 
     837/    8C5C : 42 01                                                       or      r0, r1          ;  6
     838/    8C5E :                                                             ;and    r0, r1                                  
     839/    8C5E : 70 E0                                                       push    r0              ; 12
     840/    8C60 : 00 E5                                                       dec     r5              ;  6
     835/    8C62 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C64 :                                                             ;com    r0              ; 
     837/    8C64 : 42 01                                                       or      r0, r1          ;  6
     838/    8C66 :                                                             ;and    r0, r1                                  
     839/    8C66 : 70 E0                                                       push    r0              ; 12
     840/    8C68 : 00 E5                                                       dec     r5              ;  6
     835/    8C6A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C6C :                                                             ;com    r0              ; 
     837/    8C6C : 42 01                                                       or      r0, r1          ;  6
     838/    8C6E :                                                             ;and    r0, r1                                  
     839/    8C6E : 70 E0                                                       push    r0              ; 12
     840/    8C70 : 00 E5                                                       dec     r5              ;  6
     835/    8C72 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C74 :                                                             ;com    r0              ; 
     837/    8C74 : 42 01                                                       or      r0, r1          ;  6
     838/    8C76 :                                                             ;and    r0, r1                                  
     839/    8C76 : 70 E0                                                       push    r0              ; 12
     840/    8C78 : 00 E5                                                       dec     r5              ;  6
     835/    8C7A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C7C :                                                             ;com    r0              ; 
     837/    8C7C : 42 01                                                       or      r0, r1          ;  6
     838/    8C7E :                                                             ;and    r0, r1                                  
     839/    8C7E : 70 E0                                                       push    r0              ; 12
     840/    8C80 : 00 E5                                                       dec     r5              ;  6
     835/    8C82 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C84 :                                                             ;com    r0              ; 
     837/    8C84 : 42 01                                                       or      r0, r1          ;  6
     838/    8C86 :                                                             ;and    r0, r1                                  
     839/    8C86 : 70 E0                                                       push    r0              ; 12
     840/    8C88 : 00 E5                                                       dec     r5              ;  6
     835/    8C8A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C8C :                                                             ;com    r0              ; 
     837/    8C8C : 42 01                                                       or      r0, r1          ;  6
     838/    8C8E :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 43 - 11/22/2024 22:53:50


     839/    8C8E : 70 E0                                                       push    r0              ; 12
     840/    8C90 : 00 E5                                                       dec     r5              ;  6
     835/    8C92 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C94 :                                                             ;com    r0              ; 
     837/    8C94 : 42 01                                                       or      r0, r1          ;  6
     838/    8C96 :                                                             ;and    r0, r1                                  
     839/    8C96 : 70 E0                                                       push    r0              ; 12
     840/    8C98 : 00 E5                                                       dec     r5              ;  6
     835/    8C9A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8C9C :                                                             ;com    r0              ; 
     837/    8C9C : 42 01                                                       or      r0, r1          ;  6
     838/    8C9E :                                                             ;and    r0, r1                                  
     839/    8C9E : 70 E0                                                       push    r0              ; 12
     840/    8CA0 : 00 E5                                                       dec     r5              ;  6
     835/    8CA2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CA4 :                                                             ;com    r0              ; 
     837/    8CA4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CA6 :                                                             ;and    r0, r1                                  
     839/    8CA6 : 70 E0                                                       push    r0              ; 12
     840/    8CA8 : 00 E5                                                       dec     r5              ;  6
     835/    8CAA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CAC :                                                             ;com    r0              ; 
     837/    8CAC : 42 01                                                       or      r0, r1          ;  6
     838/    8CAE :                                                             ;and    r0, r1                                  
     839/    8CAE : 70 E0                                                       push    r0              ; 12
     840/    8CB0 : 00 E5                                                       dec     r5              ;  6
     835/    8CB2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CB4 :                                                             ;com    r0              ; 
     837/    8CB4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CB6 :                                                             ;and    r0, r1                                  
     839/    8CB6 : 70 E0                                                       push    r0              ; 12
     840/    8CB8 : 00 E5                                                       dec     r5              ;  6
     835/    8CBA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CBC :                                                             ;com    r0              ; 
     837/    8CBC : 42 01                                                       or      r0, r1          ;  6
     838/    8CBE :                                                             ;and    r0, r1                                  
     839/    8CBE : 70 E0                                                       push    r0              ; 12
     840/    8CC0 : 00 E5                                                       dec     r5              ;  6
     835/    8CC2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CC4 :                                                             ;com    r0              ; 
     837/    8CC4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CC6 :                                                             ;and    r0, r1                                  
     839/    8CC6 : 70 E0                                                       push    r0              ; 12
     840/    8CC8 : 00 E5                                                       dec     r5              ;  6
     835/    8CCA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CCC :                                                             ;com    r0              ; 
     837/    8CCC : 42 01                                                       or      r0, r1          ;  6
     838/    8CCE :                                                             ;and    r0, r1                                  
     839/    8CCE : 70 E0                                                       push    r0              ; 12
     840/    8CD0 : 00 E5                                                       dec     r5              ;  6
     835/    8CD2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CD4 :                                                             ;com    r0              ; 
     837/    8CD4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CD6 :                                                             ;and    r0, r1                                  
     839/    8CD6 : 70 E0                                                       push    r0              ; 12
     840/    8CD8 : 00 E5                                                       dec     r5              ;  6
     835/    8CDA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CDC :                                                             ;com    r0              ; 
     837/    8CDC : 42 01                                                       or      r0, r1          ;  6
     838/    8CDE :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 44 - 11/22/2024 22:53:50


     839/    8CDE : 70 E0                                                       push    r0              ; 12
     840/    8CE0 : 00 E5                                                       dec     r5              ;  6
     835/    8CE2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CE4 :                                                             ;com    r0              ; 
     837/    8CE4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CE6 :                                                             ;and    r0, r1                                  
     839/    8CE6 : 70 E0                                                       push    r0              ; 12
     840/    8CE8 : 00 E5                                                       dec     r5              ;  6
     835/    8CEA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CEC :                                                             ;com    r0              ; 
     837/    8CEC : 42 01                                                       or      r0, r1          ;  6
     838/    8CEE :                                                             ;and    r0, r1                                  
     839/    8CEE : 70 E0                                                       push    r0              ; 12
     840/    8CF0 : 00 E5                                                       dec     r5              ;  6
     835/    8CF2 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CF4 :                                                             ;com    r0              ; 
     837/    8CF4 : 42 01                                                       or      r0, r1          ;  6
     838/    8CF6 :                                                             ;and    r0, r1                                  
     839/    8CF6 : 70 E0                                                       push    r0              ; 12
     840/    8CF8 : 00 E5                                                       dec     r5              ;  6
     835/    8CFA : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8CFC :                                                             ;com    r0              ; 
     837/    8CFC : 42 01                                                       or      r0, r1          ;  6
     838/    8CFE :                                                             ;and    r0, r1                                  
     839/    8CFE : 70 E0                                                       push    r0              ; 12
     840/    8D00 : 00 E5                                                       dec     r5              ;  6
     835/    8D02 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D04 :                                                             ;com    r0              ; 
     837/    8D04 : 42 01                                                       or      r0, r1          ;  6
     838/    8D06 :                                                             ;and    r0, r1                                  
     839/    8D06 : 70 E0                                                       push    r0              ; 12
     840/    8D08 : 00 E5                                                       dec     r5              ;  6
     835/    8D0A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D0C :                                                             ;com    r0              ; 
     837/    8D0C : 42 01                                                       or      r0, r1          ;  6
     838/    8D0E :                                                             ;and    r0, r1                                  
     839/    8D0E : 70 E0                                                       push    r0              ; 12
     840/    8D10 : 00 E5                                                       dec     r5              ;  6
     835/    8D12 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D14 :                                                             ;com    r0              ; 
     837/    8D14 : 42 01                                                       or      r0, r1          ;  6
     838/    8D16 :                                                             ;and    r0, r1                                  
     839/    8D16 : 70 E0                                                       push    r0              ; 12
     840/    8D18 : 00 E5                                                       dec     r5              ;  6
     835/    8D1A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D1C :                                                             ;com    r0              ; 
     837/    8D1C : 42 01                                                       or      r0, r1          ;  6
     838/    8D1E :                                                             ;and    r0, r1                                  
     839/    8D1E : 70 E0                                                       push    r0              ; 12
     840/    8D20 : 00 E5                                                       dec     r5              ;  6
     835/    8D22 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D24 :                                                             ;com    r0              ; 
     837/    8D24 : 42 01                                                       or      r0, r1          ;  6
     838/    8D26 :                                                             ;and    r0, r1                                  
     839/    8D26 : 70 E0                                                       push    r0              ; 12
     840/    8D28 : 00 E5                                                       dec     r5              ;  6
     835/    8D2A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D2C :                                                             ;com    r0              ; 
     837/    8D2C : 42 01                                                       or      r0, r1          ;  6
     838/    8D2E :                                                             ;and    r0, r1                                  
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 45 - 11/22/2024 22:53:50


     839/    8D2E : 70 E0                                                       push    r0              ; 12
     840/    8D30 : 00 E5                                                       dec     r5              ;  6
     835/    8D32 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D34 :                                                             ;com    r0              ; 
     837/    8D34 : 42 01                                                       or      r0, r1          ;  6
     838/    8D36 :                                                             ;and    r0, r1                                  
     839/    8D36 : 70 E0                                                       push    r0              ; 12
     840/    8D38 : 00 E5                                                       dec     r5              ;  6
     835/    8D3A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D3C :                                                             ;com    r0              ; 
     837/    8D3C : 42 01                                                       or      r0, r1          ;  6
     838/    8D3E :                                                             ;and    r0, r1                                  
     839/    8D3E : 70 E0                                                       push    r0              ; 12
     840/    8D40 : 00 E5                                                       dec     r5              ;  6
     835/    8D42 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D44 :                                                             ;com    r0              ; 
     837/    8D44 : 42 01                                                       or      r0, r1          ;  6
     838/    8D46 :                                                             ;and    r0, r1                                  
     839/    8D46 : 70 E0                                                       push    r0              ; 12
     840/    8D48 : 00 E5                                                       dec     r5              ;  6
     835/    8D4A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D4C :                                                             ;com    r0              ; 
     837/    8D4C : 42 01                                                       or      r0, r1          ;  6
     838/    8D4E :                                                             ;and    r0, r1                                  
     839/    8D4E : 70 E0                                                       push    r0              ; 12
     840/    8D50 : 00 E5                                                       dec     r5              ;  6
     835/    8D52 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D54 :                                                             ;com    r0              ; 
     837/    8D54 : 42 01                                                       or      r0, r1          ;  6
     838/    8D56 :                                                             ;and    r0, r1                                  
     839/    8D56 : 70 E0                                                       push    r0              ; 12
     840/    8D58 : 00 E5                                                       dec     r5              ;  6
     835/    8D5A : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D5C :                                                             ;com    r0              ; 
     837/    8D5C : 42 01                                                       or      r0, r1          ;  6
     838/    8D5E :                                                             ;and    r0, r1                                  
     839/    8D5E : 70 E0                                                       push    r0              ; 12
     840/    8D60 : 00 E5                                                       dec     r5              ;  6
     835/    8D62 : 82 04                                                       lde     r0, @rr4        ; 12
     836/    8D64 :                                                             ;com    r0              ; 
     837/    8D64 : 42 01                                                       or      r0, r1          ;  6
     838/    8D66 :                                                             ;and    r0, r1                                  
     839/    8D66 : 70 E0                                                       push    r0              ; 12
     840/    8D68 : 00 E5                                                       dec     r5              ;  6
     842/    8D6A :                                                                                     ; 36
     843/    8D6A : A0 EC                                               incw    rr12            ; next Farb-Byte
     844/    8D6C : E0 EF                                               rr      r15             ; next Farb-Bank
     845/    8D6E :                     
     846/    8D6E : 69 FE                                               ld      SPH, r6
     847/    8D70 : 79 FF                                               ld      SPL, r7
     848/    8D72 : 48 E6                                               ld      r4, r6
     849/    8D74 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     850/    8D77 : 58 E7                                               ld      r5, r7
     851/    8D79 : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     852/    8D7B :                     
     853/    8D7B : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     854/    8D7D : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     855/    8D7F :                                                                             ;
     856/    8D7F :                                                     rept    40
     857/    8D7F :                                                             lde     r0, @rr4        ; 12
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 46 - 11/22/2024 22:53:50


     858/    8D7F :                                                             ;com    r0
     859/    8D7F :                                                             ;and    r0, r1          
     860/    8D7F :                                                             or      r0, r1          ;  6
     861/    8D7F :                                                             push    r0              ; 12
     862/    8D7F :                                                             dec     r5              ;  6
     863/    8D7F :                                                     endm                            ; --
     857/    8D7F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8D81 :                                                             ;com    r0
     859/    8D81 :                                                             ;and    r0, r1          
     860/    8D81 : 42 01                                                       or      r0, r1          ;  6
     861/    8D83 : 70 E0                                                       push    r0              ; 12
     862/    8D85 : 00 E5                                                       dec     r5              ;  6
     857/    8D87 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8D89 :                                                             ;com    r0
     859/    8D89 :                                                             ;and    r0, r1          
     860/    8D89 : 42 01                                                       or      r0, r1          ;  6
     861/    8D8B : 70 E0                                                       push    r0              ; 12
     862/    8D8D : 00 E5                                                       dec     r5              ;  6
     857/    8D8F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8D91 :                                                             ;com    r0
     859/    8D91 :                                                             ;and    r0, r1          
     860/    8D91 : 42 01                                                       or      r0, r1          ;  6
     861/    8D93 : 70 E0                                                       push    r0              ; 12
     862/    8D95 : 00 E5                                                       dec     r5              ;  6
     857/    8D97 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8D99 :                                                             ;com    r0
     859/    8D99 :                                                             ;and    r0, r1          
     860/    8D99 : 42 01                                                       or      r0, r1          ;  6
     861/    8D9B : 70 E0                                                       push    r0              ; 12
     862/    8D9D : 00 E5                                                       dec     r5              ;  6
     857/    8D9F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DA1 :                                                             ;com    r0
     859/    8DA1 :                                                             ;and    r0, r1          
     860/    8DA1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DA3 : 70 E0                                                       push    r0              ; 12
     862/    8DA5 : 00 E5                                                       dec     r5              ;  6
     857/    8DA7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DA9 :                                                             ;com    r0
     859/    8DA9 :                                                             ;and    r0, r1          
     860/    8DA9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DAB : 70 E0                                                       push    r0              ; 12
     862/    8DAD : 00 E5                                                       dec     r5              ;  6
     857/    8DAF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DB1 :                                                             ;com    r0
     859/    8DB1 :                                                             ;and    r0, r1          
     860/    8DB1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DB3 : 70 E0                                                       push    r0              ; 12
     862/    8DB5 : 00 E5                                                       dec     r5              ;  6
     857/    8DB7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DB9 :                                                             ;com    r0
     859/    8DB9 :                                                             ;and    r0, r1          
     860/    8DB9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DBB : 70 E0                                                       push    r0              ; 12
     862/    8DBD : 00 E5                                                       dec     r5              ;  6
     857/    8DBF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DC1 :                                                             ;com    r0
     859/    8DC1 :                                                             ;and    r0, r1          
     860/    8DC1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DC3 : 70 E0                                                       push    r0              ; 12
     862/    8DC5 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 47 - 11/22/2024 22:53:50


     857/    8DC7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DC9 :                                                             ;com    r0
     859/    8DC9 :                                                             ;and    r0, r1          
     860/    8DC9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DCB : 70 E0                                                       push    r0              ; 12
     862/    8DCD : 00 E5                                                       dec     r5              ;  6
     857/    8DCF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DD1 :                                                             ;com    r0
     859/    8DD1 :                                                             ;and    r0, r1          
     860/    8DD1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DD3 : 70 E0                                                       push    r0              ; 12
     862/    8DD5 : 00 E5                                                       dec     r5              ;  6
     857/    8DD7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DD9 :                                                             ;com    r0
     859/    8DD9 :                                                             ;and    r0, r1          
     860/    8DD9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DDB : 70 E0                                                       push    r0              ; 12
     862/    8DDD : 00 E5                                                       dec     r5              ;  6
     857/    8DDF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DE1 :                                                             ;com    r0
     859/    8DE1 :                                                             ;and    r0, r1          
     860/    8DE1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DE3 : 70 E0                                                       push    r0              ; 12
     862/    8DE5 : 00 E5                                                       dec     r5              ;  6
     857/    8DE7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DE9 :                                                             ;com    r0
     859/    8DE9 :                                                             ;and    r0, r1          
     860/    8DE9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DEB : 70 E0                                                       push    r0              ; 12
     862/    8DED : 00 E5                                                       dec     r5              ;  6
     857/    8DEF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DF1 :                                                             ;com    r0
     859/    8DF1 :                                                             ;and    r0, r1          
     860/    8DF1 : 42 01                                                       or      r0, r1          ;  6
     861/    8DF3 : 70 E0                                                       push    r0              ; 12
     862/    8DF5 : 00 E5                                                       dec     r5              ;  6
     857/    8DF7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8DF9 :                                                             ;com    r0
     859/    8DF9 :                                                             ;and    r0, r1          
     860/    8DF9 : 42 01                                                       or      r0, r1          ;  6
     861/    8DFB : 70 E0                                                       push    r0              ; 12
     862/    8DFD : 00 E5                                                       dec     r5              ;  6
     857/    8DFF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E01 :                                                             ;com    r0
     859/    8E01 :                                                             ;and    r0, r1          
     860/    8E01 : 42 01                                                       or      r0, r1          ;  6
     861/    8E03 : 70 E0                                                       push    r0              ; 12
     862/    8E05 : 00 E5                                                       dec     r5              ;  6
     857/    8E07 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E09 :                                                             ;com    r0
     859/    8E09 :                                                             ;and    r0, r1          
     860/    8E09 : 42 01                                                       or      r0, r1          ;  6
     861/    8E0B : 70 E0                                                       push    r0              ; 12
     862/    8E0D : 00 E5                                                       dec     r5              ;  6
     857/    8E0F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E11 :                                                             ;com    r0
     859/    8E11 :                                                             ;and    r0, r1          
     860/    8E11 : 42 01                                                       or      r0, r1          ;  6
     861/    8E13 : 70 E0                                                       push    r0              ; 12
     862/    8E15 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 48 - 11/22/2024 22:53:50


     857/    8E17 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E19 :                                                             ;com    r0
     859/    8E19 :                                                             ;and    r0, r1          
     860/    8E19 : 42 01                                                       or      r0, r1          ;  6
     861/    8E1B : 70 E0                                                       push    r0              ; 12
     862/    8E1D : 00 E5                                                       dec     r5              ;  6
     857/    8E1F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E21 :                                                             ;com    r0
     859/    8E21 :                                                             ;and    r0, r1          
     860/    8E21 : 42 01                                                       or      r0, r1          ;  6
     861/    8E23 : 70 E0                                                       push    r0              ; 12
     862/    8E25 : 00 E5                                                       dec     r5              ;  6
     857/    8E27 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E29 :                                                             ;com    r0
     859/    8E29 :                                                             ;and    r0, r1          
     860/    8E29 : 42 01                                                       or      r0, r1          ;  6
     861/    8E2B : 70 E0                                                       push    r0              ; 12
     862/    8E2D : 00 E5                                                       dec     r5              ;  6
     857/    8E2F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E31 :                                                             ;com    r0
     859/    8E31 :                                                             ;and    r0, r1          
     860/    8E31 : 42 01                                                       or      r0, r1          ;  6
     861/    8E33 : 70 E0                                                       push    r0              ; 12
     862/    8E35 : 00 E5                                                       dec     r5              ;  6
     857/    8E37 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E39 :                                                             ;com    r0
     859/    8E39 :                                                             ;and    r0, r1          
     860/    8E39 : 42 01                                                       or      r0, r1          ;  6
     861/    8E3B : 70 E0                                                       push    r0              ; 12
     862/    8E3D : 00 E5                                                       dec     r5              ;  6
     857/    8E3F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E41 :                                                             ;com    r0
     859/    8E41 :                                                             ;and    r0, r1          
     860/    8E41 : 42 01                                                       or      r0, r1          ;  6
     861/    8E43 : 70 E0                                                       push    r0              ; 12
     862/    8E45 : 00 E5                                                       dec     r5              ;  6
     857/    8E47 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E49 :                                                             ;com    r0
     859/    8E49 :                                                             ;and    r0, r1          
     860/    8E49 : 42 01                                                       or      r0, r1          ;  6
     861/    8E4B : 70 E0                                                       push    r0              ; 12
     862/    8E4D : 00 E5                                                       dec     r5              ;  6
     857/    8E4F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E51 :                                                             ;com    r0
     859/    8E51 :                                                             ;and    r0, r1          
     860/    8E51 : 42 01                                                       or      r0, r1          ;  6
     861/    8E53 : 70 E0                                                       push    r0              ; 12
     862/    8E55 : 00 E5                                                       dec     r5              ;  6
     857/    8E57 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E59 :                                                             ;com    r0
     859/    8E59 :                                                             ;and    r0, r1          
     860/    8E59 : 42 01                                                       or      r0, r1          ;  6
     861/    8E5B : 70 E0                                                       push    r0              ; 12
     862/    8E5D : 00 E5                                                       dec     r5              ;  6
     857/    8E5F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E61 :                                                             ;com    r0
     859/    8E61 :                                                             ;and    r0, r1          
     860/    8E61 : 42 01                                                       or      r0, r1          ;  6
     861/    8E63 : 70 E0                                                       push    r0              ; 12
     862/    8E65 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 49 - 11/22/2024 22:53:50


     857/    8E67 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E69 :                                                             ;com    r0
     859/    8E69 :                                                             ;and    r0, r1          
     860/    8E69 : 42 01                                                       or      r0, r1          ;  6
     861/    8E6B : 70 E0                                                       push    r0              ; 12
     862/    8E6D : 00 E5                                                       dec     r5              ;  6
     857/    8E6F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E71 :                                                             ;com    r0
     859/    8E71 :                                                             ;and    r0, r1          
     860/    8E71 : 42 01                                                       or      r0, r1          ;  6
     861/    8E73 : 70 E0                                                       push    r0              ; 12
     862/    8E75 : 00 E5                                                       dec     r5              ;  6
     857/    8E77 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E79 :                                                             ;com    r0
     859/    8E79 :                                                             ;and    r0, r1          
     860/    8E79 : 42 01                                                       or      r0, r1          ;  6
     861/    8E7B : 70 E0                                                       push    r0              ; 12
     862/    8E7D : 00 E5                                                       dec     r5              ;  6
     857/    8E7F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E81 :                                                             ;com    r0
     859/    8E81 :                                                             ;and    r0, r1          
     860/    8E81 : 42 01                                                       or      r0, r1          ;  6
     861/    8E83 : 70 E0                                                       push    r0              ; 12
     862/    8E85 : 00 E5                                                       dec     r5              ;  6
     857/    8E87 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E89 :                                                             ;com    r0
     859/    8E89 :                                                             ;and    r0, r1          
     860/    8E89 : 42 01                                                       or      r0, r1          ;  6
     861/    8E8B : 70 E0                                                       push    r0              ; 12
     862/    8E8D : 00 E5                                                       dec     r5              ;  6
     857/    8E8F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E91 :                                                             ;com    r0
     859/    8E91 :                                                             ;and    r0, r1          
     860/    8E91 : 42 01                                                       or      r0, r1          ;  6
     861/    8E93 : 70 E0                                                       push    r0              ; 12
     862/    8E95 : 00 E5                                                       dec     r5              ;  6
     857/    8E97 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8E99 :                                                             ;com    r0
     859/    8E99 :                                                             ;and    r0, r1          
     860/    8E99 : 42 01                                                       or      r0, r1          ;  6
     861/    8E9B : 70 E0                                                       push    r0              ; 12
     862/    8E9D : 00 E5                                                       dec     r5              ;  6
     857/    8E9F : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8EA1 :                                                             ;com    r0
     859/    8EA1 :                                                             ;and    r0, r1          
     860/    8EA1 : 42 01                                                       or      r0, r1          ;  6
     861/    8EA3 : 70 E0                                                       push    r0              ; 12
     862/    8EA5 : 00 E5                                                       dec     r5              ;  6
     857/    8EA7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8EA9 :                                                             ;com    r0
     859/    8EA9 :                                                             ;and    r0, r1          
     860/    8EA9 : 42 01                                                       or      r0, r1          ;  6
     861/    8EAB : 70 E0                                                       push    r0              ; 12
     862/    8EAD : 00 E5                                                       dec     r5              ;  6
     857/    8EAF : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8EB1 :                                                             ;com    r0
     859/    8EB1 :                                                             ;and    r0, r1          
     860/    8EB1 : 42 01                                                       or      r0, r1          ;  6
     861/    8EB3 : 70 E0                                                       push    r0              ; 12
     862/    8EB5 : 00 E5                                                       dec     r5              ;  6
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 50 - 11/22/2024 22:53:50


     857/    8EB7 : 82 04                                                       lde     r0, @rr4        ; 12
     858/    8EB9 :                                                             ;com    r0
     859/    8EB9 :                                                             ;and    r0, r1          
     860/    8EB9 : 42 01                                                       or      r0, r1          ;  6
     861/    8EBB : 70 E0                                                       push    r0              ; 12
     862/    8EBD : 00 E5                                                       dec     r5              ;  6
     864/    8EBF :                                                                                     ; 36
     865/    8EBF : A0 EC                                               incw    rr12            ; next Farb-Byte
     866/    8EC1 : E0 EF                                               rr      r15             ; next Farb-Bank
     867/    8EC3 :                     
     868/    8EC3 : 69 FE                                               ld      SPH, r6
     869/    8EC5 : 79 FF                                               ld      SPL, r7
     870/    8EC7 : 48 E6                                               ld      r4, r6
     871/    8EC9 : 06 E4 80                                            add     r4, #80h        ; 40 + 80 = C0
     872/    8ECC : 58 E7                                               ld      r5, r7
     873/    8ECE : 00 E5                                               dec     r5              ; Korrektur PUSH -> SP=SP-1
     874/    8ED0 :                     
     875/    8ED0 : 92 FE                                               lde     @rr14, r15      ; Farb-Bank einschalten
     876/    8ED2 : 82 1C                                               lde     r1, @rr12       ; Farb-Byte holen
     877/    8ED4 :                                                                                     ;       wenig   oft
     878/    8ED4 :                                                     rept    40
     879/    8ED4 :                                                             lde     r0, @rr4        ; 12
     880/    8ED4 :                                                             ;com    r0              ;    
     881/    8ED4 :                                                             or      r0, r1          ;  6
     882/    8ED4 :                                                             ;and    r0, r1
     883/    8ED4 :                                                             push    r0              ; 12
     884/    8ED4 :                                                             dec     r5              ;  6
     885/    8ED4 :                                                     endm                            ; --
     879/    8ED4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8ED6 :                                                             ;com    r0              ;    
     881/    8ED6 : 42 01                                                       or      r0, r1          ;  6
     882/    8ED8 :                                                             ;and    r0, r1
     883/    8ED8 : 70 E0                                                       push    r0              ; 12
     884/    8EDA : 00 E5                                                       dec     r5              ;  6
     879/    8EDC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8EDE :                                                             ;com    r0              ;    
     881/    8EDE : 42 01                                                       or      r0, r1          ;  6
     882/    8EE0 :                                                             ;and    r0, r1
     883/    8EE0 : 70 E0                                                       push    r0              ; 12
     884/    8EE2 : 00 E5                                                       dec     r5              ;  6
     879/    8EE4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8EE6 :                                                             ;com    r0              ;    
     881/    8EE6 : 42 01                                                       or      r0, r1          ;  6
     882/    8EE8 :                                                             ;and    r0, r1
     883/    8EE8 : 70 E0                                                       push    r0              ; 12
     884/    8EEA : 00 E5                                                       dec     r5              ;  6
     879/    8EEC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8EEE :                                                             ;com    r0              ;    
     881/    8EEE : 42 01                                                       or      r0, r1          ;  6
     882/    8EF0 :                                                             ;and    r0, r1
     883/    8EF0 : 70 E0                                                       push    r0              ; 12
     884/    8EF2 : 00 E5                                                       dec     r5              ;  6
     879/    8EF4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8EF6 :                                                             ;com    r0              ;    
     881/    8EF6 : 42 01                                                       or      r0, r1          ;  6
     882/    8EF8 :                                                             ;and    r0, r1
     883/    8EF8 : 70 E0                                                       push    r0              ; 12
     884/    8EFA : 00 E5                                                       dec     r5              ;  6
     879/    8EFC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8EFE :                                                             ;com    r0              ;    
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 51 - 11/22/2024 22:53:50


     881/    8EFE : 42 01                                                       or      r0, r1          ;  6
     882/    8F00 :                                                             ;and    r0, r1
     883/    8F00 : 70 E0                                                       push    r0              ; 12
     884/    8F02 : 00 E5                                                       dec     r5              ;  6
     879/    8F04 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F06 :                                                             ;com    r0              ;    
     881/    8F06 : 42 01                                                       or      r0, r1          ;  6
     882/    8F08 :                                                             ;and    r0, r1
     883/    8F08 : 70 E0                                                       push    r0              ; 12
     884/    8F0A : 00 E5                                                       dec     r5              ;  6
     879/    8F0C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F0E :                                                             ;com    r0              ;    
     881/    8F0E : 42 01                                                       or      r0, r1          ;  6
     882/    8F10 :                                                             ;and    r0, r1
     883/    8F10 : 70 E0                                                       push    r0              ; 12
     884/    8F12 : 00 E5                                                       dec     r5              ;  6
     879/    8F14 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F16 :                                                             ;com    r0              ;    
     881/    8F16 : 42 01                                                       or      r0, r1          ;  6
     882/    8F18 :                                                             ;and    r0, r1
     883/    8F18 : 70 E0                                                       push    r0              ; 12
     884/    8F1A : 00 E5                                                       dec     r5              ;  6
     879/    8F1C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F1E :                                                             ;com    r0              ;    
     881/    8F1E : 42 01                                                       or      r0, r1          ;  6
     882/    8F20 :                                                             ;and    r0, r1
     883/    8F20 : 70 E0                                                       push    r0              ; 12
     884/    8F22 : 00 E5                                                       dec     r5              ;  6
     879/    8F24 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F26 :                                                             ;com    r0              ;    
     881/    8F26 : 42 01                                                       or      r0, r1          ;  6
     882/    8F28 :                                                             ;and    r0, r1
     883/    8F28 : 70 E0                                                       push    r0              ; 12
     884/    8F2A : 00 E5                                                       dec     r5              ;  6
     879/    8F2C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F2E :                                                             ;com    r0              ;    
     881/    8F2E : 42 01                                                       or      r0, r1          ;  6
     882/    8F30 :                                                             ;and    r0, r1
     883/    8F30 : 70 E0                                                       push    r0              ; 12
     884/    8F32 : 00 E5                                                       dec     r5              ;  6
     879/    8F34 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F36 :                                                             ;com    r0              ;    
     881/    8F36 : 42 01                                                       or      r0, r1          ;  6
     882/    8F38 :                                                             ;and    r0, r1
     883/    8F38 : 70 E0                                                       push    r0              ; 12
     884/    8F3A : 00 E5                                                       dec     r5              ;  6
     879/    8F3C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F3E :                                                             ;com    r0              ;    
     881/    8F3E : 42 01                                                       or      r0, r1          ;  6
     882/    8F40 :                                                             ;and    r0, r1
     883/    8F40 : 70 E0                                                       push    r0              ; 12
     884/    8F42 : 00 E5                                                       dec     r5              ;  6
     879/    8F44 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F46 :                                                             ;com    r0              ;    
     881/    8F46 : 42 01                                                       or      r0, r1          ;  6
     882/    8F48 :                                                             ;and    r0, r1
     883/    8F48 : 70 E0                                                       push    r0              ; 12
     884/    8F4A : 00 E5                                                       dec     r5              ;  6
     879/    8F4C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F4E :                                                             ;com    r0              ;    
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 52 - 11/22/2024 22:53:50


     881/    8F4E : 42 01                                                       or      r0, r1          ;  6
     882/    8F50 :                                                             ;and    r0, r1
     883/    8F50 : 70 E0                                                       push    r0              ; 12
     884/    8F52 : 00 E5                                                       dec     r5              ;  6
     879/    8F54 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F56 :                                                             ;com    r0              ;    
     881/    8F56 : 42 01                                                       or      r0, r1          ;  6
     882/    8F58 :                                                             ;and    r0, r1
     883/    8F58 : 70 E0                                                       push    r0              ; 12
     884/    8F5A : 00 E5                                                       dec     r5              ;  6
     879/    8F5C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F5E :                                                             ;com    r0              ;    
     881/    8F5E : 42 01                                                       or      r0, r1          ;  6
     882/    8F60 :                                                             ;and    r0, r1
     883/    8F60 : 70 E0                                                       push    r0              ; 12
     884/    8F62 : 00 E5                                                       dec     r5              ;  6
     879/    8F64 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F66 :                                                             ;com    r0              ;    
     881/    8F66 : 42 01                                                       or      r0, r1          ;  6
     882/    8F68 :                                                             ;and    r0, r1
     883/    8F68 : 70 E0                                                       push    r0              ; 12
     884/    8F6A : 00 E5                                                       dec     r5              ;  6
     879/    8F6C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F6E :                                                             ;com    r0              ;    
     881/    8F6E : 42 01                                                       or      r0, r1          ;  6
     882/    8F70 :                                                             ;and    r0, r1
     883/    8F70 : 70 E0                                                       push    r0              ; 12
     884/    8F72 : 00 E5                                                       dec     r5              ;  6
     879/    8F74 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F76 :                                                             ;com    r0              ;    
     881/    8F76 : 42 01                                                       or      r0, r1          ;  6
     882/    8F78 :                                                             ;and    r0, r1
     883/    8F78 : 70 E0                                                       push    r0              ; 12
     884/    8F7A : 00 E5                                                       dec     r5              ;  6
     879/    8F7C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F7E :                                                             ;com    r0              ;    
     881/    8F7E : 42 01                                                       or      r0, r1          ;  6
     882/    8F80 :                                                             ;and    r0, r1
     883/    8F80 : 70 E0                                                       push    r0              ; 12
     884/    8F82 : 00 E5                                                       dec     r5              ;  6
     879/    8F84 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F86 :                                                             ;com    r0              ;    
     881/    8F86 : 42 01                                                       or      r0, r1          ;  6
     882/    8F88 :                                                             ;and    r0, r1
     883/    8F88 : 70 E0                                                       push    r0              ; 12
     884/    8F8A : 00 E5                                                       dec     r5              ;  6
     879/    8F8C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F8E :                                                             ;com    r0              ;    
     881/    8F8E : 42 01                                                       or      r0, r1          ;  6
     882/    8F90 :                                                             ;and    r0, r1
     883/    8F90 : 70 E0                                                       push    r0              ; 12
     884/    8F92 : 00 E5                                                       dec     r5              ;  6
     879/    8F94 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F96 :                                                             ;com    r0              ;    
     881/    8F96 : 42 01                                                       or      r0, r1          ;  6
     882/    8F98 :                                                             ;and    r0, r1
     883/    8F98 : 70 E0                                                       push    r0              ; 12
     884/    8F9A : 00 E5                                                       dec     r5              ;  6
     879/    8F9C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8F9E :                                                             ;com    r0              ;    
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 53 - 11/22/2024 22:53:50


     881/    8F9E : 42 01                                                       or      r0, r1          ;  6
     882/    8FA0 :                                                             ;and    r0, r1
     883/    8FA0 : 70 E0                                                       push    r0              ; 12
     884/    8FA2 : 00 E5                                                       dec     r5              ;  6
     879/    8FA4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FA6 :                                                             ;com    r0              ;    
     881/    8FA6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FA8 :                                                             ;and    r0, r1
     883/    8FA8 : 70 E0                                                       push    r0              ; 12
     884/    8FAA : 00 E5                                                       dec     r5              ;  6
     879/    8FAC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FAE :                                                             ;com    r0              ;    
     881/    8FAE : 42 01                                                       or      r0, r1          ;  6
     882/    8FB0 :                                                             ;and    r0, r1
     883/    8FB0 : 70 E0                                                       push    r0              ; 12
     884/    8FB2 : 00 E5                                                       dec     r5              ;  6
     879/    8FB4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FB6 :                                                             ;com    r0              ;    
     881/    8FB6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FB8 :                                                             ;and    r0, r1
     883/    8FB8 : 70 E0                                                       push    r0              ; 12
     884/    8FBA : 00 E5                                                       dec     r5              ;  6
     879/    8FBC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FBE :                                                             ;com    r0              ;    
     881/    8FBE : 42 01                                                       or      r0, r1          ;  6
     882/    8FC0 :                                                             ;and    r0, r1
     883/    8FC0 : 70 E0                                                       push    r0              ; 12
     884/    8FC2 : 00 E5                                                       dec     r5              ;  6
     879/    8FC4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FC6 :                                                             ;com    r0              ;    
     881/    8FC6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FC8 :                                                             ;and    r0, r1
     883/    8FC8 : 70 E0                                                       push    r0              ; 12
     884/    8FCA : 00 E5                                                       dec     r5              ;  6
     879/    8FCC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FCE :                                                             ;com    r0              ;    
     881/    8FCE : 42 01                                                       or      r0, r1          ;  6
     882/    8FD0 :                                                             ;and    r0, r1
     883/    8FD0 : 70 E0                                                       push    r0              ; 12
     884/    8FD2 : 00 E5                                                       dec     r5              ;  6
     879/    8FD4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FD6 :                                                             ;com    r0              ;    
     881/    8FD6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FD8 :                                                             ;and    r0, r1
     883/    8FD8 : 70 E0                                                       push    r0              ; 12
     884/    8FDA : 00 E5                                                       dec     r5              ;  6
     879/    8FDC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FDE :                                                             ;com    r0              ;    
     881/    8FDE : 42 01                                                       or      r0, r1          ;  6
     882/    8FE0 :                                                             ;and    r0, r1
     883/    8FE0 : 70 E0                                                       push    r0              ; 12
     884/    8FE2 : 00 E5                                                       dec     r5              ;  6
     879/    8FE4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FE6 :                                                             ;com    r0              ;    
     881/    8FE6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FE8 :                                                             ;and    r0, r1
     883/    8FE8 : 70 E0                                                       push    r0              ; 12
     884/    8FEA : 00 E5                                                       dec     r5              ;  6
     879/    8FEC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FEE :                                                             ;com    r0              ;    
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 54 - 11/22/2024 22:53:50


     881/    8FEE : 42 01                                                       or      r0, r1          ;  6
     882/    8FF0 :                                                             ;and    r0, r1
     883/    8FF0 : 70 E0                                                       push    r0              ; 12
     884/    8FF2 : 00 E5                                                       dec     r5              ;  6
     879/    8FF4 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FF6 :                                                             ;com    r0              ;    
     881/    8FF6 : 42 01                                                       or      r0, r1          ;  6
     882/    8FF8 :                                                             ;and    r0, r1
     883/    8FF8 : 70 E0                                                       push    r0              ; 12
     884/    8FFA : 00 E5                                                       dec     r5              ;  6
     879/    8FFC : 82 04                                                       lde     r0, @rr4        ; 12
     880/    8FFE :                                                             ;com    r0              ;    
     881/    8FFE : 42 01                                                       or      r0, r1          ;  6
     882/    9000 :                                                             ;and    r0, r1
     883/    9000 : 70 E0                                                       push    r0              ; 12
     884/    9002 : 00 E5                                                       dec     r5              ;  6
     879/    9004 : 82 04                                                       lde     r0, @rr4        ; 12
     880/    9006 :                                                             ;com    r0              ;    
     881/    9006 : 42 01                                                       or      r0, r1          ;  6
     882/    9008 :                                                             ;and    r0, r1
     883/    9008 : 70 E0                                                       push    r0              ; 12
     884/    900A : 00 E5                                                       dec     r5              ;  6
     879/    900C : 82 04                                                       lde     r0, @rr4        ; 12
     880/    900E :                                                             ;com    r0              ;    
     881/    900E : 42 01                                                       or      r0, r1          ;  6
     882/    9010 :                                                             ;and    r0, r1
     883/    9010 : 70 E0                                                       push    r0              ; 12
     884/    9012 : 00 E5                                                       dec     r5              ;  6
     886/    9014 :                                                                                     ; 36
     887/    9014 : A0 EC                                               incw    rr12            ; next Farb-Byte
     888/    9016 : E0 EF                                               rr      r15             ; next Farb-Bank
     889/    9018 :                     
     890/    9018 : 80 E6                                       decw    rr6
     891/    901A :                                             ;-----------------------
     892/    901A : 06 E7 28                                    add     R7, #28h        ; 10 BWS-lo + 28h (40)
     893/    901D : 7B 08                                       jr      C,  vram100     ; 10/12
     894/    901F : 4B 07                                       jr      OV, vram200     ; 10/12
     895/    9021 : 66 E7 78                                    tcm     R7, #78h        ; 10
     896/    9024 : EB 08                                       jr      NZ, vram300     ; 10/12
     897/    9026 : 0B                                          db      0Bh             ; 10/12 0Bh = JR F (also niemals), irgendwo hin
     898/    9027 :                                                                     ;       Distanz (opcode inc r6)
     899/    9027 :                                                                     ; wenn Z = 0, springe nicht (2 Bytes)
     900/    9027 :                                                                     ; wenn Z = 1, Distanz wird als "inc r6" gelesen
     901/    9027 : 6E                                 vram100: inc     R6              ; 6
     902/    9028 : 06 E7 08                           vram200: add     R7, #8          ; 10
     903/    902B : 16 E6 00                                    adc     R6, #0          ; 10
     904/    902E :                                    vram300: ;-----------------------
     905/    902E :                     
     906/    902E : 00 EA                               dec     r10
     907/    9030 : ED 8A BE                            jp      nz, dl22
     908/    9033 :                     
     909/    9033 : E4 6A FE                    dlr11:  ld      SPH, saveH
     910/    9036 : E4 6B FF                            ld      SPL, saveL
     911/    9039 :                     
     912/    9039 : 50 E1                               pop     r1
     913/    903B : 50 E0                               pop     r0
     914/    903D :                     
     915/    903D : 9F                                  EI
     916/    903E : AF                                  ret
     917/    903F :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 55 - 11/22/2024 22:53:50


     918/    903F : E6 46 04            dlrret2:        ld      var_T_hi, #4
     919/    9042 : D6 84 00                            call    tLine
     920/    9045 : 8B EC                               jr      dlr11
     921/    9047 :                     
     922/    9047 :                     ;------------------------------------------------------------------------------
     923/    9047 :                     ; Erzeugt eine Kopie der HELL-Bank des VRAM ab 0C000H im RAM fÃ¼r die Erkennung
     924/    9047 :                     ; von hell-grÃ¼n- und weiss-Bitmaps im VRAM, um bei der Animation diese Stellen
     925/    9047 :                     ; nicht zu Ã¼berschreiben.
     926/    9047 :                     ;------------------------------------------------------------------------------
     927/    9047 :                     
     928/    9047 :                     makeMaskMap:
     929/    9047 : EC 60                               ld      r14, #60h
     930/    9049 : FC EF                               ld      r15, #11101111b         ; hell: Farb-BÃ¤nke = RGBHxxxx
     931/    904B : 92 FE                               lde     @rr14, r15              ; Farb-Bank einschalten
     932/    904D :                     
     933/    904D : 6C 40                               ld      r6, #hi(04000h)
     934/    904F : 7C 00                               ld      r7, #lo(04000h)
     935/    9051 : 4C C0                               ld      r4, #hi(0C000h)         ; VRAM-Maske
     936/    9053 : 5C 00                               ld      r5, #lo(0C000h)
     937/    9055 :                     
     938/    9055 : 82 06                       mmm1:   lde     r0, @rr6
     939/    9057 : 92 04                               lde     @rr4, r0
     940/    9059 : A0 E4                               incw    rr4
     941/    905B : A0 E6                               incw    rr6
     942/    905D : A6 E6 60                            cp      r6, #60h
     943/    9060 : EB F3                               jr      nz, mmm1
     944/    9062 :                     
     945/    9062 : AF                                  ret
     946/    9063 :                     
     947/    9063 :                     ;------------------------------------------------------------------------------         
     948/    9063 :                                     align   100h
     949/    9100 :                     cLines:
     950/    9100 :                                     ;       R     G     B     H             einfarbige Linien
     951/    9100 :                     ;10             
     952/    9100 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     953/    9104 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     954/    9108 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     955/    910C : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
     956/    9110 :                     ;9
     957/    9110 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     958/    9114 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     959/    9118 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     960/    911C : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
     961/    9120 :                     ;8
     962/    9120 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     963/    9124 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     964/    9128 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     965/    912C : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
     966/    9130 :                     ;7
     967/    9130 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
     968/    9134 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
     969/    9138 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
     970/    913C : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh          
     971/    9140 :                     ;6
     972/    9140 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
     973/    9144 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
     974/    9148 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
     975/    914C : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
     976/    9150 :                     ;5
     977/    9150 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 56 - 11/22/2024 22:53:50


     978/    9154 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
     979/    9158 : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
     980/    915C : FF FF FF 00                         db      0FFh, 0FFh, 0FFh, 000h
     981/    9160 :                     ;4
     982/    9160 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
     983/    9164 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
     984/    9168 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
     985/    916C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
     986/    9170 :                     ;3
     987/    9170 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
     988/    9174 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
     989/    9178 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
     990/    917C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
     991/    9180 :                     ;2
     992/    9180 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
     993/    9184 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
     994/    9188 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
     995/    918C : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
     996/    9190 :                     ;1
     997/    9190 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
     998/    9194 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
     999/    9198 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1000/    919C : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1001/    91A0 :                     
    1002/    91A0 :                     ;------------------------------------------------------------------------------
    1003/    91A0 :                                     align   100h
    1004/    9200 :                     mcLines:
    1005/    9200 :                                     ;       R     G     B     H             mehrfarbige Linien
    1006/    9200 :                     ;10             
    1007/    9200 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1008/    9204 : FF 00 00 FF                         db      0FFh, 000h, 000h, 0FFh
    1009/    9208 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1010/    920C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1011/    9210 :                     ;9
    1012/    9210 : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1013/    9214 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1014/    9218 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1015/    921C : FF 00 00 00                         db      0FFh, 000h, 000h, 000h
    1016/    9220 :                     ;8
    1017/    9220 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1018/    9224 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1019/    9228 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1020/    922C : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1021/    9230 :                     ;7
    1022/    9230 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1023/    9234 : FF FF 00 00                         db      0FFh, 0FFh, 000h, 000h
    1024/    9238 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1025/    923C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1026/    9240 :                     ;6
    1027/    9240 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1028/    9244 : FF FF 00 FF                         db      0FFh, 0FFh, 000h, 0FFh
    1029/    9248 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1030/    924C : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1031/    9250 :                     ;5
    1032/    9250 : 00 FF 00 00                         db      000h, 0FFh, 000h, 000h
    1033/    9254 : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1034/    9258 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1035/    925C : 00 FF 00 FF                         db      000h, 0FFh, 000h, 0FFh
    1036/    9260 :                     ;4
    1037/    9260 : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 57 - 11/22/2024 22:53:50


    1038/    9264 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1039/    9268 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1040/    926C : 00 FF FF 00                         db      000h, 0FFh, 0FFh, 000h
    1041/    9270 :                     ;3
    1042/    9270 : 00 00 FF FF                         db      000h, 000h, 0FFh, 0FFh
    1043/    9274 : 00 FF FF FF                         db      000h, 0FFh, 0FFh, 0FFh
    1044/    9278 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1045/    927C : 00 00 FF FF                         db      000h, 000h, 0FFh, 0FFh
    1046/    9280 :                     ;2
    1047/    9280 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1048/    9284 : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1049/    9288 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1050/    928C : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h
    1051/    9290 :                     ;1
    1052/    9290 : FF 00 FF 00                         db      0FFh, 000h, 0FFh, 000h  
    1053/    9294 : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1054/    9298 : FF FF FF FF                         db      0FFh, 0FFh, 0FFh, 0FFh
    1055/    929C : FF 00 FF FF                         db      0FFh, 000h, 0FFh, 0FFh
    1056/    92A0 :                     
    1057/    92A0 :                     ;------------------------------------------------------------------------------
    1058/    92A0 :                     
    1059/    92A0 :                                     ;       R     G     B     H             Hintergrund
    1060/    92A0 : 00 00 FF 00         bg:             db      000h, 000h, 0FFh, 000h
    1061/    92A4 : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1062/    92A8 : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1063/    92AC : 00 00 FF 00                         db      000h, 000h, 0FFh, 000h
    1064/    92B0 :                     
    1065/    92B0 :                     ;------------------------------------------------------------------------------
    1066/    92B0 :                     
    1067/    92B0 : =40H                 XW              equ     64                              ; 64 Y-Werte
    1068/    92B0 : =3FH                 cmask           equ     00111111b                       ; Maske fÃ¼r Ring-Puffer
    1069/    92B0 : =3.141592            PI              equ     3.141592
    1070/    92B0 :                     
    1071/    92B0 :                     ;------------------------------------------------------------------------------
    1072/    92B0 :                                     align 100h
    1073/    9300 :                     
    1074/    9300 :                     Y_POS_RING_BUFFER:
    1075/    9300 :                     
    1076/    9300 : =0H                  x       set     0
    1077/    9300 :                             while x<=XW-1
    1078/    9300 :                     
    1079/    9300 :                     value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9300 :                     
    1081/    9300 :                                     if value > 0
    1082/    9300 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9300 :                                     endif
    1084/    9300 :                     
    1085/    9300 :                     value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9300 :                                     db      value
    1087/    9300 :                                     ;message "value: \{value}"
    1088/    9300 :                     x               set     x+1     
    1089/    9300 :                             endm
    1078/    9300 :                     
    1079/    9300 : =-0.9202449857364    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9300 :                     
    1081/    9300 : =>FALSE                              if value > 0
    1082/    9300 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9300 : [1081]                               endif
    1084/    9300 :                     
    1085/    9300 : =1BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 58 - 11/22/2024 22:53:50


    1086/    9300 : 1B                                  db      value
    1087/    9301 :                                     ;message "value: \{value}"
    1088/    9301 : =1H                  x               set     x+1     
    1078/    9301 :                     
    1079/    9301 : =-0.9199453082903    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9301 :                     
    1081/    9301 : =>FALSE                              if value > 0
    1082/    9301 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9301 : [1081]                               endif
    1084/    9301 :                     
    1085/    9301 : =1BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9301 : 1B                                  db      value
    1087/    9302 :                                     ;message "value: \{value}"
    1088/    9302 : =2H                  x               set     x+1     
    1078/    9302 :                     
    1079/    9302 : =-0.9024984038887    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9302 :                     
    1081/    9302 : =>FALSE                              if value > 0
    1082/    9302 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9302 : [1081]                               endif
    1084/    9302 :                     
    1085/    9302 : =1CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9302 : 1C                                  db      value
    1087/    9303 :                                     ;message "value: \{value}"
    1088/    9303 : =3H                  x               set     x+1     
    1078/    9303 :                     
    1079/    9303 : =-0.8693994265888    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9303 :                     
    1081/    9303 : =>FALSE                              if value > 0
    1082/    9303 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9303 : [1081]                               endif
    1084/    9303 :                     
    1085/    9303 : =1EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9303 : 1E                                  db      value
    1087/    9304 :                                     ;message "value: \{value}"
    1088/    9304 : =4H                  x               set     x+1     
    1078/    9304 :                     
    1079/    9304 : =-0.8225617573113    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9304 :                     
    1081/    9304 : =>FALSE                              if value > 0
    1082/    9304 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9304 : [1081]                               endif
    1084/    9304 :                     
    1085/    9304 : =21H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9304 : 21                                  db      value
    1087/    9305 :                                     ;message "value: \{value}"
    1088/    9305 : =5H                  x               set     x+1     
    1078/    9305 :                     
    1079/    9305 : =-0.7642372966198    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9305 :                     
    1081/    9305 : =>FALSE                              if value > 0
    1082/    9305 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9305 : [1081]                               endif
    1084/    9305 :                     
    1085/    9305 : =25H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9305 : 25                                  db      value
    1087/    9306 :                                     ;message "value: \{value}"
    1088/    9306 : =6H                  x               set     x+1     
    1078/    9306 :                     
    1079/    9306 : =-0.6969255729002    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 59 - 11/22/2024 22:53:50


    1080/    9306 :                     
    1081/    9306 : =>FALSE                              if value > 0
    1082/    9306 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9306 : [1081]                               endif
    1084/    9306 :                     
    1085/    9306 : =29H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9306 : 29                                  db      value
    1087/    9307 :                                     ;message "value: \{value}"
    1088/    9307 : =7H                  x               set     x+1     
    1078/    9307 :                     
    1079/    9307 : =-0.6232752007763    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9307 :                     
    1081/    9307 : =>FALSE                              if value > 0
    1082/    9307 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9307 : [1081]                               endif
    1084/    9307 :                     
    1085/    9307 : =2EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9307 : 2E                                  db      value
    1087/    9308 :                                     ;message "value: \{value}"
    1088/    9308 : =8H                  x               set     x+1     
    1078/    9308 :                     
    1079/    9308 : =-0.5459815005898    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9308 :                     
    1081/    9308 : =>FALSE                              if value > 0
    1082/    9308 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9308 : [1081]                               endif
    1084/    9308 :                     
    1085/    9308 : =33H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9308 : 33                                  db      value
    1087/    9309 :                                     ;message "value: \{value}"
    1088/    9309 : =9H                  x               set     x+1     
    1078/    9309 :                     
    1079/    9309 : =-0.4676842191222    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9309 :                     
    1081/    9309 : =>FALSE                              if value > 0
    1082/    9309 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9309 : [1081]                               endif
    1084/    9309 :                     
    1085/    9309 : =38H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9309 : 38                                  db      value
    1087/    930A :                                     ;message "value: \{value}"
    1088/    930A : =0AH                 x               set     x+1     
    1078/    930A :                     
    1079/    930A : =-0.3908692695615    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930A :                     
    1081/    930A : =>FALSE                              if value > 0
    1082/    930A :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930A : [1081]                               endif
    1084/    930A :                     
    1085/    930A : =3CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930A : 3C                                  db      value
    1087/    930B :                                     ;message "value: \{value}"
    1088/    930B : =0BH                 x               set     x+1     
    1078/    930B :                     
    1079/    930B : =-0.3177782361171    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930B :                     
    1081/    930B : =>FALSE                              if value > 0
    1082/    930B :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930B : [1081]                               endif
    1084/    930B :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 60 - 11/22/2024 22:53:50


    1085/    930B : =41H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930B : 41                                  db      value
    1087/    930C :                                     ;message "value: \{value}"
    1088/    930C : =0CH                 x               set     x+1     
    1078/    930C :                     
    1079/    930C : =-0.2503290724906    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930C :                     
    1081/    930C : =>FALSE                              if value > 0
    1082/    930C :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930C : [1081]                               endif
    1084/    930C :                     
    1085/    930C : =45H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930C : 45                                  db      value
    1087/    930D :                                     ;message "value: \{value}"
    1088/    930D : =0DH                 x               set     x+1     
    1078/    930D :                     
    1079/    930D : =-0.1900509757918    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930D :                     
    1081/    930D : =>FALSE                              if value > 0
    1082/    930D :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930D : [1081]                               endif
    1084/    930D :                     
    1085/    930D : =49H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930D : 49                                  db      value
    1087/    930E :                                     ;message "value: \{value}"
    1088/    930E : =0EH                 x               set     x+1     
    1078/    930E :                     
    1079/    930E : =-0.1380358560616    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930E :                     
    1081/    930E : =>FALSE                              if value > 0
    1082/    930E :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930E : [1081]                               endif
    1084/    930E :                     
    1085/    930E : =4DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930E : 4D                                  db      value
    1087/    930F :                                     ;message "value: \{value}"
    1088/    930F : =0FH                 x               set     x+1     
    1078/    930F :                     
    1079/    930F : =-0.09490816780528   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    930F :                     
    1081/    930F : =>FALSE                              if value > 0
    1082/    930F :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    930F : [1081]                               endif
    1084/    930F :                     
    1085/    930F : =4FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    930F : 4F                                  db      value
    1087/    9310 :                                     ;message "value: \{value}"
    1088/    9310 : =10H                 x               set     x+1     
    1078/    9310 :                     
    1079/    9310 : =-0.06081414932887   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9310 :                     
    1081/    9310 : =>FALSE                              if value > 0
    1082/    9310 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9310 : [1081]                               endif
    1084/    9310 :                     
    1085/    9310 : =52H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9310 : 52                                  db      value
    1087/    9311 :                                     ;message "value: \{value}"
    1088/    9311 : =11H                 x               set     x+1     
    1078/    9311 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 61 - 11/22/2024 22:53:50


    1079/    9311 : =-0.03543075592429   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9311 :                     
    1081/    9311 : =>FALSE                              if value > 0
    1082/    9311 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9311 : [1081]                               endif
    1084/    9311 :                     
    1085/    9311 : =53H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9311 : 53                                  db      value
    1087/    9312 :                                     ;message "value: \{value}"
    1088/    9312 : =12H                 x               set     x+1     
    1078/    9312 :                     
    1079/    9312 : =-0.01799380345378   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9312 :                     
    1081/    9312 : =>FALSE                              if value > 0
    1082/    9312 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9312 : [1081]                               endif
    1084/    9312 :                     
    1085/    9312 : =54H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9312 : 54                                  db      value
    1087/    9313 :                                     ;message "value: \{value}"
    1088/    9313 : =13H                 x               set     x+1     
    1078/    9313 :                     
    1079/    9313 : =-0.007344089311331  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9313 :                     
    1081/    9313 : =>FALSE                              if value > 0
    1082/    9313 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9313 : [1081]                               endif
    1084/    9313 :                     
    1085/    9313 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9313 : 55                                  db      value
    1087/    9314 :                                     ;message "value: \{value}"
    1088/    9314 : =14H                 x               set     x+1     
    1078/    9314 :                     
    1079/    9314 : =-0.001989557010028  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9314 :                     
    1081/    9314 : =>FALSE                              if value > 0
    1082/    9314 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9314 : [1081]                               endif
    1084/    9314 :                     
    1085/    9314 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9314 : 55                                  db      value
    1087/    9315 :                                     ;message "value: \{value}"
    1088/    9315 : =15H                 x               set     x+1     
    1078/    9315 :                     
    1079/    9315 : =-1.809457845311E-4  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9315 :                     
    1081/    9315 : =>FALSE                              if value > 0
    1082/    9315 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9315 : [1081]                               endif
    1084/    9315 :                     
    1085/    9315 : =55H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9315 : 55                                  db      value
    1087/    9316 :                                     ;message "value: \{value}"
    1088/    9316 : =16H                 x               set     x+1     
    1078/    9316 :                     
    1079/    9316 : =2.1583039233153E-6  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9316 :                     
    1081/    9316 : =>TRUE                               if value > 0
    1082/    9316 : =3.3453710811393E-6  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9316 : [1081]                               endif
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 62 - 11/22/2024 22:53:50


    1084/    9316 :                     
    1085/    9316 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9316 : 56                                  db      value
    1087/    9317 :                                     ;message "value: \{value}"
    1088/    9317 : =17H                 x               set     x+1     
    1078/    9317 :                     
    1079/    9317 : =5.5835797905561E-4  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9317 :                     
    1081/    9317 : =>TRUE                               if value > 0
    1082/    9317 : =8.6545486753635E-4  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9317 : [1081]                               endif
    1084/    9317 :                     
    1085/    9317 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9317 : 56                                  db      value
    1087/    9318 :                                     ;message "value: \{value}"
    1088/    9318 : =18H                 x               set     x+1     
    1078/    9318 :                     
    1079/    9318 : =0.0034683242046244  value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9318 :                     
    1081/    9318 : =>TRUE                               if value > 0
    1082/    9318 : =0.0053759025171678  value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9318 : [1081]                               endif
    1084/    9318 :                     
    1085/    9318 : =56H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9318 : 56                                  db      value
    1087/    9319 :                                     ;message "value: \{value}"
    1088/    9319 : =19H                 x               set     x+1     
    1078/    9319 :                     
    1079/    9319 : =0.010599399358057   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9319 :                     
    1081/    9319 : =>TRUE                               if value > 0
    1082/    9319 : =0.016429069004985   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9319 : [1081]                               endif
    1084/    9319 :                     
    1085/    9319 : =57H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9319 : 57                                  db      value
    1087/    931A :                                     ;message "value: \{value}"
    1088/    931A : =1AH                 x               set     x+1     
    1078/    931A :                     
    1079/    931A : =0.023614775852012   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931A :                     
    1081/    931A : =>TRUE                               if value > 0
    1082/    931A : =0.036602902570615   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931A : [1081]                               endif
    1084/    931A :                     
    1085/    931A : =58H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931A : 58                                  db      value
    1087/    931B :                                     ;message "value: \{value}"
    1088/    931B : =1BH                 x               set     x+1     
    1078/    931B :                     
    1079/    931B : =0.043890923979917   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931B :                     
    1081/    931B : =>TRUE                               if value > 0
    1082/    931B : =0.068030932168865   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931B : [1081]                               endif
    1084/    931B :                     
    1085/    931B : =5AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931B : 5A                                  db      value
    1087/    931C :                                     ;message "value: \{value}"
    1088/    931C : =1CH                 x               set     x+1     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 63 - 11/22/2024 22:53:50


    1078/    931C :                     
    1079/    931C : =0.072446621859215   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931C :                     
    1081/    931C : =>TRUE                               if value > 0
    1082/    931C : =0.11229226388171    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931C : [1081]                               endif
    1084/    931C :                     
    1085/    931C : =5DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931C : 5D                                  db      value
    1087/    931D :                                     ;message "value: \{value}"
    1088/    931D : =1DH                 x               set     x+1     
    1078/    931D :                     
    1079/    931D : =0.10988648886442    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931D :                     
    1081/    931D : =>TRUE                               if value > 0
    1082/    931D : =0.17032405773981    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931D : [1081]                               endif
    1084/    931D :                     
    1085/    931D : =60H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931D : 60                                  db      value
    1087/    931E :                                     ;message "value: \{value}"
    1088/    931E : =1EH                 x               set     x+1     
    1078/    931E :                     
    1079/    931E : =0.15636135928526    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931E :                     
    1081/    931E : =>TRUE                               if value > 0
    1082/    931E : =0.24236010689217    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931E : [1081]                               endif
    1084/    931E :                     
    1085/    931E : =65H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931E : 65                                  db      value
    1087/    931F :                                     ;message "value: \{value}"
    1088/    931F : =1FH                 x               set     x+1     
    1078/    931F :                     
    1079/    931F : =0.21154717688343    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    931F :                     
    1081/    931F : =>TRUE                               if value > 0
    1082/    931F : =0.32789812416946    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    931F : [1081]                               endif
    1084/    931F :                     
    1085/    931F : =6AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    931F : 6A                                  db      value
    1087/    9320 :                                     ;message "value: \{value}"
    1088/    9320 : =20H                 x               set     x+1     
    1078/    9320 :                     
    1079/    9320 : =0.27464336885167    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9320 :                     
    1081/    9320 : =>TRUE                               if value > 0
    1082/    9320 : =0.42569722171999    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9320 : [1081]                               endif
    1084/    9320 :                     
    1085/    9320 : =71H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9320 : 71                                  db      value
    1087/    9321 :                                     ;message "value: \{value}"
    1088/    9321 : =21H                 x               set     x+1     
    1078/    9321 :                     
    1079/    9321 : =0.34439089725339    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9321 :                     
    1081/    9321 : =>TRUE                               if value > 0
    1082/    9321 : =0.53380589074263    value           set     value*1.55                      ; untere "Halbwelle" strecken
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 64 - 11/22/2024 22:53:50


    1083/    9321 : [1081]                               endif
    1084/    9321 :                     
    1085/    9321 : =78H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9321 : 78                                  db      value
    1087/    9322 :                                     ;message "value: \{value}"
    1088/    9322 : =22H                 x               set     x+1     
    1078/    9322 :                     
    1079/    9322 : =0.41910941668313    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9322 :                     
    1081/    9322 : =>TRUE                               if value > 0
    1082/    9322 : =0.64961959585884    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9322 : [1081]                               endif
    1084/    9322 :                     
    1085/    9322 : =7FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9322 : 7F                                  db      value
    1087/    9323 :                                     ;message "value: \{value}"
    1088/    9323 : =23H                 x               set     x+1     
    1078/    9323 :                     
    1079/    9323 : =0.49675221831376    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9323 :                     
    1081/    9323 : =>TRUE                               if value > 0
    1082/    9323 : =0.76996593838632    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9323 : [1081]                               endif
    1084/    9323 :                     
    1085/    9323 : =87H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9323 : 87                                  db      value
    1087/    9324 :                                     ;message "value: \{value}"
    1088/    9324 : =24H                 x               set     x+1     
    1078/    9324 :                     
    1079/    9324 : =0.57497694161275    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9324 :                     
    1081/    9324 : =>TRUE                               if value > 0
    1082/    9324 : =0.89121425949977    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9324 : [1081]                               endif
    1084/    9324 :                     
    1085/    9324 : =8FH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9324 : 8F                                  db      value
    1087/    9325 :                                     ;message "value: \{value}"
    1088/    9325 : =25H                 x               set     x+1     
    1078/    9325 :                     
    1079/    9325 : =0.65122941280386    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9325 :                     
    1081/    9325 : =>TRUE                               if value > 0
    1082/    9325 : =1.00940558984599    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9325 : [1081]                               endif
    1084/    9325 :                     
    1085/    9325 : =96H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9325 : 96                                  db      value
    1087/    9326 :                                     ;message "value: \{value}"
    1088/    9326 : =26H                 x               set     x+1     
    1078/    9326 :                     
    1079/    9326 : =0.72283744769894    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9326 :                     
    1081/    9326 : =>TRUE                               if value > 0
    1082/    9326 : =1.120398043933386   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9326 : [1081]                               endif
    1084/    9326 :                     
    1085/    9326 : =9DH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9326 : 9D                                  db      value
    1087/    9327 :                                     ;message "value: \{value}"
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 65 - 11/22/2024 22:53:50


    1088/    9327 : =27H                 x               set     x+1     
    1078/    9327 :                     
    1079/    9327 : =0.78711105602905    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9327 :                     
    1081/    9327 : =>TRUE                               if value > 0
    1082/    9327 : =1.220022136845011   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9327 : [1081]                               endif
    1084/    9327 :                     
    1085/    9327 : =0A4H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9327 : A4                                  db      value
    1087/    9328 :                                     ;message "value: \{value}"
    1088/    9328 : =28H                 x               set     x+1     
    1078/    9328 :                     
    1079/    9328 : =0.84144522042338    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9328 :                     
    1081/    9328 : =>TRUE                               if value > 0
    1082/    9328 : =1.304240091656226   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9328 : [1081]                               endif
    1084/    9328 :                     
    1085/    9328 : =0A9H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9328 : A9                                  db      value
    1087/    9329 :                                     ;message "value: \{value}"
    1088/    9329 : =29H                 x               set     x+1     
    1078/    9329 :                     
    1079/    9329 : =0.88342130603722    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9329 :                     
    1081/    9329 : =>TRUE                               if value > 0
    1082/    9329 : =1.369303024357808   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9329 : [1081]                               endif
    1084/    9329 :                     
    1085/    9329 : =0ADH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9329 : AD                                  db      value
    1087/    932A :                                     ;message "value: \{value}"
    1088/    932A : =2AH                 x               set     x+1     
    1078/    932A :                     
    1079/    932A : =0.91090319119263    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932A :                     
    1081/    932A : =>TRUE                               if value > 0
    1082/    932A : =1.411899946348597   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932A : [1081]                               endif
    1084/    932A :                     
    1085/    932A : =0B0H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932A : B0                                  db      value
    1087/    932B :                                     ;message "value: \{value}"
    1088/    932B : =2BH                 x               set     x+1     
    1078/    932B :                     
    1079/    932B : =0.92212439412305    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932B :                     
    1081/    932B : =>TRUE                               if value > 0
    1082/    932B : =1.429292810890651   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932B : [1081]                               endif
    1084/    932B :                     
    1085/    932B : =0B1H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932B : B1                                  db      value
    1087/    932C :                                     ;message "value: \{value}"
    1088/    932C : =2CH                 x               set     x+1     
    1078/    932C :                     
    1079/    932C : =0.91576279908597    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932C :                     
    1081/    932C : =>TRUE                               if value > 0
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 66 - 11/22/2024 22:53:50


    1082/    932C : =1.419432338583171   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932C : [1081]                               endif
    1084/    932C :                     
    1085/    932C : =0B0H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932C : B0                                  db      value
    1087/    932D :                                     ;message "value: \{value}"
    1088/    932D : =2DH                 x               set     x+1     
    1078/    932D :                     
    1079/    932D : =0.89100004427588    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932D :                     
    1081/    932D : =>TRUE                               if value > 0
    1082/    932D : =1.381050068627569   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932D : [1081]                               endif
    1084/    932D :                     
    1085/    932D : =0AEH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932D : AE                                  db      value
    1087/    932E :                                     ;message "value: \{value}"
    1088/    932E : =2EH                 x               set     x+1     
    1078/    932E :                     
    1079/    932E : =0.84756320666671    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932E :                     
    1081/    932E : =>TRUE                               if value > 0
    1082/    932E : =1.313722970333525   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932E : [1081]                               endif
    1084/    932E :                     
    1085/    932E : =0AAH                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932E : AA                                  db      value
    1087/    932F :                                     ;message "value: \{value}"
    1088/    932F : =2FH                 x               set     x+1     
    1078/    932F :                     
    1079/    932F : =0.78574708328507    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    932F :                     
    1081/    932F : =>TRUE                               if value > 0
    1082/    932F : =1.217907979091796   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    932F : [1081]                               endif
    1084/    932F :                     
    1085/    932F : =0A3H                value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    932F : A3                                  db      value
    1087/    9330 :                                     ;message "value: \{value}"
    1088/    9330 : =30H                 x               set     x+1     
    1078/    9330 :                     
    1079/    9330 : =0.70641609908267    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9330 :                     
    1081/    9330 : =>TRUE                               if value > 0
    1082/    9330 : =1.094944953578129   value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9330 : [1081]                               endif
    1084/    9330 :                     
    1085/    9330 : =9CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9330 : 9C                                  db      value
    1087/    9331 :                                     ;message "value: \{value}"
    1088/    9331 : =31H                 x               set     x+1     
    1078/    9331 :                     
    1079/    9331 : =0.61098564061624    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9331 :                     
    1081/    9331 : =>TRUE                               if value > 0
    1082/    9331 : =0.94702774295515    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9331 : [1081]                               endif
    1084/    9331 :                     
    1085/    9331 : =92H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9331 : 92                                  db      value
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 67 - 11/22/2024 22:53:50


    1087/    9332 :                                     ;message "value: \{value}"
    1088/    9332 : =32H                 x               set     x+1     
    1078/    9332 :                     
    1079/    9332 : =0.50138339271277    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9332 :                     
    1081/    9332 : =>TRUE                               if value > 0
    1082/    9332 : =0.77714425870474    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9332 : [1081]                               endif
    1084/    9332 :                     
    1085/    9332 : =87H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9332 : 87                                  db      value
    1087/    9333 :                                     ;message "value: \{value}"
    1088/    9333 : =33H                 x               set     x+1     
    1078/    9333 :                     
    1079/    9333 : =0.37999201245273    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9333 :                     
    1081/    9333 : =>TRUE                               if value > 0
    1082/    9333 : =0.58898761930173    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9333 : [1081]                               endif
    1084/    9333 :                     
    1085/    9333 : =7BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9333 : 7B                                  db      value
    1087/    9334 :                                     ;message "value: \{value}"
    1088/    9334 : =34H                 x               set     x+1     
    1078/    9334 :                     
    1079/    9334 : =0.24957518212773    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9334 :                     
    1081/    9334 : =>TRUE                               if value > 0
    1082/    9334 : =0.38684153229795    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9334 : [1081]                               endif
    1084/    9334 :                     
    1085/    9334 : =6EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9334 : 6E                                  db      value
    1087/    9335 :                                     ;message "value: \{value}"
    1088/    9335 : =35H                 x               set     x+1     
    1078/    9335 :                     
    1079/    9335 : =0.11318971325172    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9335 :                     
    1081/    9335 : =>TRUE                               if value > 0
    1082/    9335 : =0.17544405554017    value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9335 : [1081]                               endif
    1084/    9335 :                     
    1085/    9335 : =61H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9335 : 61                                  db      value
    1087/    9336 :                                     ;message "value: \{value}"
    1088/    9336 : =36H                 x               set     x+1     
    1078/    9336 :                     
    1079/    9336 : =-0.02591309692236   value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9336 :                     
    1081/    9336 : =>FALSE                              if value > 0
    1082/    9336 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9336 : [1081]                               endif
    1084/    9336 :                     
    1085/    9336 : =54H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9336 : 54                                  db      value
    1087/    9337 :                                     ;message "value: \{value}"
    1088/    9337 : =37H                 x               set     x+1     
    1078/    9337 :                     
    1079/    9337 : =-0.1643932468944    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9337 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 68 - 11/22/2024 22:53:50


    1081/    9337 : =>FALSE                              if value > 0
    1082/    9337 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9337 : [1081]                               endif
    1084/    9337 :                     
    1085/    9337 : =4BH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9337 : 4B                                  db      value
    1087/    9338 :                                     ;message "value: \{value}"
    1088/    9338 : =38H                 x               set     x+1     
    1078/    9338 :                     
    1079/    9338 : =-0.2989310698527    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9338 :                     
    1081/    9338 : =>FALSE                              if value > 0
    1082/    9338 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9338 : [1081]                               endif
    1084/    9338 :                     
    1085/    9338 : =42H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9338 : 42                                  db      value
    1087/    9339 :                                     ;message "value: \{value}"
    1088/    9339 : =39H                 x               set     x+1     
    1078/    9339 :                     
    1079/    9339 : =-0.4263355257727    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    9339 :                     
    1081/    9339 : =>FALSE                              if value > 0
    1082/    9339 :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    9339 : [1081]                               endif
    1084/    9339 :                     
    1085/    9339 : =3AH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    9339 : 3A                                  db      value
    1087/    933A :                                     ;message "value: \{value}"
    1088/    933A : =3AH                 x               set     x+1     
    1078/    933A :                     
    1079/    933A : =-0.5436477707539    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933A :                     
    1081/    933A : =>FALSE                              if value > 0
    1082/    933A :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933A : [1081]                               endif
    1084/    933A :                     
    1085/    933A : =33H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    933A : 33                                  db      value
    1087/    933B :                                     ;message "value: \{value}"
    1088/    933B : =3BH                 x               set     x+1     
    1078/    933B :                     
    1079/    933B : =-0.6482362070493    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933B :                     
    1081/    933B : =>FALSE                              if value > 0
    1082/    933B :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933B : [1081]                               endif
    1084/    933B :                     
    1085/    933B : =2CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    933B : 2C                                  db      value
    1087/    933C :                                     ;message "value: \{value}"
    1088/    933C : =3CH                 x               set     x+1     
    1078/    933C :                     
    1079/    933C : =-0.7378795407522    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933C :                     
    1081/    933C : =>FALSE                              if value > 0
    1082/    933C :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933C : [1081]                               endif
    1084/    933C :                     
    1085/    933C : =26H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 69 - 11/22/2024 22:53:50


    1086/    933C : 26                                  db      value
    1087/    933D :                                     ;message "value: \{value}"
    1088/    933D : =3DH                 x               set     x+1     
    1078/    933D :                     
    1079/    933D : =-0.8108348293186    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933D :                     
    1081/    933D : =>FALSE                              if value > 0
    1082/    933D :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933D : [1081]                               endif
    1084/    933D :                     
    1085/    933D : =22H                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    933D : 22                                  db      value
    1087/    933E :                                     ;message "value: \{value}"
    1088/    933E : =3EH                 x               set     x+1     
    1078/    933E :                     
    1079/    933E : =-0.8658880706712    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933E :                     
    1081/    933E : =>FALSE                              if value > 0
    1082/    933E :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933E : [1081]                               endif
    1084/    933E :                     
    1085/    933E : =1EH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    933E : 1E                                  db      value
    1087/    933F :                                     ;message "value: \{value}"
    1088/    933F : =3FH                 x               set     x+1     
    1078/    933F :                     
    1079/    933F : =-0.9023855476233    value           set     ( sin (1 * (x*2*PI/XW+1) ) + 0.5 * sin( 2 * (x*2*PI/XW+1) ) ) * 0.71 * (-1)
    1080/    933F :                     
    1081/    933F : =>FALSE                              if value > 0
    1082/    933F :                     value           set     value*1.55                      ; untere "Halbwelle" strecken
    1083/    933F : [1081]                               endif
    1084/    933F :                     
    1085/    933F : =1CH                 value           set     int ((value * 64) + 86)         ; Position der Wendepunkte
    1086/    933F : 1C                                  db      value
    1087/    9340 :                                     ;message "value: \{value}"
    1088/    9340 : =40H                 x               set     x+1     
    1078/    9340 :                     
    1090/    9340 :                     
    1091/    9340 :                     ;;------------------------------------------------------------------------------
    1092/    9340 :                     ; Einfache Simulation der genutzten Funktion zur Bewegung der Linien auf der Z-Achse
    1093/    9340 :                     ;
    1094/    9340 :                     ; https://www.geogebra.org/graphing?lang=de
    1095/    9340 :                     ;
    1096/    9340 :                     ; Copy/Paste: 
    1097/    9340 :                     ;
    1098/    9340 :                     ; Wenn((sin(x)+0.5 sin(2x))*0.71>0, (sin(x)+0.5 sin(2x))*0.71, (sin(x)+0.5 sin(2x))*0.71*1.55)
    1099/    9340 :                     ;
    1100/    9340 :                     ;------------------------------------------------------------------------------
    1101/    9340 :                                     align 100h
    1102/    9400 :                                     
    1103/    9400 :                     zg_KCC:         binclude ./zg_KCC.rom
    1104/    9C00 :                     zg_Z9001:       binclude ./zg_Z9001.rom
    1105/    A400 :                     
    1106/    A400 :                                     include ./bitmaps.asm
(1)    1/    A400 :                     ;------------------------------------------------------------------------------
(1)    2/    A400 :                     
(1)    3/    A400 : 0A                  KC_LOGO:        db      10      ; x
(1)    4/    A401 : 0C                                  db      12      ; y
(1)    5/    A402 : 04                                  db      4       ; xw
(1)    6/    A403 : 15                                  db      21      ; yw
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 70 - 11/22/2024 22:53:50


(1)    7/    A404 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)    8/    A405 :                     
(1)    9/    A405 :                                     ;       4 x 21
(1)   10/    A405 :                                     ;       12345678  12345678  12345678  12345678
(1)   11/    A405 : 00 27 FE 7F                         db      00000000b,00100111b,11111110b,01111111b
(1)   12/    A409 : 00 27 FE 7F                         db      00000000b,00100111b,11111110b,01111111b
(1)   13/    A40D : 00 67 FC FF                         db      00000000b,01100111b,11111100b,11111111b
(1)   14/    A411 : 00 67 FC FF                         db      00000000b,01100111b,11111100b,11111111b
(1)   15/    A415 : 00 E7 F9 FF                         db      00000000b,11100111b,11111001b,11111111b
(1)   16/    A419 : 00 E7 F9 FF                         db      00000000b,11100111b,11111001b,11111111b
(1)   17/    A41D : 01 E7 F3 FF                         db      00000001b,11100111b,11110011b,11111111b
(1)   18/    A421 : 01 E7 F3 FF                         db      00000001b,11100111b,11110011b,11111111b
(1)   19/    A425 : 03 E7 E7 FF                         db      00000011b,11100111b,11100111b,11111111b
(1)   20/    A429 : 03 E7 E7 FF                         db      00000011b,11100111b,11100111b,11111111b
(1)   21/    A42D : 07 E7 CF FF                         db      00000111b,11100111b,11001111b,11111111b
(1)   22/    A431 : 07 E7 CF FF                         db      00000111b,11100111b,11001111b,11111111b
(1)   23/    A435 : 0F E7 9F FF                         db      00001111b,11100111b,10011111b,11111111b
(1)   24/    A439 : 0F E7 9F FF                         db      00001111b,11100111b,10011111b,11111111b
(1)   25/    A43D : 1F E7 3F FF                         db      00011111b,11100111b,00111111b,11111111b
(1)   26/    A441 : 1F E7 3F FF                         db      00011111b,11100111b,00111111b,11111111b
(1)   27/    A445 : 3F E6 7F FF                         db      00111111b,11100110b,01111111b,11111111b
(1)   28/    A449 : 3F E6 7F FF                         db      00111111b,11100110b,01111111b,11111111b
(1)   29/    A44D : 7F E4 FF FF                         db      01111111b,11100100b,11111111b,11111111b
(1)   30/    A451 : 7F E4 FF FF                         db      01111111b,11100100b,11111111b,11111111b
(1)   31/    A455 : FF E4 FF FF                         db      11111111b,11100100b,11111111b,11111111b
(1)   32/    A459 :                     
(1)   33/    A459 :                     ;------------------------------------------------------------------------------
(1)   34/    A459 :                     
(1)   35/    A459 : 0A                  TINY_LOGO:      db      10      ; x
(1)   36/    A45A : 0C                                  db      12      ; y
(1)   37/    A45B : 0A                                  db      10      ; xw
(1)   38/    A45C : 18                                  db      24      ; yw
(1)   39/    A45D : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)   40/    A45E :                     
(1)   41/    A45E :                                     ;       10 x 24
(1)   42/    A45E :                                     ;       12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678  12345678      
(1)   43/    A45E : 3F FF C0 80 7F FF                   db      00111111b,11111111b,11000000b,10000000b,01111111b,11111111b,11000000b,01000000b,00000000b,10000000b     
             A464 : C0 40 00 80       
(1)   44/    A468 : 7F FF E1 C0 FF FF                   db      01111111b,11111111b,11100001b,11000000b,11111111b,11111111b,11100000b,11100000b,00000001b,11000000b     
             A46E : E0 E0 01 C0       
(1)   45/    A472 : 3F FF C1 C0 FF FF                   db      00111111b,11111111b,11000001b,11000000b,11111111b,11111111b,11100000b,11100000b,00000001b,11000000b     
             A478 : E0 E0 01 C0       
(1)   46/    A47C : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A482 : E0 E0 01 C0       
(1)   47/    A486 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A48C : E0 E0 01 C0       
(1)   48/    A490 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A496 : E0 E0 01 C0       
(1)   49/    A49A : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4A0 : E0 E0 01 C0       
(1)   50/    A4A4 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4AA : E0 E0 01 C0       
(1)   51/    A4AE : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4B4 : E0 E0 01 C0       
(1)   52/    A4B8 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,11100000b,00000001b,11000000b     
             A4BE : E0 E0 01 C0       
(1)   53/    A4C2 : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,01111111b,11111111b,10000000b     
             A4C8 : E0 7F FF 80       
(1)   54/    A4CC : 00 E0 01 C0 E0 00                   db      00000000b,11100000b,00000001b,11000000b,11100000b,00000000b,11100000b,00111111b,11111111b,00000000b     
             A4D2 : E0 3F FF 00       
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 71 - 11/22/2024 22:53:50


(1)   55/    A4D6 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4DC : E0 01 E0 00       
(1)   56/    A4E0 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4E6 : E0 01 E0 00       
(1)   57/    A4EA : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4F0 : E0 01 E0 00       
(1)   58/    A4F4 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A4FA : E0 01 E0 00       
(1)   59/    A4FE : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A504 : E0 01 E0 00       
(1)   60/    A508 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A50E : E0 01 E0 00       
(1)   61/    A512 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A518 : E0 01 E0 00       
(1)   62/    A51C : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A522 : E0 01 E0 00       
(1)   63/    A526 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A52C : E0 01 E0 00       
(1)   64/    A530 : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A536 : E0 01 E0 00       
(1)   65/    A53A : 00 F0 01 E0 F0 00                   db      00000000b,11110000b,00000001b,11100000b,11110000b,00000000b,11100000b,00000001b,11100000b,00000000b     
             A540 : E0 01 E0 00       
(1)   66/    A544 : 00 60 00 C0 60 00                   db      00000000b,01100000b,00000000b,11000000b,01100000b,00000000b,01000000b,00000000b,11000000b,00000000b        
             A54A : 40 00 C0 00       
(1)   67/    A54E :                     
(1)   68/    A54E :                     ;------------------------------------------------------------------------------
(1)   69/    A54E :                     
(1)   70/    A54E : 1A                  MH_LOGO:        db      26      ; x
(1)   71/    A54F : 8D                                  db      141     ; y
(1)   72/    A550 : 05                                  db      5       ; xw
(1)   73/    A551 : 2C                                  db      44      ; yw
(1)   74/    A552 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)   75/    A553 :                     
(1)   76/    A553 :                                     ;       5 x 1 = 5 x 44
(1)   77/    A553 :                                     ;       12345678  12345678  12345678  12345678  12345678
(1)   78/    A553 : 00 07 BE 00 00                      db      00000000b,00000111b,10111110b,00000000b,00000000b                                       
(1)   79/    A558 : 00 18 01 80 00                      db      00000000b,00011000b,00000001b,10000000b,00000000b                                     
(1)   80/    A55D : 00 A0 00 50 00                      db      00000000b,10100000b,00000000b,01010000b,00000000b                                     
(1)   81/    A562 : 01 00 00 10 00                      db      00000001b,00000000b,00000000b,00010000b,00000000b                                     
(1)   82/    A567 : 03 01 F8 08 00                      db      00000011b,00000001b,11111000b,00001000b,00000000b                                     
(1)   83/    A56C : 04 06 07 04 00                      db      00000100b,00000110b,00000111b,00000100b,00000000b                                     
(1)   84/    A571 : 08 18 00 C2 00                      db      00001000b,00011000b,00000000b,11000010b,00000000b                                     
(1)   85/    A576 : 10 20 00 21 80                      db      00010000b,00100000b,00000000b,00100001b,10000000b                                     
(1)   86/    A57B : 10 C0 00 10 00                      db      00010000b,11000000b,00000000b,00010000b,00000000b                                     
(1)   87/    A580 : 20 83 FC 08 80                      db      00100000b,10000011b,11111100b,00001000b,10000000b                                     
(1)   88/    A585 : 21 06 03 04 40                      db      00100001b,00000110b,00000011b,00000100b,01000000b                                     
(1)   89/    A58A : 43 08 01 84 40                      db      01000011b,00001000b,00000001b,10000100b,01000000b                                     
(1)   90/    A58F : 42 10 00 42 20                      db      01000010b,00010000b,00000000b,01000010b,00100000b                                     
(1)   91/    A594 : 04 20 00 62 20                      db      00000100b,00100000b,00000000b,01100010b,00100000b                                     
(1)   92/    A599 : 44 60 00 22 20                      db      01000100b,01100000b,00000000b,00100010b,00100000b                                     
(1)   93/    A59E : 84 40 00 21 20                      db      10000100b,01000000b,00000000b,00100001b,00100000b                                     
(1)   94/    A5A3 : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   95/    A5A8 : 84 40 00 11 00                      db      10000100b,01000000b,00000000b,00010001b,00000000b                                     
(1)   96/    A5AD : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   97/    A5B2 : 84 40 00 11 20                      db      10000100b,01000000b,00000000b,00010001b,00100000b                                     
(1)   98/    A5B7 : 04 41 F8 21 20                      db      00000100b,01000001b,11111000b,00100001b,00100000b                                     
(1)   99/    A5BC : 44 47 FE 22 20                      db      01000100b,01000111b,11111110b,00100010b,00100000b                                     
(1)  100/    A5C1 : 42 3F FF E2 40                      db      01000010b,00111111b,11111111b,11100010b,01000000b                                     
(1)  101/    A5C6 : 42 3F FF C4 40                      db      01000010b,00111111b,11111111b,11000100b,01000000b                                     
(1)  102/    A5CB : 23 1C F3 C4 80                      db      00100011b,00011100b,11110011b,11000100b,10000000b                                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 72 - 11/22/2024 22:53:50


(1)  103/    A5D0 : 21 1C F3 C8 00                      db      00100001b,00011100b,11110011b,11001000b,00000000b                                     
(1)  104/    A5D5 : 10 DF FF D0 80                      db      00010000b,11011111b,11111111b,11010000b,10000000b                                     
(1)  105/    A5DA : 08 5C F3 F3 00                      db      00001000b,01011100b,11110011b,11110011b,00000000b                                     
(1)  106/    A5DF : 08 3C F3 C2 00                      db      00001000b,00111100b,11110011b,11000010b,00000000b                                     
(1)  107/    A5E4 : 04 1C F3 C4 00                      db      00000100b,00011100b,11110011b,11000100b,00000000b                                     
(1)  108/    A5E9 : 03 1F FF C8 00                      db      00000011b,00011111b,11111111b,11001000b,00000000b                                     
(1)  109/    A5EE : 00 9C F3 F0 00                      db      00000000b,10011100b,11110011b,11110000b,00000000b                                     
(1)  110/    A5F3 : 00 7C F3 C0 00                      db      00000000b,01111100b,11110011b,11000000b,00000000b                                     
(1)  111/    A5F8 : 00 1C FB C0 00                      db      00000000b,00011100b,11111011b,11000000b,00000000b                                     
(1)  112/    A5FD : 00 1D F3 C0 00                      db      00000000b,00011101b,11110011b,11000000b,00000000b                                     
(1)  113/    A602 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                                     
(1)  114/    A607 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                                     
(1)  115/    A60C : 00 00 F0 00 00                      db      00000000b,00000000b,11110000b,00000000b,00000000b                                     
(1)  116/    A611 : 00 03 FC 00 00                      db      00000000b,00000011b,11111100b,00000000b,00000000b                                     
(1)  117/    A616 : 00 1F FF 80 00                      db      00000000b,00011111b,11111111b,10000000b,00000000b                                     
(1)  118/    A61B : 00 1F FF 80 00                      db      00000000b,00011111b,11111111b,10000000b,00000000b                                     
(1)  119/    A620 : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b                                     
(1)  120/    A625 : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b                                     
(1)  121/    A62A : 00 19 99 80 00                      db      00000000b,00011001b,10011001b,10000000b,00000000b   
(1)  122/    A62F :                     
(1)  123/    A62F :                     ;------------------------------------------------------------------------------
(1)  124/    A62F :                     
(1)  125/    A62F : 1A                  JU_TE_LOGO:     db      26      ; x
(1)  126/    A630 : 8D                                  db      141     ; y
(1)  127/    A631 : 05                                  db      5       ; xw
(1)  128/    A632 : 2C                                  db      44      ; yw
(1)  129/    A633 : 50                                  db      050h    ; Farbe VH (grÃ¼nH/sw)
(1)  130/    A634 :                     
(1)  131/    A634 :                                     ;       5 x 44
(1)  132/    A634 :                                     ;       12345678  12345678  12345678  12345678  12345678
(1)  133/    A634 : 3C 07 80 F0 00                      db      00111100b,00000111b,10000000b,11110000b,00000000b
(1)  134/    A639 : 7E 0F C1 F8 00                      db      01111110b,00001111b,11000001b,11111000b,00000000b
(1)  135/    A63E : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  136/    A643 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  137/    A648 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  138/    A64D : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  139/    A652 : 7F 0F C3 F8 00                      db      01111111b,00001111b,11000011b,11111000b,00000000b
(1)  140/    A657 : 3F 87 87 F0 00                      db      00111111b,10000111b,10000111b,11110000b,00000000b
(1)  141/    A65C : 01 C3 0E 00 00                      db      00000001b,11000011b,00001110b,00000000b,00000000b
(1)  142/    A661 : 00 E3 1C 00 00                      db      00000000b,11100011b,00011100b,00000000b,00000000b
(1)  143/    A666 : 00 73 38 00 00                      db      00000000b,01110011b,00111000b,00000000b,00000000b
(1)  144/    A66B : 3C 3F F0 F0 00                      db      00111100b,00111111b,11110000b,11110000b,00000000b
(1)  145/    A670 : 7E 1F E1 F8 00                      db      01111110b,00011111b,11100001b,11111000b,00000000b
(1)  146/    A675 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  147/    A67A : FF FC FF FC 00                      db      11111111b,11111100b,11111111b,11111100b,00000000b
(1)  148/    A67F : FF FC FF FC 00                      db      11111111b,11111100b,11111111b,11111100b,00000000b
(1)  149/    A684 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  150/    A689 : 7E 1F E1 F8 00                      db      01111110b,00011111b,11100001b,11111000b,00000000b
(1)  151/    A68E : 3C 3F F0 F0 00                      db      00111100b,00111111b,11110000b,11110000b,00000000b
(1)  152/    A693 : 00 73 38 00 00                      db      00000000b,01110011b,00111000b,00000000b,00000000b
(1)  153/    A698 : 00 E3 1C 00 00                      db      00000000b,11100011b,00011100b,00000000b,00000000b
(1)  154/    A69D : 01 C3 0E 00 00                      db      00000001b,11000011b,00001110b,00000000b,00000000b
(1)  155/    A6A2 : 3F 87 87 F0 00                      db      00111111b,10000111b,10000111b,11110000b,00000000b
(1)  156/    A6A7 : 7F 0F C3 F8 00                      db      01111111b,00001111b,11000011b,11111000b,00000000b
(1)  157/    A6AC : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  158/    A6B1 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  159/    A6B6 : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  160/    A6BB : FF 1F E3 FC 00                      db      11111111b,00011111b,11100011b,11111100b,00000000b
(1)  161/    A6C0 : 7E 0F C1 F8 00                      db      01111110b,00001111b,11000001b,11111000b,00000000b
(1)  162/    A6C5 : 3C 07 80 F0 00                      db      00111100b,00000111b,10000000b,11110000b,00000000b
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(./bitmaps.asm) - Page 73 - 11/22/2024 22:53:50


(1)  163/    A6CA : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b                       
(1)  164/    A6CF : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  165/    A6D4 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  166/    A6D9 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  167/    A6DE : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  168/    A6E3 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  169/    A6E8 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  170/    A6ED : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  171/    A6F2 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  172/    A6F7 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  173/    A6FC : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  174/    A701 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  175/    A706 : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  176/    A70B : 00 00 00 00 00                      db      00000000b,00000000b,00000000b,00000000b,00000000b
(1)  177/    A710 :                                     
(1)  178/    A710 :                     ;------------------------------------------------------------------------------
(1)  179/    A710 :                     
(1)  180/    A710 :                                                                                       
(1)  181/    A710 :                     
(1)  182/    A710 :                     
(1)  183/    A710 :                     
(1)  184/    A710 :                     
(1)  185/    A710 :                                     
(1)  186/    A710 :                                             
    1107/    A710 :                                     include ../FGL/FGL.asm
(1)    1/    A710 :                     ;------------------------------------------------------------------------------
(1)    2/    A710 :                     ; Titel:                Ju-Te 6K Fast Graphics Library  (6K-FGL)
(1)    3/    A710 :                     ;
(1)    4/    A710 :                     ; Erstellt:             10.11.2023
(1)    5/    A710 :                     ; Letzte Ã„nderung:      15.11.2024
(1)    6/    A710 :                     ;------------------------------------------------------------------------------ 
(1)    7/    A710 :                     
(1)    8/    A710 : =>DEFINED                    ifndef  MACROS_INC
(1)    9/    A710 :                                     include ./macros.asm
(1)   10/    A710 : [8]                          endif   
(1)   11/    A710 :                                     
(1)   12/    A710 : =4000H               VRAM            equ     4000h
(1)   13/    A710 : =5FFFH               VRAM_END        equ     5FFFh
(1)   14/    A710 : =1FFFH               VRAM_LEN        equ     VRAM_END - VRAM
(1)   15/    A710 :                     
(1)   16/    A710 : =0AA00H              VRAM_TAB_HI     equ     RAM_START       ; muss xx00-Adr. sein
(1)   17/    A710 : =0AB00H              VRAM_TAB_LO     equ     RAM_START+100h  ; muss xx00-Adr. sein
(1)   18/    A710 :                     
(1)   19/    A710 : =6AH                 saveH           equ     6Ah             ; Hilfs-Register
(1)   20/    A710 : =6BH                 saveL           equ     6Bh             ; Hilfs-Register
(1)   21/    A710 :                     
(1)   22/    A710 :                     ;------------------------------------------------------------------------------
(1)   23/    A710 :                     ; Kopiert Bitmap in den VRAM.
(1)   24/    A710 :                     ;
(1)   25/    A710 :                     ; in:           rr12    = Pointer auf Bitmap
(1)   26/    A710 :                     ;
(1)   27/    A710 :                     ;               db      ?       ; x-Byte-Pos
(1)   28/    A710 :                     ;               db      ?       ; y-Pos
(1)   29/    A710 :                     ;               db      ?       ; xw-Bytes
(1)   30/    A710 :                     ;               db      ?       ; yw-Zeilen
(1)   31/    A710 :                     ;               db      ?       ; Farbe VH
(1)   32/    A710 :                     ;               ds      xw*yw   ; Bitmap
(1)   33/    A710 :                     ;
(1)   34/    A710 :                     ; out:          Bitmap im VRAM
(1)   35/    A710 :                     ;------------------------------------------------------------------------------
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 74 - 11/22/2024 22:53:50


(1)   36/    A710 :                     
(1)   37/    A710 :                     FGL_BMP_TO_VRAM:
(1)   38/    A710 :                     
(1)   39/    A710 : 82 0C                               lde     r0, @rr12
(1)   40/    A712 : 09 4F                               ld      var_X_lo, r0    ; x
(1)   41/    A714 : A0 EC                               incw    rr12
(1)   42/    A716 :                     
(1)   43/    A716 : 82 0C                               lde     r0, @rr12
(1)   44/    A718 : 09 51                               ld      var_Y_lo, r0    ; y
(1)   45/    A71A : A0 EC                               incw    rr12
(1)   46/    A71C :                     
(1)   47/    A71C : 82 0C                               lde     r0, @rr12
(1)   48/    A71E : 09 53                               ld      var_Z_lo, r0    ; xw
(1)   49/    A720 : A0 EC                               incw    rr12
(1)   50/    A722 :                     
(1)   51/    A722 : 82 0C                               lde     r0, @rr12
(1)   52/    A724 : 09 52                               ld      var_Z_hi, r0    ; yw
(1)   53/    A726 : A0 EC                               incw    rr12
(1)   54/    A728 :                     
(1)   55/    A728 : 82 0C                               lde     r0, @rr12
(1)   56/    A72A : 09 4D                               ld      var_W_lo, r0    ; Farbe V8
(1)   57/    A72C : A0 EC                               incw    rr12
(1)   58/    A72E :                     
(1)   59/    A72E :                                     ; use: r0,r2,r3,r4,r5,r6,r7 in: var_X_lo, var_Y_lo
(1)   60/    A72E : D6 A9 13                            call    XBY_to_vram
(1)   61/    A731 :                     
(1)   62/    A731 : 38 52                               ld      r3, var_Z_hi
(1)   63/    A733 :                     
(1)   64/    A733 : 28 53                               citv2:  ld      r2, var_Z_lo
(1)   65/    A735 :                     
(1)   66/    A735 :                                             citv1:
(1)   67/    A735 : 82 FC                                               lde     r15, @rr12
(1)   68/    A737 :                                                     ;use: r5-15 in: var_W_lo, rr6, r15
(1)   69/    A737 : D6 A8 87                                            call    setVRAM
(1)   70/    A73A : A0 EC                                               incw    rr12
(1)   71/    A73C : 7E                                                  inc     r7
(1)   72/    A73D : 2A F6                                       djnz    r2, citv1
(1)   73/    A73F :                     
(1)   74/    A73F : 24 53 E7                                    sub     r7, var_Z_lo
(1)   75/    A742 : D6 A9 24                                    call    vram_inc_y_es40
(1)   76/    A745 : 3A EC                               djnz    r3, citv2
(1)   77/    A747 : AF                                  ret
(1)   78/    A748 :                             
(1)   79/    A748 :                     ;------------------------------------------------------------------------------
(1)   80/    A748 :                     ; Gibt eine Zeichenkette mit FGL_CHAROUT aus.
(1)   81/    A748 :                     ;
(1)   82/    A748 :                     ; in:   var_T           = Zeiger auf Zeichensatz        
(1)   83/    A748 :                     ;       var_U           = Warten nach einer Zeichenzeile (ms)
(1)   84/    A748 :                     ;       var_V           = Warten nach einem Zeichen (ms)
(1)   85/    A748 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)   86/    A748 :                     ;       var_X_lo        = x-Byte        (0-39)
(1)   87/    A748 :                     ;       var_Y_lo        = y-Zeile       (0-191)
(1)   88/    A748 :                     ;       var_Z_lo        = ASCII
(1)   89/    A748 :                     ;       var_Z_hi        = N             (Zoom-Faktor)
(1)   90/    A748 :                     ;
(1)   91/    A748 :                     ; out:  Zeichenkette auf dem Bildschirm
(1)   92/    A748 :                     ;------------------------------------------------------------------------------
(1)   93/    A748 :                     
(1)   94/    A748 : 50 EC               FGL_PRISTRI:    pop     r12
(1)   95/    A74A : 50 ED                               pop     r13                     ; SP+2
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 75 - 11/22/2024 22:53:50


(1)   96/    A74C : 70 4F                               push    var_X_lo
(1)   97/    A74E : 82 2C               prc1:           lde     r2, @rr12
(1)   98/    A750 :                     
(1)   99/    A750 : A6 E2 00                            cp      r2, #0                  ; Ende ?
(1)  100/    A753 : 6B 1A                               jr      z, prcret
(1)  101/    A755 : 29 53                               ld      var_Z_lo, r2            ; Zeichen laden
(1)  102/    A757 :                     
(1)  103/    A757 : 70 EC                               push    r12
(1)  104/    A759 : 70 ED                               push    r13
(1)  105/    A75B : D6 A7 78                            call    FGL_CHAROUT             ; Zeichen ausgeben
(1)  106/    A75E : 50 ED                               pop     r13
(1)  107/    A760 : 50 EC                               pop     r12
(1)  108/    A762 :                     
(1)  109/    A762 : D6 A8 60                            call    FGL_TIMER               ; nach Zeichen warten 
(1)  110/    A765 :                     
(1)  111/    A765 : 08 52                               ld      r0, var_Z_hi            ; inc X
(1)  112/    A767 : 20 4F               prc2:           inc     var_X_lo
(1)  113/    A769 : 0A FC                               djnz    r0, prc2
(1)  114/    A76B :                     
(1)  115/    A76B : A0 EC                               incw    rr12
(1)  116/    A76D : 8B DF                               jr      prc1
(1)  117/    A76F :                     
(1)  118/    A76F : 50 4F               prcret:         pop     var_X_lo
(1)  119/    A771 : A0 EC                               incw    rr12
(1)  120/    A773 : 70 ED                               push    r13
(1)  121/    A775 : 70 EC                               push    r12
(1)  122/    A777 : AF                                  ret
(1)  123/    A778 :                     
(1)  124/    A778 :                     ;------------------------------------------------------------------------------
(1)  125/    A778 :                     ; Stellt Zeichen auf dem Bildschirm dar.
(1)  126/    A778 :                     ;
(1)  127/    A778 :                     ; in:   var_T           = Zeiger auf Zeichensatz        
(1)  128/    A778 :                     ;       var_U           = Wartezeit nach einer Zeichenzeile
(1)  129/    A778 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)  130/    A778 :                     ;       var_X_lo        = x-Byte        (0-39)
(1)  131/    A778 :                     ;       var_Y_lo        = y-Zeile       (0-191)
(1)  132/    A778 :                     ;       var_Z_lo        = ASCII
(1)  133/    A778 :                     ;       var_Z_hi        = N             (Zoom-Faktor)
(1)  134/    A778 :                     ;
(1)  135/    A778 :                     ; out:  Zeichen auf dem Bildschirm
(1)  136/    A778 :                     ;
(1)  137/    A778 :                     ; intern:
(1)  138/    A778 :                     ;       r0              ASCII->ZG / N
(1)  139/    A778 :                     ;       r1              ASCII->ZG / save FLAGS
(1)  140/    A778 :                     ;       r2              ZG hi
(1)  141/    A778 :                     ;       r3              ZG lo
(1)  142/    A778 :                     ;       r4              ZG-Zeilen-ZÃ¤hler
(1)  143/    A778 :                     ;       r5              ZG-Zeilen-Puffer / setVRAM
(1)  144/    A778 :                     ;       r6              VRAM hi
(1)  145/    A778 :                     ;       r7              VRAM lo
(1)  146/    A778 :                     ;       r8              Puffer-Zeiger / setVRAM
(1)  147/    A778 :                     ;       r9              setVRAM
(1)  148/    A778 :                     ;       r10             setVRAM
(1)  149/    A778 :                     ;       r11             N / setVRAM
(1)  150/    A778 :                     ;       r12             Puffer-Zeiger
(1)  151/    A778 :                     ;       r13             N
(1)  152/    A778 :                     ;       r14             Farb-Register hi / setVRAM
(1)  153/    A778 :                     ;       r15             Farb-Register lo / setVRAM
(1)  154/    A778 :                     ;------------------------------------------------------------------------------
(1)  155/    A778 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 76 - 11/22/2024 22:53:50


(1)  156/    A778 : D6 A9 13            FGL_CHAROUT:    call    XBY_to_vram             ; rr6 -> VRAM
(1)  157/    A77B :                     
(1)  158/    A77B : B0 E0                               clr     r0
(1)  159/    A77D : 18 53                               ld      r1, var_Z_lo            ; rr0 = ASCII
(1)  160/    A77F :                                     
(1)  161/    A77F : 10 E1                               rlc     r1                      ; rr0 x 8 ZG-Zeilen
(1)  162/    A781 : 10 E0                               rlc     r0
(1)  163/    A783 : 10 E1                               rlc     r1
(1)  164/    A785 : 10 E0                               rlc     r0
(1)  165/    A787 : 10 E1                               rlc     r1
(1)  166/    A789 : 10 E0                               rlc     r0
(1)  167/    A78B : 56 E1 F8                            and     r1, #11111000b
(1)  168/    A78E :                     
(1)  169/    A78E : 28 46                               ld      r2, var_T_hi            ; Zeichensatz holen
(1)  170/    A790 : 38 47                               ld      r3, var_T_lo
(1)  171/    A792 :                                     
(1)  172/    A792 : 02 31                               add     r3, r1
(1)  173/    A794 : 12 20                               adc     r2, r0                  ; rr2 -> ZG-Byte (ASCII) 1. Zeile
(1)  174/    A796 :                     
(1)  175/    A796 :                                     ;4
(1)  176/    A796 : 4C 08                               ld      r4, #8;9                ; 8 ZG-Zeilen
(1)  177/    A798 :                     
(1)  178/    A798 :                                     pc1:    ;0,5,2,3
(1)  179/    A798 : 0C 08                                       ld      r0, #8          ; ZG-Pixel-ZÃ¤hler
(1)  180/    A79A : 82 52                                       lde     r5, @rr2        ; ZG-Zeile
(1)  181/    A79C :                                             
(1)  182/    A79C :                                             pc4:    ;5,13,8,11
(1)  183/    A79C : C0 E5                                               rrc     r5
(1)  184/    A79E : 18 FC                                               ld      r1, FLAGS
(1)  185/    A7A0 : D8 52                                               ld      r13, var_Z_hi           ; N x N Bytes 1 x strecken
(1)  186/    A7A2 :                     
(1)  187/    A7A2 :                                                     pcc2:   
(1)  188/    A7A2 : (MACRO)                                                      ldrr    rr8, #zoom_buffer
(1)  189/    A7A6 : B8 52                                                       ld      r11, var_Z_hi   ; N Bytes 1 x strecken
(1)  190/    A7A8 : 82 A8                                                       pcc1:   lde     r10, @rr8
(1)  191/    A7AA : C0 EA                                                               rrc     r10
(1)  192/    A7AC : 92 A8                                                               lde     @rr8, r10
(1)  193/    A7AE : A0 E8                                                               incw    rr8
(1)  194/    A7B0 : BA F6                                                       djnz    r11, pcc1
(1)  195/    A7B2 :                     
(1)  196/    A7B2 : 19 FC                                                       ld      FLAGS, r1
(1)  197/    A7B4 : DA EC                                               djnz    r13, pcc2
(1)  198/    A7B6 :                     
(1)  199/    A7B6 : 0A E4                                       djnz    r0, pc4                         ; nÃ¤chstes ZG-Pixel
(1)  200/    A7B8 :                                                     
(1)  201/    A7B8 : 08 52                                       ld      r0, var_Z_hi                    ; N ZG-Zeilen (gestreckt)
(1)  202/    A7BA :                                             pcc6:   ;12,13,15,6,7
(1)  203/    A7BA : (MACRO)                                              ldrr    rr12, #zoom_buffer
(1)  204/    A7BE : 18 52                                               ld      r1, var_Z_hi;           ; N Pixel-Bytes (gestreckt)
(1)  205/    A7C0 :                     
(1)  206/    A7C0 :                                                     pcc5:
(1)  207/    A7C0 : 82 FC                                                       lde     r15, @rr12
(1)  208/    A7C2 :                                                             
(1)  209/    A7C2 :                                                             ;5,8,9,10,11,14
(1)  210/    A7C2 : D6 A8 87                                                    call    setVRAM         ; Farb-BÃ¤nke setzen
(1)  211/    A7C5 :                                             
(1)  212/    A7C5 : A6 49 00                                                    cp      var_U_lo, #0    ; Wartezeit nach Zeile = 0 ?
(1)  213/    A7C8 : EB 05                                                       jr      nz, pcc9
(1)  214/    A7CA : A6 4A 00                                                    cp      var_V_hi, #0    ; wirklich 0 ?
(1)  215/    A7CD : 6B 11                                                       jr      z, pcc8                 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 77 - 11/22/2024 22:53:50


(1)  216/    A7CF :                                                     pcc9:   
(1)  217/    A7CF : 70 4A                                                       push    var_V_hi        ; nach Zeile warten     
(1)  218/    A7D1 : 70 4B                                                       push    var_V_lo
(1)  219/    A7D3 : E4 48 4A                                                    ld      var_V_hi, var_U_hi
(1)  220/    A7D6 : E4 49 4B                                                    ld      var_V_lo, var_U_lo
(1)  221/    A7D9 : D6 A8 60                                                    call    FGL_TIMER
(1)  222/    A7DC : 50 4B                                                       pop     var_V_lo
(1)  223/    A7DE : 50 4A                                                       pop     var_V_hi
(1)  224/    A7E0 :                                                     pcc8:
(1)  225/    A7E0 : A0 EC                                                       incw    rr12
(1)  226/    A7E2 : 7E                                                          inc     r7
(1)  227/    A7E3 :                     
(1)  228/    A7E3 : 1A DB                                               djnz    r1, pcc5                ; nÃ¤chstes Byte
(1)  229/    A7E5 :                     
(1)  230/    A7E5 : 24 52 E7                                            sub     r7, var_Z_hi            ; X-Pos korrigieren
(1)  231/    A7E8 : D6 A9 24                                            call    vram_inc_y_es40         ; rr6 -> nÃ¤chste VRAM-Zeile
(1)  232/    A7EB : 0A CD                                       djnz    r0, pcc6
(1)  233/    A7ED :                     
(1)  234/    A7ED : A0 E2                                       incw    rr2                             ; nÃ¤chstes ZG-Byte
(1)  235/    A7EF :                     
(1)  236/    A7EF : 4A A7                               djnz    r4, pc1                                 ; nÃ¤chste ZG-Zeile
(1)  237/    A7F1 : AF                                  ret
(1)  238/    A7F2 :                     
(1)  239/    A7F2 :                     ;------------------------------------------------------------------------------
(1)  240/    A7F2 :                     ; Erstellt die Lookup-Tabelle fÃ¼r die Konvertierung der X,Y Koordinaten in 
(1)  241/    A7F2 :                     ; VRAM-Adressen.
(1)  242/    A7F2 :                     ; 
(1)  243/    A7F2 :                     ; in:   ---
(1)  244/    A7F2 :                     ;
(1)  245/    A7F2 :                     ; out:  VRAM_TAB_LO/HI im RAM   
(1)  246/    A7F2 :                     
(1)  247/    A7F2 :                     ; int:  r0-r4   
(1)  248/    A7F2 :                     ;------------------------------------------------------------------------------                 
(1)  249/    A7F2 :                     
(1)  250/    A7F2 :                     FGL_INIT:        
(1)  251/    A7F2 :                                     ; Low-Bytes erzeugen
(1)  252/    A7F2 :                     
(1)  253/    A7F2 : 0C AB                               ld      r0, #hi(VRAM_TAB_LO)
(1)  254/    A7F4 : 1C 00                               ld      r1, #0
(1)  255/    A7F6 :                                     
(1)  256/    A7F6 : 3C 40                               ld      r3, #64         ; 64 x 3 Zeilen = 192 Zeilen
(1)  257/    A7F8 :                     
(1)  258/    A7F8 : 4C 00                               ld      r4, #0
(1)  259/    A7FA : 92 40                               lde     @rr0, r4
(1)  260/    A7FC : A0 E0                               incw    rr0
(1)  261/    A7FE :                     
(1)  262/    A7FE : 06 E4 28            make_vt1:       add     r4,#40
(1)  263/    A801 : 92 40                               lde     @rr0, r4
(1)  264/    A803 : A0 E0                               incw    rr0
(1)  265/    A805 :                     
(1)  266/    A805 : 06 E4 28                            add     r4,#40
(1)  267/    A808 : 92 40                               lde     @rr0, r4
(1)  268/    A80A : A0 E0                               incw    rr0
(1)  269/    A80C :                                                     
(1)  270/    A80C : 06 E4 30                            add     r4,#48
(1)  271/    A80F : 92 40                               lde     @rr0, r4
(1)  272/    A811 : A0 E0                               incw    rr0
(1)  273/    A813 :                                     
(1)  274/    A813 : 3A E9                               djnz    r3, make_vt1
(1)  275/    A815 :                                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 78 - 11/22/2024 22:53:50


(1)  276/    A815 :                                     ; 3 aus 8 Dekoder erzeugen
(1)  277/    A815 :                                     
(1)  278/    A815 : 80 E0                               decw    rr0
(1)  279/    A817 : 3C 08                               ld      r3, #8
(1)  280/    A819 : 48 80                               ld      r4, 10000000b
(1)  281/    A81B : 92 40               make_vt3:       lde     @rr0, r4
(1)  282/    A81D : E0 E4                               rr      r4
(1)  283/    A81F : A0 E0                               incw    rr0
(1)  284/    A821 : 3A F8                               djnz    r3, make_vt3
(1)  285/    A823 :                                     
(1)  286/    A823 :                                     ; High-Bytes erzeugen
(1)  287/    A823 :                     
(1)  288/    A823 : 0C AA                               ld      r0, #hi(VRAM_TAB_HI)
(1)  289/    A825 : 1C 00                               ld      r1, #0
(1)  290/    A827 :                                     
(1)  291/    A827 : 2C 06                               ld      r2, #6
(1)  292/    A829 : 3C 20                               ld      r3, #32         ; 32 x 6 Zeilen = 192 Zeilen
(1)  293/    A82B :                     
(1)  294/    A82B : 4C 40                               ld      r4, #hi(VRAM)
(1)  295/    A82D :                                     
(1)  296/    A82D : 92 40               make_vt2:       lde     @rr0, r4
(1)  297/    A82F : A0 E0                               incw    rr0
(1)  298/    A831 : 2A FA                               djnz    r2, make_vt2    ; 6 x 40h, 41h, 42h, ...
(1)  299/    A833 : 2C 06                               ld      r2, #6
(1)  300/    A835 : 4E                                  inc     r4
(1)  301/    A836 : 3A F5                               djnz    r3, make_vt2    ; 32 BlÃ¶cke
(1)  302/    A838 :                     
(1)  303/    A838 : AF                                  ret     
(1)  304/    A839 :                             
(1)  305/    A839 :                     ;------------------------------------------------------------------------------ 
(1)  306/    A839 :                     ; LÃ¶scht den Bildschirm.
(1)  307/    A839 :                     ;
(1)  308/    A839 :                     ; in:   var_Z_lo = Farbe (low-aktiv)    |R|G|B|V|x|x|x|x|
(1)  309/    A839 :                     ;       var_Z_hi = Pixel (high-aktiv)   |x|x|x|x|x|x|x|x|
(1)  310/    A839 :                     ;
(1)  311/    A839 :                     ; int:  r0-r9
(1)  312/    A839 :                     ;------------------------------------------------------------------------------ 
(1)  313/    A839 :                     
(1)  314/    A839 : 68 52               FGL_CLS:        ld      r6, var_Z_hi
(1)  315/    A83B : 38 53                               ld      r3, var_Z_lo
(1)  316/    A83D :                     
(1)  317/    A83D : E6 F8 B2                            ld      p01m, #0B2h             ; Ports 0-1 mode, langsames Timing fÃ¼r ext. Speicher
(1)  318/    A840 :                     
(1)  319/    A840 : 0C 40                               ld      r0, #hi(VRAM)           ; VRAM
(1)  320/    A842 : 1C 00                               ld      r1, #lo(VRAM)   
(1)  321/    A844 :                                     
(1)  322/    A844 : 8C 1F                               ld      r8, #hi(VRAM_LEN)       ; ZÃ¤hler
(1)  323/    A846 : 9C FF                               ld      r9, #lo(VRAM_LEN)
(1)  324/    A848 :                     
(1)  325/    A848 : 2C 60                               ld      r2, #60h                ; Farb-Register hi
(1)  326/    A84A : 48 E2                               ld      r4, r2
(1)  327/    A84C :                                     
(1)  328/    A84C : 5C 00                               ld      r5, #00h                ; Farb-BÃ¤nke = 0000xxxx (alle BÃ¤nke an)
(1)  329/    A84E :                                                                     ; Pixel      = 00000000
(1)  330/    A84E :                                     
(1)  331/    A84E : 92 54               cls_1:          lde     @rr4, r5                ; Farb-BÃ¤nke = 0000xxxx (alle BÃ¤nke an)
(1)  332/    A850 : 92 50                               lde     @rr0, r5                ; Pixel      = 00000000 -> Bank 1-4
(1)  333/    A852 :                                     
(1)  334/    A852 : 92 32                               lde     @rr2, r3                ; Farb-BÃ¤nke = RGBVxxxx                 
(1)  335/    A854 : 92 60                               lde     @rr0, r6                ; Pixel      = xxxxxxxx 
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 79 - 11/22/2024 22:53:50


(1)  336/    A856 :                                     
(1)  337/    A856 : A0 E0                               incw    rr0                     ; NÃ¤chste RAM-Pos.
(1)  338/    A858 : 80 E8                               decw    rr8                     ; ZÃ¤hler -1
(1)  339/    A85A : EB F2                               jr      nz, cls_1
(1)  340/    A85C :                                     
(1)  341/    A85C : E6 F8 92                            ld      p01m, #092h             ; Ports 0-1 mode, schnelles Timing fÃ¼r ext. Speicher    
(1)  342/    A85F : AF                                  ret
(1)  343/    A860 :                     
(1)  344/    A860 :                     ;------------------------------------------------------------------------------ 
(1)  345/    A860 :                     ; Timer
(1)  346/    A860 :                     ;
(1)  347/    A860 :                     ; in:   var_V   = N 
(1)  348/    A860 :                     ;
(1)  349/    A860 :                     ; out:  wartet N * 1 ms
(1)  350/    A860 :                     ;------------------------------------------------------------------------------ 
(1)  351/    A860 :                                     
(1)  352/    A860 : 8F                  FGL_TIMER:      DI
(1)  353/    A861 : A6 4B 00                            cp      var_V_lo, #0
(1)  354/    A864 : EB 05                               jr      nz, tm0
(1)  355/    A866 : A6 4A 00                            cp      var_V_hi, #0
(1)  356/    A869 : 6B 1A                               jr      z, tmend
(1)  357/    A86B :                                     
(1)  358/    A86B : 70 EC               tm0:            push    r12
(1)  359/    A86D : 70 ED                               push    r13
(1)  360/    A86F : 70 E0                               push    r0
(1)  361/    A871 :                                     
(1)  362/    A871 : C8 4A                               ld      r12, var_V_hi
(1)  363/    A873 : D8 4B                               ld      r13, var_V_lo
(1)  364/    A875 :                                                             
(1)  365/    A875 : 0C DF               tm2:            ld      r0, #0dfh       ; 1 ms
(1)  366/    A877 :                                     
(1)  367/    A877 : 00 E0               tm1:            dec     r0
(1)  368/    A879 : EB FC                               jr      nz, tm1
(1)  369/    A87B :                                     
(1)  370/    A87B : 80 EC                               decw    rr12
(1)  371/    A87D : EB F6                               jr      nz, tm2
(1)  372/    A87F :                     
(1)  373/    A87F : 50 E0                               pop     r0
(1)  374/    A881 : 50 ED                               pop     r13
(1)  375/    A883 : 50 EC                               pop     r12
(1)  376/    A885 :                     
(1)  377/    A885 : 9F                  tmend:          EI
(1)  378/    A886 : AF                                  ret
(1)  379/    A887 :                                     
(1)  380/    A887 :                     ;------------------------------------------------------------------------------
(1)  381/    A887 :                     ; Setzt die Farb-Bytes in den 4 Farb-BÃ¤nken (RGBH)
(1)  382/    A887 :                     ;
(1)  383/    A887 :                     ; in:
(1)  384/    A887 :                     ;       var_W_lo        = Farbe         (VVVVHHHHb  V=Vordergrund, H=Hintergrund)
(1)  385/    A887 :                     ;       r15             = Pixel-Byte
(1)  386/    A887 :                     ;       rr6             = VRAM
(1)  387/    A887 :                     ;
(1)  388/    A887 :                     ;       R G B H  Hex  Farbe
(1)  389/    A887 :                     ;       ----------------------
(1)  390/    A887 :                     ;       0 0 0 0   0   schwarz
(1)  391/    A887 :                     ;       0 0 0 1   1   grau
(1)  392/    A887 :                     ;       0 0 1 0   2   blau
(1)  393/    A887 :                     ;       0 0 1 1   3   blauH
(1)  394/    A887 :                     ;       0 1 0 0   4   grÃ¼n
(1)  395/    A887 :                     ;       0 1 0 1   5   grÃ¼nH
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 80 - 11/22/2024 22:53:50


(1)  396/    A887 :                     ;       0 1 1 0   6   cyan
(1)  397/    A887 :                     ;       0 1 1 1   7   cyanH
(1)  398/    A887 :                     ;       1 0 0 0   8   rot
(1)  399/    A887 :                     ;       1 0 0 1   9   rotH
(1)  400/    A887 :                     ;       1 0 1 0   A   pink
(1)  401/    A887 :                     ;       1 0 1 1   B   pinkH
(1)  402/    A887 :                     ;       1 1 0 0   C   gelb
(1)  403/    A887 :                     ;       1 1 0 1   D   gelbH
(1)  404/    A887 :                     ;       1 1 1 0   E   grauH
(1)  405/    A887 :                     ;       1 1 1 1   F   weiss
(1)  406/    A887 :                     ;
(1)  407/    A887 :                     ; out:  4 Bytes im VRAM (RGBH)
(1)  408/    A887 :                     ;
(1)  409/    A887 :                     ; intern:
(1)  410/    A887 :                     ;       r0              -
(1)  411/    A887 :                     ;       r1              -
(1)  412/    A887 :                     ;       r2              -
(1)  413/    A887 :                     ;       r3              -
(1)  414/    A887 :                     ;       r4              -
(1)  415/    A887 :                     ;       r5              Pixel-ZÃ¤hler
(1)  416/    A887 :                     ;       r6              VRAM hi
(1)  417/    A887 :                     ;       r7              VRAM lo
(1)  418/    A887 :                     ;       r8              R
(1)  419/    A887 :                     ;       r9              G
(1)  420/    A887 :                     ;       r10             B
(1)  421/    A887 :                     ;       r11             H
(1)  422/    A887 :                     ;       r12             -
(1)  423/    A887 :                     ;       r13             -
(1)  424/    A887 :                     ;       r14             Farbe /      Farb-Register hi
(1)  425/    A887 :                     ;       r15             Pixel-Byte / Farb-Register lo
(1)  426/    A887 :                     ;------------------------------------------------------------------------------
(1)  427/    A887 :                     
(1)  428/    A887 : 5C 08               setVRAM:        ld      r5, #8
(1)  429/    A889 :                                     plv11:
(1)  430/    A889 : E8 4D                                       ld      r14, var_W_lo   ; Farbe
(1)  431/    A88B : 10 EF                                       rlc     r15             ; Pixel-Byte
(1)  432/    A88D : 7B 02                                       jr      c, plv22
(1)  433/    A88F : F0 EE                                       swap    r14             ; 4 Bit Farbe (high nibble) fÃ¼r Pixel
(1)  434/    A891 :                                     plv22:
(1)  435/    A891 : 10 EE                                       rlc     r14
(1)  436/    A893 : 10 E8                                       rlc     r8              ; R
(1)  437/    A895 :                     
(1)  438/    A895 : 10 EE                                       rlc     r14
(1)  439/    A897 : 10 E9                                       rlc     r9              ; G
(1)  440/    A899 :                     
(1)  441/    A899 : 10 EE                                       rlc     r14
(1)  442/    A89B : 10 EA                                       rlc     r10             ; B
(1)  443/    A89D :                     
(1)  444/    A89D : 10 EE                                       rlc     r14
(1)  445/    A89F : 10 EB                                       rlc     r11             ; H
(1)  446/    A8A1 :                     
(1)  447/    A8A1 : 5A E6                               djnz    r5, plv11
(1)  448/    A8A3 :                     
(1)  449/    A8A3 : EC 60                               ld      r14, #60h
(1)  450/    A8A5 : FC 7F                               ld      r15, #01111111b         ;Farb-BÃ¤nke = RGBHxxxx
(1)  451/    A8A7 :                     
(1)  452/    A8A7 : 92 FE                               lde     @rr14, r15              ;R-Bank einschalten
(1)  453/    A8A9 : 92 86                               lde     @rr6, r8
(1)  454/    A8AB :                     
(1)  455/    A8AB : E0 EF                               rr      r15
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 81 - 11/22/2024 22:53:50


(1)  456/    A8AD : 92 FE                               lde     @rr14, r15              ;G-Bank einschalten
(1)  457/    A8AF : 92 96                               lde     @rr6, r9
(1)  458/    A8B1 :                     
(1)  459/    A8B1 : E0 EF                               rr      r15
(1)  460/    A8B3 : 92 FE                               lde     @rr14, r15              ;B-Bank einschalten
(1)  461/    A8B5 : 92 A6                               lde     @rr6, r10
(1)  462/    A8B7 :                     
(1)  463/    A8B7 : E0 EF                               rr      r15
(1)  464/    A8B9 : 92 FE                               lde     @rr14, r15              ;H-Bank einschalten
(1)  465/    A8BB : 92 B6                               lde     @rr6, r11
(1)  466/    A8BD :                     
(1)  467/    A8BD : AF                                  ret
(1)  468/    A8BE :                     
(1)  469/    A8BE :                     ;------------------------------------------------------------------------------                         
(1)  470/    A8BE :                     XPY_to_vram:
(1)  471/    A8BE :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  472/    A8BE :                     
(1)  473/    A8BE : 2C AA                               ld      r2, #hi(VRAM_TAB_HI) ;-+
(1)  474/    A8C0 : 4C AB                               ld      r4, #hi(VRAM_TAB_LO) ; |
(1)  475/    A8C2 :                                                             ;      |
(1)  476/    A8C2 : 88 4F                               ld      r8, var_X_lo    ;      | 
(1)  477/    A8C4 :                                                             ;      |
(1)  478/    A8C4 :                                     ;r8 = x / 8 (x = 0-319) ;      |
(1)  479/    A8C4 :                                                             ;      |
(1)  480/    A8C4 : 56 E8 F8                            and     r8, #11111000b  ;      |
(1)  481/    A8C7 : 44 4E E8                            or      r8, var_X_hi    ;      |
(1)  482/    A8CA : 90 E8                               rl      r8              ;      |
(1)  483/    A8CC : F0 E8                               swap    r8              ;      |
(1)  484/    A8CE :                                                             ;      |
(1)  485/    A8CE : 38 51                               ld      r3, var_Y_lo    ;      |
(1)  486/    A8D0 : 58 E3                               ld      r5, r3          ;      |
(1)  487/    A8D2 : 82 62                               lde     r6, @rr2        ;      |
(1)  488/    A8D4 : 82 74                               lde     r7, @rr4        ;      |
(1)  489/    A8D6 :                                                             ;      |
(1)  490/    A8D6 : 02 78                               add     r7, r8          ;      |
(1)  491/    A8D8 :                                                             ;      |
(1)  492/    A8D8 : 58 4F                               ld      r5, var_X_lo    ;      |
(1)  493/    A8DA : 56 E5 07                            and     r5, #00000111b  ;      |
(1)  494/    A8DD :                                     ;or     r5, #11000000b  ;      |   kann entfallen bei align 100h
(1)  495/    A8DD : 82 34                               lde     r3, @rr4        ; -----+-> 122 Takte            
(1)  496/    A8DF : AF                                  ret                     ;   rr6 -> VRAM, r3 -> Bit-Position 
(1)  497/    A8E0 :                     
(1)  498/    A8E0 :                     ;------------------------------------------------------------------------------ 
(1)  499/    A8E0 :                     XPY_to_vram_r013:       
(1)  500/    A8E0 :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  501/    A8E0 :                                     
(1)  502/    A8E0 : 2C AA                               ld      r2,  #hi(VRAM_TAB_HI);-+
(1)  503/    A8E2 : AC AB                               ld      r10, #hi(VRAM_TAB_LO); |
(1)  504/    A8E4 :                                                             ;      |        
(1)  505/    A8E4 : B8 4F                               ld      r11, var_X_lo   ;      | 
(1)  506/    A8E6 :                                                             ;      |
(1)  507/    A8E6 :                                     ;r11 = x / 8 (x = 0-319);      |
(1)  508/    A8E6 :                                                             ;      |
(1)  509/    A8E6 : 56 EB F8                            and     r11, #11111000b ;      |
(1)  510/    A8E9 : 44 4E EB                            or      r11, var_X_hi   ;      |
(1)  511/    A8EC : 90 EB                               rl      r11             ;      |
(1)  512/    A8EE : F0 EB                               swap    r11             ;      |
(1)  513/    A8F0 :                                                             ;      |
(1)  514/    A8F0 : 38 51                               ld      r3, var_Y_lo    ;      |        
(1)  515/    A8F2 : B8 E3                               ld      r11, r3         ;      |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 82 - 11/22/2024 22:53:50


(1)  516/    A8F4 : 82 02                               lde     r0, @rr2        ;      |
(1)  517/    A8F6 : 82 1A                               lde     r1, @rr10       ;      |
(1)  518/    A8F8 :                                                             ;      |
(1)  519/    A8F8 : 02 1B                               add     r1, r11         ;      |
(1)  520/    A8FA :                                                             ;      |
(1)  521/    A8FA : B8 4F                               ld      r11, var_X_lo   ;      |
(1)  522/    A8FC : 56 EB 07                            and     r11, #00000111b ;      |
(1)  523/    A8FF :                                     ;or     r11, #11000000b ;      |   kann entfallen bei align 100h        
(1)  524/    A8FF : 82 3A                               lde     r3, @rr10       ; -----+-> 122 Takte            
(1)  525/    A901 : AF                                  ret                     ;   rr0 -> VRAM, r3 -> Bit-Position 
(1)  526/    A902 :                                     
(1)  527/    A902 :                     ;------------------------------------------------------------------------------ 
(1)  528/    A902 :                     XPY_to_vram_es40:
(1)  529/    A902 :                                     ; P(x,y) to VRAM        ; IN: var_X, var_Y
(1)  530/    A902 :                     
(1)  531/    A902 : 31 60                               srp     #60h            ; -----+
(1)  532/    A904 : D6 0F BB                            call    0FBBh           ;      |
(1)  533/    A907 : E4 60 76                            ld      76h, 60h        ;      |        
(1)  534/    A90A : E4 61 77                            ld      77h, 61h        ;      |
(1)  535/    A90D : E4 63 73                            ld      73h, 63h        ;      |        
(1)  536/    A910 : 31 70                               srp     #70h            ; -----+-> 300 Takte    
(1)  537/    A912 : AF                                  ret                     ;   rr6 -> VRAM, r3 -> Bit-Position
(1)  538/    A913 :                             
(1)  539/    A913 :                     ;------------------------------------------------------------------------------         
(1)  540/    A913 :                     XBY_to_vram:    
(1)  541/    A913 :                                     ; P(xByte,y) to VRAM    ; IN: var_X, var_Y
(1)  542/    A913 :                                     ; r0,r2,r3,r4,r5,r6,r7
(1)  543/    A913 : 2C AA                               ld      r2, #hi(VRAM_TAB_HI) ;-+
(1)  544/    A915 : 4C AB                               ld      r4, #hi(VRAM_TAB_LO) ; |                
(1)  545/    A917 : 08 4F                               ld      r0, var_X_lo    ; -----+
(1)  546/    A919 : 38 51                               ld      r3, var_Y_lo    ;      |
(1)  547/    A91B : 58 E3                               ld      r5, r3          ;      |
(1)  548/    A91D : 82 62                               lde     r6, @rr2        ;      |        
(1)  549/    A91F : 82 74                               lde     r7, @rr4        ;      |        
(1)  550/    A921 : 02 70                               add     r7, r0          ; -----+-> 48 Takte
(1)  551/    A923 : AF                                  ret                     ;  rr6 -> VRAM
(1)  552/    A924 :                                     
(1)  553/    A924 :                     ;------------------------------------------------------------------------------ 
(1)  554/    A924 :                     vram_inc_y_es40:
(1)  555/    A924 :                                     ; nÃ¤chste VRAM-Adr. in Y-Richtung 
(1)  556/    A924 :                                     
(1)  557/    A924 : 06 E7 28                            add     R7, #28h        ; 10 BWS-lo + 28h (40)
(1)  558/    A927 : 7B 08                               jr      C,  vram1       ; 10/12
(1)  559/    A929 : 4B 07                               jr      OV, vram2       ; 10/12
(1)  560/    A92B : 66 E7 78                            tcm     R7, #78h        ; 10    
(1)  561/    A92E : EB 08                               jr      NZ, vram3       ; 10/12
(1)  562/    A930 : 0B                                  db  0Bh                 ; 10/12 0Bh = JR F (also niemals), irgendwo hin
(1)  563/    A931 :                                                             ;       Distanz (opcode inc r6)                 
(1)  564/    A931 :                                                             ; wenn Z = 0, springe nicht (2 Bytes)
(1)  565/    A931 :                                                             ; wenn Z = 1, Distanz wird als "inc r6" gelesen                         
(1)  566/    A931 : 6E                  vram1:          inc     R6              ; 6
(1)  567/    A932 : 06 E7 08            vram2:          add     R7, #8          ; 10 
(1)  568/    A935 : 16 E6 00                            adc     R6, #0          ; 10
(1)  569/    A938 : AF                  vram3:          ret
(1)  570/    A939 :                             
(1)  571/    A939 :                     
(1)  572/    A939 :                     
(1)  573/    A939 :                     ;------------------------------------------------------------------------------
(1)  574/    A939 :                     
(1)  575/    A939 :                                     align 100h                      ; VRAM-Tab muss XX00-Adr. sein
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm(../FGL/FGL.asm) - Page 83 - 11/22/2024 22:53:50


(1)  576/    AA00 :                                     
(1)  577/    AA00 : =0AA00H              RAM_START       equ     $                       ; 
(1)  578/    AA00 :                                     ds      200h                    ; LÃ¤nge der P(x,y) zu VRAM Tabelle 
(1)  579/    AC00 :                     zoom_buffer     ds      32                      ; Zoom-Buffer fÃ¼r FGL_CHAROUT
(1)  580/    AC20 :                     
(1)  581/    AC20 :                     
(1)  582/    AC20 :                     
(1)  583/    AC20 :                                             
(1)  584/    AC20 :                     
    1108/    AC20 :                     
    1109/    AC20 :                     ;------------------------------------------------------------------------------
    1110/    AC20 :                     
    1111/    AC20 :                                     align 100h
    1112/    AD00 :                     
    1113/    AD00 :                     banner_buffer:  ds      (banner_end - banner_start) * 8
    1114/    B3E0 :                     
    1115/    B3E0 :                     
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 84 - 11/22/2024 22:53:50


  Symbol Table (* = unused):
  --------------------------

*ADRE :                        0CA9 - |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
*ATH16 :                       0CD5 - | *ATH4 :                        0CB8 - |
*ATH8 :                        0CDC - |  BANNERTOVRAM :                81BF C |
 BANNER_BUFFER :              0AD00 C |  BANNER_END :                  82C4 - |
 BANNER_LEN :                   0DC - |  BANNER_START :                81E8 - |
 BASE :                        8000 - |  BG :                          92A0 C |
*CASESENSITIVE :                  0 - | *CHARIN :                       815 - |
 CHAROUT :                      818 - |  CHECKKEY :                    8165 C |
 CHEXIT :                      816E C |  CITV1 :                      0A735 C |
 CITV2 :                      0A733 C | *CLINES :                      9100 C |
 CLS_1 :                      0A84E C |  CMASK :                         3F - |
 COLORS_PER_LINE :                4 - | *CONSTPI :        3.141592653589793 - |
 CTB1 :                        82EF C |  CTB2 :                        82CE C |
 CTB3 :                        82F9 C |  CTV1 :                        81CD C |
 CTV2 :                        81CB C | *CUPOS :                         5B - |
*C_BS :                           8 - | *C_CLS :                         0C - |
*C_DEL :                          7 - | *C_DOWN :                         4 - |
*C_ENTER :                       0D - | *C_ESC :                         0E - |
*C_HOME :                         5 - | *C_INS :                          9 - |
*C_LDEL :                        0A - | *C_LEFT :                         1 - |
*C_LINS :                        0B - | *C_RIGHT :                        2 - |
*C_SOL :                          6 - | *C_UP :                           3 - |
*DATE :                "11/22/2024" - | *DAXTH16 :                     0A52 - |
 DL2 :                         8453 C |  DL22 :                        8ABE C |
 DLN1 :                        8450 C |  DLN11 :                       8ABB C |
 DLN2 :                        844B C |  DLN22 :                       8AB6 C |
 DLR1 :                        8A68 C |  DLR11 :                       9033 C |
 DLRRET :                      8A74 C |  DLRRET2 :                     903F C |
 DLS1 :                        83BC C |  DLS2 :                        83AE C |
 DLS22 :                       83E3 C |  DLS3 :                        83B1 C |
 DLS33 :                       83E6 C |  DLS4 :                        83D5 C |
*DRAW :                        17F7 - |  DRAWLINEG :                   8411 C |
 DRAWLINES :                   838B C |  DRAWLINEW :                   8A7C C |
*ES40_INC :                    8000 C | *FALSE :                          0 - |
 FGL_BMP_TO_VRAM :            0A710 C |  FGL_CHAROUT :                0A778 C |
 FGL_CLS :                    0A839 C |  FGL_INIT :                   0A7F2 C |
 FGL_PRISTRI :                0A748 C |  FGL_TIMER :                  0A860 C |
 FI1 :                         817B C |  FI2 :                         8180 C |
 FLAGS :                        0FC - | *FULLPMMU :                       1 - |
*HAS64 :                          0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - | *HIDEPLAYER :                   833 - |
*HTA16 :                       0C69 - | *HTA4 :                        0C7B - |
*HTA8 :                        0C72 - | *IMR :                          0FB - |
*INSUPMODE :                      0 - |  INVERTRECT :                  8177 C |
*IPR :                          0F9 - | *IRQ :                          0FA - |
 JU_TE_LOGO :                 0A62F C |  KC_LOGO :                    0A400 C |
 KEY :                          81B - |  KOMMAND :                      812 - |
 LINES :                         0A - | *LISTON :                         1 - |
*LOAD :                         824 - |  MA1 :                         815C C |
*MA2 :                         8155 C | *MA3 :                         8149 C |
*MA4 :                         8146 C | *MACEXP :                         7 - |
*MACROS_INC :                  8000 C |  MAKEMASKMAP :                 9047 C |
 MAKE_VT1 :                   0A7FE C |  MAKE_VT2 :                   0A82D C |
 MAKE_VT3 :                   0A81B C |  MCLINES :                     9200 C |
 MH_LOGO :                    0A54E C |  MMM1 :                        9055 C |
*MOMCPU :                      8601 - | *MOMCPUNAME :               "Z8601" - |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 85 - 11/22/2024 22:53:50


*MONITOR :                      82A - |  MOVEONECHAR :                 81A1 C |
 MOVESCREEN :                  830C C |  MS1 :                         8318 C |
 NCHARS :                        28 - |  NEG :                         8439 C |
 NEG2 :                        8AA4 C | *NESTMAX :                      100 - |
 NUMVAL :                     0AC00 - |  OC1 :                         81B3 C |
*P0 :                             0 - |  P01M :                         0F8 - |
*P1 :                             1 - | *P2 :                             2 - |
*P2M :                          0F6 - | *P3 :                             3 - |
*P3M :                          0F7 - | *PADDING :                        1 - |
 PC1 :                        0A798 C |  PC4 :                        0A79C C |
*PCAS :                        0C9B - |  PCC1 :                       0A7A8 C |
 PCC2 :                       0A7A2 C |  PCC5 :                       0A7C0 C |
 PCC6 :                       0A7BA C |  PCC8 :                       0A7E0 C |
 PCC9 :                       0A7CF C |  PI :                      3.141592 - |
*PLOT :                        17FD - |  PLV11 :                      0A889 C |
 PLV22 :                      0A891 C | *PMON :                        0AF7 - |
*POS :                         8430 C | *POS2 :                        8A9B C |
 PRC1 :                       0A74E C |  PRC2 :                       0A767 C |
 PRCRET :                     0A76F C | *PRE0 :                         0F5 - |
*PRE1 :                         0F3 - |  PREPAREBANNER :               82C4 C |
*PRISTRI :                      82D - | *PRRET :                       0C8D - |
*PTEST :                       17FA - |  RAM_START :                  0AA00 - |
*RELAXED :                        0 - | *RND :                          836 - |
*RP :                           0FD - | *RWCONT :                      0C91 - |
*SAVE :                         821 - |  SAVEH :                         6A - |
 SAVEL :                         6B - | *SCRFUN :                       827 - |
 SETVRAM :                    0A887 C | *SHOWPLAYER :                   830 - |
*SIO :                          0F0 - |  SPH :                          0FE - |
 SPL :                          0FF - | *STA1 :                        8014 C |
*START :                       8000 C |  SWITCHCOLORS :                8343 C |
 SWS1 :                        8349 C |  SWS2 :                        835C C |
 SWS3 :                        837B C |  SWS4 :                        8383 C |
*T0 :                           0F4 - | *T1 :                           0F2 - |
*TIME :                  "22:53:50" - |  TINY_LOGO :                  0A459 C |
 TL1 :                         8406 C |  TL2 :                         8403 C |
 TLINE :                       8400 C |  TM0 :                        0A86B C |
 TM1 :                        0A877 C |  TM2 :                        0A875 C |
 TMEND :                      0A885 C | *TMR :                          0F1 - |
*TRUE :                           1 - |  VALUE :                         1C - |
*VAR_A_HI :                      20 - |  VAR_A_LO :                      21 - |
 VAR_B_HI :                      22 - |  VAR_B_LO :                      23 - |
*VAR_C_HI :                      24 - | *VAR_C_LO :                      25 - |
*VAR_D_HI :                      26 - | *VAR_D_LO :                      27 - |
*VAR_E_HI :                      28 - | *VAR_E_LO :                      29 - |
*VAR_F_HI :                      2A - | *VAR_F_LO :                      2B - |
*VAR_G_HI :                      2C - | *VAR_G_LO :                      2D - |
*VAR_H_HI :                      2E - | *VAR_H_LO :                      2F - |
*VAR_I_HI :                      30 - | *VAR_I_LO :                      31 - |
*VAR_J_HI :                      32 - | *VAR_J_LO :                      33 - |
*VAR_K_HI :                      34 - | *VAR_K_LO :                      35 - |
 VAR_L_HI :                      36 - | *VAR_L_LO :                      37 - |
*VAR_M_HI :                      38 - | *VAR_M_LO :                      39 - |
*VAR_N_HI :                      3A - | *VAR_N_LO :                      3B - |
*VAR_O_HI :                      3C - | *VAR_O_LO :                      3D - |
*VAR_P_HI :                      3E - | *VAR_P_LO :                      3F - |
*VAR_Q_HI :                      40 - | *VAR_Q_LO :                      41 - |
*VAR_R_HI :                      42 - | *VAR_R_LO :                      43 - |
*VAR_S_HI :                      44 - | *VAR_S_LO :                      45 - |
 VAR_T_HI :                      46 - |  VAR_T_LO :                      47 - |
 VAR_U_HI :                      48 - |  VAR_U_LO :                      49 - |
 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 86 - 11/22/2024 22:53:50


 VAR_V_HI :                      4A - |  VAR_V_LO :                      4B - |
*VAR_W_HI :                      4C - |  VAR_W_LO :                      4D - |
 VAR_X_HI :                      4E - |  VAR_X_LO :                      4F - |
 VAR_Y_HI :                      50 - |  VAR_Y_LO :                      51 - |
 VAR_Z_HI :                      52 - |  VAR_Z_LO :                      53 - |
*VERSION :                     142F - |  VRAM :                        4000 - |
 VRAM1 :                      0A931 C |  VRAM10 :                      8A5C C |
 VRAM100 :                     9027 C |  VRAM2 :                      0A932 C |
 VRAM20 :                      8A5D C |  VRAM200 :                     9028 C |
 VRAM3 :                      0A938 C |  VRAM30 :                      8A63 C |
 VRAM300 :                     902E C |  VRAM_END :                    5FFF - |
 VRAM_INC_Y_ES40 :            0A924 C |  VRAM_LEN :                    1FFF - |
 VRAM_TAB_HI :                0AA00 - |  VRAM_TAB_LO :                0AB00 - |
*WKEY :                         81E - |  X :                             40 - |
 XBY_TO_VRAM :                0A913 C | *XPY_TO_VRAM :                0A8BE C |
*XPY_TO_VRAM_ES40 :           0A902 C | *XPY_TO_VRAM_R013 :           0A8E0 C |
 XW :                            40 - |  Y_POS_RING_BUFFER :           9300 C |
 ZG_KCC :                      9400 C |  ZG_Z9001 :                    9C00 C |
 ZOOM_BUFFER :                0AC00 C |

    269 symbols
    124 unused symbols

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 87 - 11/22/2024 22:53:50


  Defined Macros:
  ---------------

LDRR{NOEXPIF,NOEXPAND}                |

      1 macro

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 88 - 11/22/2024 22:53:50


  Defined Functions:
  ------------------

LO                                    | HI                                   

 AS V1.42 Beta [Bld 240] - Source File kccdemo.asm - Page 89 - 11/22/2024 22:53:50


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.09 seconds assembly time

   2181 lines source file
   6719 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
